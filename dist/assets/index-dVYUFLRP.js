(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function Vy(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var mm={exports:{}},hl={},gm={exports:{}},ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _o=Symbol.for("react.element"),Wy=Symbol.for("react.portal"),zy=Symbol.for("react.fragment"),$y=Symbol.for("react.strict_mode"),By=Symbol.for("react.profiler"),Hy=Symbol.for("react.provider"),Gy=Symbol.for("react.context"),qy=Symbol.for("react.forward_ref"),Ky=Symbol.for("react.suspense"),Yy=Symbol.for("react.memo"),Qy=Symbol.for("react.lazy"),Wh=Symbol.iterator;function Xy(t){return t===null||typeof t!="object"?null:(t=Wh&&t[Wh]||t["@@iterator"],typeof t=="function"?t:null)}var vm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_m=Object.assign,ym={};function Hr(t,e,n){this.props=t,this.context=e,this.refs=ym,this.updater=n||vm}Hr.prototype.isReactComponent={};Hr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Hr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function wm(){}wm.prototype=Hr.prototype;function Xu(t,e,n){this.props=t,this.context=e,this.refs=ym,this.updater=n||vm}var Ju=Xu.prototype=new wm;Ju.constructor=Xu;_m(Ju,Hr.prototype);Ju.isPureReactComponent=!0;var zh=Array.isArray,Sm=Object.prototype.hasOwnProperty,Zu={current:null},km={key:!0,ref:!0,__self:!0,__source:!0};function xm(t,e,n){var s,r={},i=null,o=null;if(e!=null)for(s in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Sm.call(e,s)&&!km.hasOwnProperty(s)&&(r[s]=e[s]);var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];r.children=c}if(t&&t.defaultProps)for(s in l=t.defaultProps,l)r[s]===void 0&&(r[s]=l[s]);return{$$typeof:_o,type:t,key:i,ref:o,props:r,_owner:Zu.current}}function Jy(t,e){return{$$typeof:_o,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ed(t){return typeof t=="object"&&t!==null&&t.$$typeof===_o}function Zy(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var $h=/\/+/g;function ql(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Zy(""+t.key):e.toString(36)}function na(t,e,n,s,r){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case _o:case Wy:o=!0}}if(o)return o=t,r=r(o),t=s===""?"."+ql(o,0):s,zh(r)?(n="",t!=null&&(n=t.replace($h,"$&/")+"/"),na(r,e,n,"",function(u){return u})):r!=null&&(ed(r)&&(r=Jy(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace($h,"$&/")+"/")+t)),e.push(r)),1;if(o=0,s=s===""?".":s+":",zh(t))for(var l=0;l<t.length;l++){i=t[l];var c=s+ql(i,l);o+=na(i,e,n,c,r)}else if(c=Xy(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=s+ql(i,l++),o+=na(i,e,n,c,r);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Oo(t,e,n){if(t==null)return t;var s=[],r=0;return na(t,s,"","",function(i){return e.call(n,i,r++)}),s}function ew(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var pt={current:null},sa={transition:null},tw={ReactCurrentDispatcher:pt,ReactCurrentBatchConfig:sa,ReactCurrentOwner:Zu};function Em(){throw Error("act(...) is not supported in production builds of React.")}ne.Children={map:Oo,forEach:function(t,e,n){Oo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Oo(t,function(){e++}),e},toArray:function(t){return Oo(t,function(e){return e})||[]},only:function(t){if(!ed(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ne.Component=Hr;ne.Fragment=zy;ne.Profiler=By;ne.PureComponent=Xu;ne.StrictMode=$y;ne.Suspense=Ky;ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tw;ne.act=Em;ne.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=_m({},t.props),r=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Zu.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)Sm.call(e,c)&&!km.hasOwnProperty(c)&&(s[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}return{$$typeof:_o,type:t.type,key:r,ref:i,props:s,_owner:o}};ne.createContext=function(t){return t={$$typeof:Gy,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Hy,_context:t},t.Consumer=t};ne.createElement=xm;ne.createFactory=function(t){var e=xm.bind(null,t);return e.type=t,e};ne.createRef=function(){return{current:null}};ne.forwardRef=function(t){return{$$typeof:qy,render:t}};ne.isValidElement=ed;ne.lazy=function(t){return{$$typeof:Qy,_payload:{_status:-1,_result:t},_init:ew}};ne.memo=function(t,e){return{$$typeof:Yy,type:t,compare:e===void 0?null:e}};ne.startTransition=function(t){var e=sa.transition;sa.transition={};try{t()}finally{sa.transition=e}};ne.unstable_act=Em;ne.useCallback=function(t,e){return pt.current.useCallback(t,e)};ne.useContext=function(t){return pt.current.useContext(t)};ne.useDebugValue=function(){};ne.useDeferredValue=function(t){return pt.current.useDeferredValue(t)};ne.useEffect=function(t,e){return pt.current.useEffect(t,e)};ne.useId=function(){return pt.current.useId()};ne.useImperativeHandle=function(t,e,n){return pt.current.useImperativeHandle(t,e,n)};ne.useInsertionEffect=function(t,e){return pt.current.useInsertionEffect(t,e)};ne.useLayoutEffect=function(t,e){return pt.current.useLayoutEffect(t,e)};ne.useMemo=function(t,e){return pt.current.useMemo(t,e)};ne.useReducer=function(t,e,n){return pt.current.useReducer(t,e,n)};ne.useRef=function(t){return pt.current.useRef(t)};ne.useState=function(t){return pt.current.useState(t)};ne.useSyncExternalStore=function(t,e,n){return pt.current.useSyncExternalStore(t,e,n)};ne.useTransition=function(){return pt.current.useTransition()};ne.version="18.3.1";gm.exports=ne;var E=gm.exports;const nw=Vy(E);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sw=E,rw=Symbol.for("react.element"),iw=Symbol.for("react.fragment"),ow=Object.prototype.hasOwnProperty,aw=sw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,lw={key:!0,ref:!0,__self:!0,__source:!0};function Cm(t,e,n){var s,r={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(s in e)ow.call(e,s)&&!lw.hasOwnProperty(s)&&(r[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)r[s]===void 0&&(r[s]=e[s]);return{$$typeof:rw,type:t,key:i,ref:o,props:r,_owner:aw.current}}hl.Fragment=iw;hl.jsx=Cm;hl.jsxs=Cm;mm.exports=hl;var a=mm.exports,Oc={},Nm={exports:{}},Rt={},Tm={exports:{}},Im={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(R,T){var U=R.length;R.push(T);e:for(;0<U;){var $=U-1>>>1,re=R[$];if(0<r(re,T))R[$]=T,R[U]=re,U=$;else break e}}function n(R){return R.length===0?null:R[0]}function s(R){if(R.length===0)return null;var T=R[0],U=R.pop();if(U!==T){R[0]=U;e:for(var $=0,re=R.length,Dt=re>>>1;$<Dt;){var Q=2*($+1)-1,ze=R[Q],Me=Q+1,$e=R[Me];if(0>r(ze,U))Me<re&&0>r($e,ze)?(R[$]=$e,R[Me]=U,$=Me):(R[$]=ze,R[Q]=U,$=Q);else if(Me<re&&0>r($e,U))R[$]=$e,R[Me]=U,$=Me;else break e}}return T}function r(R,T){var U=R.sortIndex-T.sortIndex;return U!==0?U:R.id-T.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,f=null,d=3,_=!1,v=!1,S=!1,w=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(R){for(var T=n(u);T!==null;){if(T.callback===null)s(u);else if(T.startTime<=R)s(u),T.sortIndex=T.expirationTime,e(c,T);else break;T=n(u)}}function k(R){if(S=!1,g(R),!v)if(n(c)!==null)v=!0,fe(C);else{var T=n(u);T!==null&&G(k,T.startTime-R)}}function C(R,T){v=!1,S&&(S=!1,m(j),j=-1),_=!0;var U=d;try{for(g(T),f=n(c);f!==null&&(!(f.expirationTime>T)||R&&!Y());){var $=f.callback;if(typeof $=="function"){f.callback=null,d=f.priorityLevel;var re=$(f.expirationTime<=T);T=t.unstable_now(),typeof re=="function"?f.callback=re:f===n(c)&&s(c),g(T)}else s(c);f=n(c)}if(f!==null)var Dt=!0;else{var Q=n(u);Q!==null&&G(k,Q.startTime-T),Dt=!1}return Dt}finally{f=null,d=U,_=!1}}var N=!1,b=null,j=-1,X=5,K=-1;function Y(){return!(t.unstable_now()-K<X)}function Ee(){if(b!==null){var R=t.unstable_now();K=R;var T=!0;try{T=b(!0,R)}finally{T?L():(N=!1,b=null)}}else N=!1}var L;if(typeof p=="function")L=function(){p(Ee)};else if(typeof MessageChannel<"u"){var ve=new MessageChannel,se=ve.port2;ve.port1.onmessage=Ee,L=function(){se.postMessage(null)}}else L=function(){w(Ee,0)};function fe(R){b=R,N||(N=!0,L())}function G(R,T){j=w(function(){R(t.unstable_now())},T)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(R){R.callback=null},t.unstable_continueExecution=function(){v||_||(v=!0,fe(C))},t.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<R?Math.floor(1e3/R):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(R){switch(d){case 1:case 2:case 3:var T=3;break;default:T=d}var U=d;d=T;try{return R()}finally{d=U}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(R,T){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var U=d;d=R;try{return T()}finally{d=U}},t.unstable_scheduleCallback=function(R,T,U){var $=t.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?$+U:$):U=$,R){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=U+re,R={id:h++,callback:T,priorityLevel:R,startTime:U,expirationTime:re,sortIndex:-1},U>$?(R.sortIndex=U,e(u,R),n(c)===null&&R===n(u)&&(S?(m(j),j=-1):S=!0,G(k,U-$))):(R.sortIndex=re,e(c,R),v||_||(v=!0,fe(C))),R},t.unstable_shouldYield=Y,t.unstable_wrapCallback=function(R){var T=d;return function(){var U=d;d=T;try{return R.apply(this,arguments)}finally{d=U}}}})(Im);Tm.exports=Im;var cw=Tm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uw=E,Pt=cw;function I(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var bm=new Set,zi={};function Js(t,e){Rr(t,e),Rr(t+"Capture",e)}function Rr(t,e){for(zi[t]=e,t=0;t<e.length;t++)bm.add(e[t])}var Nn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Lc=Object.prototype.hasOwnProperty,dw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Bh={},Hh={};function hw(t){return Lc.call(Hh,t)?!0:Lc.call(Bh,t)?!1:dw.test(t)?Hh[t]=!0:(Bh[t]=!0,!1)}function fw(t,e,n,s){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function pw(t,e,n,s){if(e===null||typeof e>"u"||fw(t,e,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function mt(t,e,n,s,r,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Ze={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ze[t]=new mt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ze[e]=new mt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ze[t]=new mt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ze[t]=new mt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ze[t]=new mt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ze[t]=new mt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ze[t]=new mt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ze[t]=new mt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ze[t]=new mt(t,5,!1,t.toLowerCase(),null,!1,!1)});var td=/[\-:]([a-z])/g;function nd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(td,nd);Ze[e]=new mt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(td,nd);Ze[e]=new mt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(td,nd);Ze[e]=new mt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ze[t]=new mt(t,1,!1,t.toLowerCase(),null,!1,!1)});Ze.xlinkHref=new mt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ze[t]=new mt(t,1,!1,t.toLowerCase(),null,!0,!0)});function sd(t,e,n,s){var r=Ze.hasOwnProperty(e)?Ze[e]:null;(r!==null?r.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(pw(e,n,r,s)&&(n=null),s||r===null?hw(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,s=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,s?t.setAttributeNS(s,e,n):t.setAttribute(e,n))))}var jn=uw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Lo=Symbol.for("react.element"),or=Symbol.for("react.portal"),ar=Symbol.for("react.fragment"),rd=Symbol.for("react.strict_mode"),Mc=Symbol.for("react.profiler"),Pm=Symbol.for("react.provider"),Rm=Symbol.for("react.context"),id=Symbol.for("react.forward_ref"),Fc=Symbol.for("react.suspense"),Uc=Symbol.for("react.suspense_list"),od=Symbol.for("react.memo"),zn=Symbol.for("react.lazy"),Am=Symbol.for("react.offscreen"),Gh=Symbol.iterator;function si(t){return t===null||typeof t!="object"?null:(t=Gh&&t[Gh]||t["@@iterator"],typeof t=="function"?t:null)}var Ie=Object.assign,Kl;function gi(t){if(Kl===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Kl=e&&e[1]||""}return`
`+Kl+t}var Yl=!1;function Ql(t,e){if(!t||Yl)return"";Yl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var s=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){s=u}t.call(e.prototype)}else{try{throw Error()}catch(u){s=u}t()}}catch(u){if(u&&s&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),i=s.stack.split(`
`),o=r.length-1,l=i.length-1;1<=o&&0<=l&&r[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(r[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||r[o]!==i[l]){var c=`
`+r[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{Yl=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?gi(t):""}function mw(t){switch(t.tag){case 5:return gi(t.type);case 16:return gi("Lazy");case 13:return gi("Suspense");case 19:return gi("SuspenseList");case 0:case 2:case 15:return t=Ql(t.type,!1),t;case 11:return t=Ql(t.type.render,!1),t;case 1:return t=Ql(t.type,!0),t;default:return""}}function Vc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ar:return"Fragment";case or:return"Portal";case Mc:return"Profiler";case rd:return"StrictMode";case Fc:return"Suspense";case Uc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Rm:return(t.displayName||"Context")+".Consumer";case Pm:return(t._context.displayName||"Context")+".Provider";case id:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case od:return e=t.displayName||null,e!==null?e:Vc(t.type)||"Memo";case zn:e=t._payload,t=t._init;try{return Vc(t(e))}catch{}}return null}function gw(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Vc(e);case 8:return e===rd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ds(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function jm(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function vw(t){var e=jm(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){s=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Mo(t){t._valueTracker||(t._valueTracker=vw(t))}function Dm(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=jm(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function ya(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Wc(t,e){var n=e.checked;return Ie({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function qh(t,e){var n=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;n=ds(e.value!=null?e.value:n),t._wrapperState={initialChecked:s,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Om(t,e){e=e.checked,e!=null&&sd(t,"checked",e,!1)}function zc(t,e){Om(t,e);var n=ds(e.value),s=e.type;if(n!=null)s==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?$c(t,e.type,n):e.hasOwnProperty("defaultValue")&&$c(t,e.type,ds(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Kh(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function $c(t,e,n){(e!=="number"||ya(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var vi=Array.isArray;function wr(t,e,n,s){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&s&&(t[n].defaultSelected=!0)}else{for(n=""+ds(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,s&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Bc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(I(91));return Ie({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Yh(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(I(92));if(vi(n)){if(1<n.length)throw Error(I(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ds(n)}}function Lm(t,e){var n=ds(e.value),s=ds(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),s!=null&&(t.defaultValue=""+s)}function Qh(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Mm(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Hc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Mm(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Fo,Fm=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,s,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,s,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Fo=Fo||document.createElement("div"),Fo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Fo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function $i(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var xi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_w=["Webkit","ms","Moz","O"];Object.keys(xi).forEach(function(t){_w.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),xi[e]=xi[t]})});function Um(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||xi.hasOwnProperty(t)&&xi[t]?(""+e).trim():e+"px"}function Vm(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var s=n.indexOf("--")===0,r=Um(n,e[n],s);n==="float"&&(n="cssFloat"),s?t.setProperty(n,r):t[n]=r}}var yw=Ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Gc(t,e){if(e){if(yw[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(I(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(I(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(I(61))}if(e.style!=null&&typeof e.style!="object")throw Error(I(62))}}function qc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kc=null;function ad(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Yc=null,Sr=null,kr=null;function Xh(t){if(t=So(t)){if(typeof Yc!="function")throw Error(I(280));var e=t.stateNode;e&&(e=vl(e),Yc(t.stateNode,t.type,e))}}function Wm(t){Sr?kr?kr.push(t):kr=[t]:Sr=t}function zm(){if(Sr){var t=Sr,e=kr;if(kr=Sr=null,Xh(t),e)for(t=0;t<e.length;t++)Xh(e[t])}}function $m(t,e){return t(e)}function Bm(){}var Xl=!1;function Hm(t,e,n){if(Xl)return t(e,n);Xl=!0;try{return $m(t,e,n)}finally{Xl=!1,(Sr!==null||kr!==null)&&(Bm(),zm())}}function Bi(t,e){var n=t.stateNode;if(n===null)return null;var s=vl(n);if(s===null)return null;n=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(I(231,e,typeof n));return n}var Qc=!1;if(Nn)try{var ri={};Object.defineProperty(ri,"passive",{get:function(){Qc=!0}}),window.addEventListener("test",ri,ri),window.removeEventListener("test",ri,ri)}catch{Qc=!1}function ww(t,e,n,s,r,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var Ei=!1,wa=null,Sa=!1,Xc=null,Sw={onError:function(t){Ei=!0,wa=t}};function kw(t,e,n,s,r,i,o,l,c){Ei=!1,wa=null,ww.apply(Sw,arguments)}function xw(t,e,n,s,r,i,o,l,c){if(kw.apply(this,arguments),Ei){if(Ei){var u=wa;Ei=!1,wa=null}else throw Error(I(198));Sa||(Sa=!0,Xc=u)}}function Zs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Gm(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Jh(t){if(Zs(t)!==t)throw Error(I(188))}function Ew(t){var e=t.alternate;if(!e){if(e=Zs(t),e===null)throw Error(I(188));return e!==t?null:t}for(var n=t,s=e;;){var r=n.return;if(r===null)break;var i=r.alternate;if(i===null){if(s=r.return,s!==null){n=s;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===n)return Jh(r),t;if(i===s)return Jh(r),e;i=i.sibling}throw Error(I(188))}if(n.return!==s.return)n=r,s=i;else{for(var o=!1,l=r.child;l;){if(l===n){o=!0,n=r,s=i;break}if(l===s){o=!0,s=r,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,s=r;break}if(l===s){o=!0,s=i,n=r;break}l=l.sibling}if(!o)throw Error(I(189))}}if(n.alternate!==s)throw Error(I(190))}if(n.tag!==3)throw Error(I(188));return n.stateNode.current===n?t:e}function qm(t){return t=Ew(t),t!==null?Km(t):null}function Km(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Km(t);if(e!==null)return e;t=t.sibling}return null}var Ym=Pt.unstable_scheduleCallback,Zh=Pt.unstable_cancelCallback,Cw=Pt.unstable_shouldYield,Nw=Pt.unstable_requestPaint,je=Pt.unstable_now,Tw=Pt.unstable_getCurrentPriorityLevel,ld=Pt.unstable_ImmediatePriority,Qm=Pt.unstable_UserBlockingPriority,ka=Pt.unstable_NormalPriority,Iw=Pt.unstable_LowPriority,Xm=Pt.unstable_IdlePriority,fl=null,hn=null;function bw(t){if(hn&&typeof hn.onCommitFiberRoot=="function")try{hn.onCommitFiberRoot(fl,t,void 0,(t.current.flags&128)===128)}catch{}}var sn=Math.clz32?Math.clz32:Aw,Pw=Math.log,Rw=Math.LN2;function Aw(t){return t>>>=0,t===0?32:31-(Pw(t)/Rw|0)|0}var Uo=64,Vo=4194304;function _i(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function xa(t,e){var n=t.pendingLanes;if(n===0)return 0;var s=0,r=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~r;l!==0?s=_i(l):(i&=o,i!==0&&(s=_i(i)))}else o=n&~r,o!==0?s=_i(o):i!==0&&(s=_i(i));if(s===0)return 0;if(e!==0&&e!==s&&!(e&r)&&(r=s&-s,i=e&-e,r>=i||r===16&&(i&4194240)!==0))return e;if(s&4&&(s|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=s;0<e;)n=31-sn(e),r=1<<n,s|=t[n],e&=~r;return s}function jw(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Dw(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,r=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-sn(i),l=1<<o,c=r[o];c===-1?(!(l&n)||l&s)&&(r[o]=jw(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function Jc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Jm(){var t=Uo;return Uo<<=1,!(Uo&4194240)&&(Uo=64),t}function Jl(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function yo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-sn(e),t[e]=n}function Ow(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-sn(n),i=1<<r;e[r]=0,s[r]=-1,t[r]=-1,n&=~i}}function cd(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-sn(n),r=1<<s;r&e|t[s]&e&&(t[s]|=e),n&=~r}}var ce=0;function Zm(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var eg,ud,tg,ng,sg,Zc=!1,Wo=[],Jn=null,Zn=null,es=null,Hi=new Map,Gi=new Map,Bn=[],Lw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ef(t,e){switch(t){case"focusin":case"focusout":Jn=null;break;case"dragenter":case"dragleave":Zn=null;break;case"mouseover":case"mouseout":es=null;break;case"pointerover":case"pointerout":Hi.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gi.delete(e.pointerId)}}function ii(t,e,n,s,r,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:i,targetContainers:[r]},e!==null&&(e=So(e),e!==null&&ud(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function Mw(t,e,n,s,r){switch(e){case"focusin":return Jn=ii(Jn,t,e,n,s,r),!0;case"dragenter":return Zn=ii(Zn,t,e,n,s,r),!0;case"mouseover":return es=ii(es,t,e,n,s,r),!0;case"pointerover":var i=r.pointerId;return Hi.set(i,ii(Hi.get(i)||null,t,e,n,s,r)),!0;case"gotpointercapture":return i=r.pointerId,Gi.set(i,ii(Gi.get(i)||null,t,e,n,s,r)),!0}return!1}function rg(t){var e=Rs(t.target);if(e!==null){var n=Zs(e);if(n!==null){if(e=n.tag,e===13){if(e=Gm(n),e!==null){t.blockedOn=e,sg(t.priority,function(){tg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ra(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=eu(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);Kc=s,n.target.dispatchEvent(s),Kc=null}else return e=So(n),e!==null&&ud(e),t.blockedOn=n,!1;e.shift()}return!0}function tf(t,e,n){ra(t)&&n.delete(e)}function Fw(){Zc=!1,Jn!==null&&ra(Jn)&&(Jn=null),Zn!==null&&ra(Zn)&&(Zn=null),es!==null&&ra(es)&&(es=null),Hi.forEach(tf),Gi.forEach(tf)}function oi(t,e){t.blockedOn===e&&(t.blockedOn=null,Zc||(Zc=!0,Pt.unstable_scheduleCallback(Pt.unstable_NormalPriority,Fw)))}function qi(t){function e(r){return oi(r,t)}if(0<Wo.length){oi(Wo[0],t);for(var n=1;n<Wo.length;n++){var s=Wo[n];s.blockedOn===t&&(s.blockedOn=null)}}for(Jn!==null&&oi(Jn,t),Zn!==null&&oi(Zn,t),es!==null&&oi(es,t),Hi.forEach(e),Gi.forEach(e),n=0;n<Bn.length;n++)s=Bn[n],s.blockedOn===t&&(s.blockedOn=null);for(;0<Bn.length&&(n=Bn[0],n.blockedOn===null);)rg(n),n.blockedOn===null&&Bn.shift()}var xr=jn.ReactCurrentBatchConfig,Ea=!0;function Uw(t,e,n,s){var r=ce,i=xr.transition;xr.transition=null;try{ce=1,dd(t,e,n,s)}finally{ce=r,xr.transition=i}}function Vw(t,e,n,s){var r=ce,i=xr.transition;xr.transition=null;try{ce=4,dd(t,e,n,s)}finally{ce=r,xr.transition=i}}function dd(t,e,n,s){if(Ea){var r=eu(t,e,n,s);if(r===null)lc(t,e,s,Ca,n),ef(t,s);else if(Mw(r,t,e,n,s))s.stopPropagation();else if(ef(t,s),e&4&&-1<Lw.indexOf(t)){for(;r!==null;){var i=So(r);if(i!==null&&eg(i),i=eu(t,e,n,s),i===null&&lc(t,e,s,Ca,n),i===r)break;r=i}r!==null&&s.stopPropagation()}else lc(t,e,s,null,n)}}var Ca=null;function eu(t,e,n,s){if(Ca=null,t=ad(s),t=Rs(t),t!==null)if(e=Zs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Gm(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ca=t,null}function ig(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Tw()){case ld:return 1;case Qm:return 4;case ka:case Iw:return 16;case Xm:return 536870912;default:return 16}default:return 16}}var Yn=null,hd=null,ia=null;function og(){if(ia)return ia;var t,e=hd,n=e.length,s,r="value"in Yn?Yn.value:Yn.textContent,i=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(s=1;s<=o&&e[n-s]===r[i-s];s++);return ia=r.slice(t,1<s?1-s:void 0)}function oa(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function zo(){return!0}function nf(){return!1}function At(t){function e(n,s,r,i,o){this._reactName=n,this._targetInst=r,this.type=s,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?zo:nf,this.isPropagationStopped=nf,this}return Ie(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=zo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=zo)},persist:function(){},isPersistent:zo}),e}var Gr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fd=At(Gr),wo=Ie({},Gr,{view:0,detail:0}),Ww=At(wo),Zl,ec,ai,pl=Ie({},wo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ai&&(ai&&t.type==="mousemove"?(Zl=t.screenX-ai.screenX,ec=t.screenY-ai.screenY):ec=Zl=0,ai=t),Zl)},movementY:function(t){return"movementY"in t?t.movementY:ec}}),sf=At(pl),zw=Ie({},pl,{dataTransfer:0}),$w=At(zw),Bw=Ie({},wo,{relatedTarget:0}),tc=At(Bw),Hw=Ie({},Gr,{animationName:0,elapsedTime:0,pseudoElement:0}),Gw=At(Hw),qw=Ie({},Gr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Kw=At(qw),Yw=Ie({},Gr,{data:0}),rf=At(Yw),Qw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Jw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Jw[t])?!!e[t]:!1}function pd(){return Zw}var eS=Ie({},wo,{key:function(t){if(t.key){var e=Qw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=oa(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Xw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pd,charCode:function(t){return t.type==="keypress"?oa(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?oa(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),tS=At(eS),nS=Ie({},pl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),of=At(nS),sS=Ie({},wo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pd}),rS=At(sS),iS=Ie({},Gr,{propertyName:0,elapsedTime:0,pseudoElement:0}),oS=At(iS),aS=Ie({},pl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),lS=At(aS),cS=[9,13,27,32],md=Nn&&"CompositionEvent"in window,Ci=null;Nn&&"documentMode"in document&&(Ci=document.documentMode);var uS=Nn&&"TextEvent"in window&&!Ci,ag=Nn&&(!md||Ci&&8<Ci&&11>=Ci),af=" ",lf=!1;function lg(t,e){switch(t){case"keyup":return cS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var lr=!1;function dS(t,e){switch(t){case"compositionend":return cg(e);case"keypress":return e.which!==32?null:(lf=!0,af);case"textInput":return t=e.data,t===af&&lf?null:t;default:return null}}function hS(t,e){if(lr)return t==="compositionend"||!md&&lg(t,e)?(t=og(),ia=hd=Yn=null,lr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ag&&e.locale!=="ko"?null:e.data;default:return null}}var fS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!fS[t.type]:e==="textarea"}function ug(t,e,n,s){Wm(s),e=Na(e,"onChange"),0<e.length&&(n=new fd("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var Ni=null,Ki=null;function pS(t){Sg(t,0)}function ml(t){var e=dr(t);if(Dm(e))return t}function mS(t,e){if(t==="change")return e}var dg=!1;if(Nn){var nc;if(Nn){var sc="oninput"in document;if(!sc){var uf=document.createElement("div");uf.setAttribute("oninput","return;"),sc=typeof uf.oninput=="function"}nc=sc}else nc=!1;dg=nc&&(!document.documentMode||9<document.documentMode)}function df(){Ni&&(Ni.detachEvent("onpropertychange",hg),Ki=Ni=null)}function hg(t){if(t.propertyName==="value"&&ml(Ki)){var e=[];ug(e,Ki,t,ad(t)),Hm(pS,e)}}function gS(t,e,n){t==="focusin"?(df(),Ni=e,Ki=n,Ni.attachEvent("onpropertychange",hg)):t==="focusout"&&df()}function vS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ml(Ki)}function _S(t,e){if(t==="click")return ml(e)}function yS(t,e){if(t==="input"||t==="change")return ml(e)}function wS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var an=typeof Object.is=="function"?Object.is:wS;function Yi(t,e){if(an(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var r=n[s];if(!Lc.call(e,r)||!an(t[r],e[r]))return!1}return!0}function hf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ff(t,e){var n=hf(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=hf(n)}}function fg(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?fg(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function pg(){for(var t=window,e=ya();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ya(t.document)}return e}function gd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function SS(t){var e=pg(),n=t.focusedElem,s=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&fg(n.ownerDocument.documentElement,n)){if(s!==null&&gd(n)){if(e=s.start,t=s.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,i=Math.min(s.start,r);s=s.end===void 0?i:Math.min(s.end,r),!t.extend&&i>s&&(r=s,s=i,i=r),r=ff(n,i);var o=ff(n,s);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),i>s?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var kS=Nn&&"documentMode"in document&&11>=document.documentMode,cr=null,tu=null,Ti=null,nu=!1;function pf(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;nu||cr==null||cr!==ya(s)||(s=cr,"selectionStart"in s&&gd(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Ti&&Yi(Ti,s)||(Ti=s,s=Na(tu,"onSelect"),0<s.length&&(e=new fd("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=cr)))}function $o(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ur={animationend:$o("Animation","AnimationEnd"),animationiteration:$o("Animation","AnimationIteration"),animationstart:$o("Animation","AnimationStart"),transitionend:$o("Transition","TransitionEnd")},rc={},mg={};Nn&&(mg=document.createElement("div").style,"AnimationEvent"in window||(delete ur.animationend.animation,delete ur.animationiteration.animation,delete ur.animationstart.animation),"TransitionEvent"in window||delete ur.transitionend.transition);function gl(t){if(rc[t])return rc[t];if(!ur[t])return t;var e=ur[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in mg)return rc[t]=e[n];return t}var gg=gl("animationend"),vg=gl("animationiteration"),_g=gl("animationstart"),yg=gl("transitionend"),wg=new Map,mf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gs(t,e){wg.set(t,e),Js(e,[t])}for(var ic=0;ic<mf.length;ic++){var oc=mf[ic],xS=oc.toLowerCase(),ES=oc[0].toUpperCase()+oc.slice(1);gs(xS,"on"+ES)}gs(gg,"onAnimationEnd");gs(vg,"onAnimationIteration");gs(_g,"onAnimationStart");gs("dblclick","onDoubleClick");gs("focusin","onFocus");gs("focusout","onBlur");gs(yg,"onTransitionEnd");Rr("onMouseEnter",["mouseout","mouseover"]);Rr("onMouseLeave",["mouseout","mouseover"]);Rr("onPointerEnter",["pointerout","pointerover"]);Rr("onPointerLeave",["pointerout","pointerover"]);Js("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Js("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Js("onBeforeInput",["compositionend","keypress","textInput","paste"]);Js("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Js("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Js("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),CS=new Set("cancel close invalid load scroll toggle".split(" ").concat(yi));function gf(t,e,n){var s=t.type||"unknown-event";t.currentTarget=n,xw(s,e,void 0,t),t.currentTarget=null}function Sg(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],r=s.event;s=s.listeners;e:{var i=void 0;if(e)for(var o=s.length-1;0<=o;o--){var l=s[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&r.isPropagationStopped())break e;gf(r,l,u),i=c}else for(o=0;o<s.length;o++){if(l=s[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&r.isPropagationStopped())break e;gf(r,l,u),i=c}}}if(Sa)throw t=Xc,Sa=!1,Xc=null,t}function ye(t,e){var n=e[au];n===void 0&&(n=e[au]=new Set);var s=t+"__bubble";n.has(s)||(kg(e,t,2,!1),n.add(s))}function ac(t,e,n){var s=0;e&&(s|=4),kg(n,t,s,e)}var Bo="_reactListening"+Math.random().toString(36).slice(2);function Qi(t){if(!t[Bo]){t[Bo]=!0,bm.forEach(function(n){n!=="selectionchange"&&(CS.has(n)||ac(n,!1,t),ac(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Bo]||(e[Bo]=!0,ac("selectionchange",!1,e))}}function kg(t,e,n,s){switch(ig(e)){case 1:var r=Uw;break;case 4:r=Vw;break;default:r=dd}n=r.bind(null,e,n,t),r=void 0,!Qc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),s?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function lc(t,e,n,s,r){var i=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var l=s.stateNode.containerInfo;if(l===r||l.nodeType===8&&l.parentNode===r)break;if(o===4)for(o=s.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;o=o.return}for(;l!==null;){if(o=Rs(l),o===null)return;if(c=o.tag,c===5||c===6){s=i=o;continue e}l=l.parentNode}}s=s.return}Hm(function(){var u=i,h=ad(n),f=[];e:{var d=wg.get(t);if(d!==void 0){var _=fd,v=t;switch(t){case"keypress":if(oa(n)===0)break e;case"keydown":case"keyup":_=tS;break;case"focusin":v="focus",_=tc;break;case"focusout":v="blur",_=tc;break;case"beforeblur":case"afterblur":_=tc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=sf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=$w;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=rS;break;case gg:case vg:case _g:_=Gw;break;case yg:_=oS;break;case"scroll":_=Ww;break;case"wheel":_=lS;break;case"copy":case"cut":case"paste":_=Kw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=of}var S=(e&4)!==0,w=!S&&t==="scroll",m=S?d!==null?d+"Capture":null:d;S=[];for(var p=u,g;p!==null;){g=p;var k=g.stateNode;if(g.tag===5&&k!==null&&(g=k,m!==null&&(k=Bi(p,m),k!=null&&S.push(Xi(p,k,g)))),w)break;p=p.return}0<S.length&&(d=new _(d,v,null,n,h),f.push({event:d,listeners:S}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",d&&n!==Kc&&(v=n.relatedTarget||n.fromElement)&&(Rs(v)||v[Tn]))break e;if((_||d)&&(d=h.window===h?h:(d=h.ownerDocument)?d.defaultView||d.parentWindow:window,_?(v=n.relatedTarget||n.toElement,_=u,v=v?Rs(v):null,v!==null&&(w=Zs(v),v!==w||v.tag!==5&&v.tag!==6)&&(v=null)):(_=null,v=u),_!==v)){if(S=sf,k="onMouseLeave",m="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(S=of,k="onPointerLeave",m="onPointerEnter",p="pointer"),w=_==null?d:dr(_),g=v==null?d:dr(v),d=new S(k,p+"leave",_,n,h),d.target=w,d.relatedTarget=g,k=null,Rs(h)===u&&(S=new S(m,p+"enter",v,n,h),S.target=g,S.relatedTarget=w,k=S),w=k,_&&v)t:{for(S=_,m=v,p=0,g=S;g;g=rr(g))p++;for(g=0,k=m;k;k=rr(k))g++;for(;0<p-g;)S=rr(S),p--;for(;0<g-p;)m=rr(m),g--;for(;p--;){if(S===m||m!==null&&S===m.alternate)break t;S=rr(S),m=rr(m)}S=null}else S=null;_!==null&&vf(f,d,_,S,!1),v!==null&&w!==null&&vf(f,w,v,S,!0)}}e:{if(d=u?dr(u):window,_=d.nodeName&&d.nodeName.toLowerCase(),_==="select"||_==="input"&&d.type==="file")var C=mS;else if(cf(d))if(dg)C=yS;else{C=vS;var N=gS}else(_=d.nodeName)&&_.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(C=_S);if(C&&(C=C(t,u))){ug(f,C,n,h);break e}N&&N(t,d,u),t==="focusout"&&(N=d._wrapperState)&&N.controlled&&d.type==="number"&&$c(d,"number",d.value)}switch(N=u?dr(u):window,t){case"focusin":(cf(N)||N.contentEditable==="true")&&(cr=N,tu=u,Ti=null);break;case"focusout":Ti=tu=cr=null;break;case"mousedown":nu=!0;break;case"contextmenu":case"mouseup":case"dragend":nu=!1,pf(f,n,h);break;case"selectionchange":if(kS)break;case"keydown":case"keyup":pf(f,n,h)}var b;if(md)e:{switch(t){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else lr?lg(t,n)&&(j="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(j="onCompositionStart");j&&(ag&&n.locale!=="ko"&&(lr||j!=="onCompositionStart"?j==="onCompositionEnd"&&lr&&(b=og()):(Yn=h,hd="value"in Yn?Yn.value:Yn.textContent,lr=!0)),N=Na(u,j),0<N.length&&(j=new rf(j,t,null,n,h),f.push({event:j,listeners:N}),b?j.data=b:(b=cg(n),b!==null&&(j.data=b)))),(b=uS?dS(t,n):hS(t,n))&&(u=Na(u,"onBeforeInput"),0<u.length&&(h=new rf("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:u}),h.data=b))}Sg(f,e)})}function Xi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Na(t,e){for(var n=e+"Capture",s=[];t!==null;){var r=t,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=Bi(t,n),i!=null&&s.unshift(Xi(t,i,r)),i=Bi(t,e),i!=null&&s.push(Xi(t,i,r))),t=t.return}return s}function rr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function vf(t,e,n,s,r){for(var i=e._reactName,o=[];n!==null&&n!==s;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===s)break;l.tag===5&&u!==null&&(l=u,r?(c=Bi(n,i),c!=null&&o.unshift(Xi(n,c,l))):r||(c=Bi(n,i),c!=null&&o.push(Xi(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var NS=/\r\n?/g,TS=/\u0000|\uFFFD/g;function _f(t){return(typeof t=="string"?t:""+t).replace(NS,`
`).replace(TS,"")}function Ho(t,e,n){if(e=_f(e),_f(t)!==e&&n)throw Error(I(425))}function Ta(){}var su=null,ru=null;function iu(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ou=typeof setTimeout=="function"?setTimeout:void 0,IS=typeof clearTimeout=="function"?clearTimeout:void 0,yf=typeof Promise=="function"?Promise:void 0,bS=typeof queueMicrotask=="function"?queueMicrotask:typeof yf<"u"?function(t){return yf.resolve(null).then(t).catch(PS)}:ou;function PS(t){setTimeout(function(){throw t})}function cc(t,e){var n=e,s=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(s===0){t.removeChild(r),qi(e);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=r}while(n);qi(e)}function ts(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function wf(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var qr=Math.random().toString(36).slice(2),dn="__reactFiber$"+qr,Ji="__reactProps$"+qr,Tn="__reactContainer$"+qr,au="__reactEvents$"+qr,RS="__reactListeners$"+qr,AS="__reactHandles$"+qr;function Rs(t){var e=t[dn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Tn]||n[dn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=wf(t);t!==null;){if(n=t[dn])return n;t=wf(t)}return e}t=n,n=t.parentNode}return null}function So(t){return t=t[dn]||t[Tn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function dr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(I(33))}function vl(t){return t[Ji]||null}var lu=[],hr=-1;function vs(t){return{current:t}}function Se(t){0>hr||(t.current=lu[hr],lu[hr]=null,hr--)}function ge(t,e){hr++,lu[hr]=t.current,t.current=e}var hs={},ot=vs(hs),kt=vs(!1),Vs=hs;function Ar(t,e){var n=t.type.contextTypes;if(!n)return hs;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in n)r[i]=e[i];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function xt(t){return t=t.childContextTypes,t!=null}function Ia(){Se(kt),Se(ot)}function Sf(t,e,n){if(ot.current!==hs)throw Error(I(168));ge(ot,e),ge(kt,n)}function xg(t,e,n){var s=t.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var r in s)if(!(r in e))throw Error(I(108,gw(t)||"Unknown",r));return Ie({},n,s)}function ba(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||hs,Vs=ot.current,ge(ot,t),ge(kt,kt.current),!0}function kf(t,e,n){var s=t.stateNode;if(!s)throw Error(I(169));n?(t=xg(t,e,Vs),s.__reactInternalMemoizedMergedChildContext=t,Se(kt),Se(ot),ge(ot,t)):Se(kt),ge(kt,n)}var vn=null,_l=!1,uc=!1;function Eg(t){vn===null?vn=[t]:vn.push(t)}function jS(t){_l=!0,Eg(t)}function _s(){if(!uc&&vn!==null){uc=!0;var t=0,e=ce;try{var n=vn;for(ce=1;t<n.length;t++){var s=n[t];do s=s(!0);while(s!==null)}vn=null,_l=!1}catch(r){throw vn!==null&&(vn=vn.slice(t+1)),Ym(ld,_s),r}finally{ce=e,uc=!1}}return null}var fr=[],pr=0,Pa=null,Ra=0,Lt=[],Mt=0,Ws=null,yn=1,wn="";function Ns(t,e){fr[pr++]=Ra,fr[pr++]=Pa,Pa=t,Ra=e}function Cg(t,e,n){Lt[Mt++]=yn,Lt[Mt++]=wn,Lt[Mt++]=Ws,Ws=t;var s=yn;t=wn;var r=32-sn(s)-1;s&=~(1<<r),n+=1;var i=32-sn(e)+r;if(30<i){var o=r-r%5;i=(s&(1<<o)-1).toString(32),s>>=o,r-=o,yn=1<<32-sn(e)+r|n<<r|s,wn=i+t}else yn=1<<i|n<<r|s,wn=t}function vd(t){t.return!==null&&(Ns(t,1),Cg(t,1,0))}function _d(t){for(;t===Pa;)Pa=fr[--pr],fr[pr]=null,Ra=fr[--pr],fr[pr]=null;for(;t===Ws;)Ws=Lt[--Mt],Lt[Mt]=null,wn=Lt[--Mt],Lt[Mt]=null,yn=Lt[--Mt],Lt[Mt]=null}var bt=null,It=null,xe=!1,Zt=null;function Ng(t,e){var n=Ft(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function xf(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,bt=t,It=ts(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,bt=t,It=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ws!==null?{id:yn,overflow:wn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ft(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,bt=t,It=null,!0):!1;default:return!1}}function cu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function uu(t){if(xe){var e=It;if(e){var n=e;if(!xf(t,e)){if(cu(t))throw Error(I(418));e=ts(n.nextSibling);var s=bt;e&&xf(t,e)?Ng(s,n):(t.flags=t.flags&-4097|2,xe=!1,bt=t)}}else{if(cu(t))throw Error(I(418));t.flags=t.flags&-4097|2,xe=!1,bt=t}}}function Ef(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;bt=t}function Go(t){if(t!==bt)return!1;if(!xe)return Ef(t),xe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!iu(t.type,t.memoizedProps)),e&&(e=It)){if(cu(t))throw Tg(),Error(I(418));for(;e;)Ng(t,e),e=ts(e.nextSibling)}if(Ef(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(I(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){It=ts(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}It=null}}else It=bt?ts(t.stateNode.nextSibling):null;return!0}function Tg(){for(var t=It;t;)t=ts(t.nextSibling)}function jr(){It=bt=null,xe=!1}function yd(t){Zt===null?Zt=[t]:Zt.push(t)}var DS=jn.ReactCurrentBatchConfig;function li(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(I(309));var s=n.stateNode}if(!s)throw Error(I(147,t));var r=s,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=r.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(I(284));if(!n._owner)throw Error(I(290,t))}return t}function qo(t,e){throw t=Object.prototype.toString.call(e),Error(I(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Cf(t){var e=t._init;return e(t._payload)}function Ig(t){function e(m,p){if(t){var g=m.deletions;g===null?(m.deletions=[p],m.flags|=16):g.push(p)}}function n(m,p){if(!t)return null;for(;p!==null;)e(m,p),p=p.sibling;return null}function s(m,p){for(m=new Map;p!==null;)p.key!==null?m.set(p.key,p):m.set(p.index,p),p=p.sibling;return m}function r(m,p){return m=is(m,p),m.index=0,m.sibling=null,m}function i(m,p,g){return m.index=g,t?(g=m.alternate,g!==null?(g=g.index,g<p?(m.flags|=2,p):g):(m.flags|=2,p)):(m.flags|=1048576,p)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function l(m,p,g,k){return p===null||p.tag!==6?(p=vc(g,m.mode,k),p.return=m,p):(p=r(p,g),p.return=m,p)}function c(m,p,g,k){var C=g.type;return C===ar?h(m,p,g.props.children,k,g.key):p!==null&&(p.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===zn&&Cf(C)===p.type)?(k=r(p,g.props),k.ref=li(m,p,g),k.return=m,k):(k=fa(g.type,g.key,g.props,null,m.mode,k),k.ref=li(m,p,g),k.return=m,k)}function u(m,p,g,k){return p===null||p.tag!==4||p.stateNode.containerInfo!==g.containerInfo||p.stateNode.implementation!==g.implementation?(p=_c(g,m.mode,k),p.return=m,p):(p=r(p,g.children||[]),p.return=m,p)}function h(m,p,g,k,C){return p===null||p.tag!==7?(p=Fs(g,m.mode,k,C),p.return=m,p):(p=r(p,g),p.return=m,p)}function f(m,p,g){if(typeof p=="string"&&p!==""||typeof p=="number")return p=vc(""+p,m.mode,g),p.return=m,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Lo:return g=fa(p.type,p.key,p.props,null,m.mode,g),g.ref=li(m,null,p),g.return=m,g;case or:return p=_c(p,m.mode,g),p.return=m,p;case zn:var k=p._init;return f(m,k(p._payload),g)}if(vi(p)||si(p))return p=Fs(p,m.mode,g,null),p.return=m,p;qo(m,p)}return null}function d(m,p,g,k){var C=p!==null?p.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return C!==null?null:l(m,p,""+g,k);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Lo:return g.key===C?c(m,p,g,k):null;case or:return g.key===C?u(m,p,g,k):null;case zn:return C=g._init,d(m,p,C(g._payload),k)}if(vi(g)||si(g))return C!==null?null:h(m,p,g,k,null);qo(m,g)}return null}function _(m,p,g,k,C){if(typeof k=="string"&&k!==""||typeof k=="number")return m=m.get(g)||null,l(p,m,""+k,C);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Lo:return m=m.get(k.key===null?g:k.key)||null,c(p,m,k,C);case or:return m=m.get(k.key===null?g:k.key)||null,u(p,m,k,C);case zn:var N=k._init;return _(m,p,g,N(k._payload),C)}if(vi(k)||si(k))return m=m.get(g)||null,h(p,m,k,C,null);qo(p,k)}return null}function v(m,p,g,k){for(var C=null,N=null,b=p,j=p=0,X=null;b!==null&&j<g.length;j++){b.index>j?(X=b,b=null):X=b.sibling;var K=d(m,b,g[j],k);if(K===null){b===null&&(b=X);break}t&&b&&K.alternate===null&&e(m,b),p=i(K,p,j),N===null?C=K:N.sibling=K,N=K,b=X}if(j===g.length)return n(m,b),xe&&Ns(m,j),C;if(b===null){for(;j<g.length;j++)b=f(m,g[j],k),b!==null&&(p=i(b,p,j),N===null?C=b:N.sibling=b,N=b);return xe&&Ns(m,j),C}for(b=s(m,b);j<g.length;j++)X=_(b,m,j,g[j],k),X!==null&&(t&&X.alternate!==null&&b.delete(X.key===null?j:X.key),p=i(X,p,j),N===null?C=X:N.sibling=X,N=X);return t&&b.forEach(function(Y){return e(m,Y)}),xe&&Ns(m,j),C}function S(m,p,g,k){var C=si(g);if(typeof C!="function")throw Error(I(150));if(g=C.call(g),g==null)throw Error(I(151));for(var N=C=null,b=p,j=p=0,X=null,K=g.next();b!==null&&!K.done;j++,K=g.next()){b.index>j?(X=b,b=null):X=b.sibling;var Y=d(m,b,K.value,k);if(Y===null){b===null&&(b=X);break}t&&b&&Y.alternate===null&&e(m,b),p=i(Y,p,j),N===null?C=Y:N.sibling=Y,N=Y,b=X}if(K.done)return n(m,b),xe&&Ns(m,j),C;if(b===null){for(;!K.done;j++,K=g.next())K=f(m,K.value,k),K!==null&&(p=i(K,p,j),N===null?C=K:N.sibling=K,N=K);return xe&&Ns(m,j),C}for(b=s(m,b);!K.done;j++,K=g.next())K=_(b,m,j,K.value,k),K!==null&&(t&&K.alternate!==null&&b.delete(K.key===null?j:K.key),p=i(K,p,j),N===null?C=K:N.sibling=K,N=K);return t&&b.forEach(function(Ee){return e(m,Ee)}),xe&&Ns(m,j),C}function w(m,p,g,k){if(typeof g=="object"&&g!==null&&g.type===ar&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case Lo:e:{for(var C=g.key,N=p;N!==null;){if(N.key===C){if(C=g.type,C===ar){if(N.tag===7){n(m,N.sibling),p=r(N,g.props.children),p.return=m,m=p;break e}}else if(N.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===zn&&Cf(C)===N.type){n(m,N.sibling),p=r(N,g.props),p.ref=li(m,N,g),p.return=m,m=p;break e}n(m,N);break}else e(m,N);N=N.sibling}g.type===ar?(p=Fs(g.props.children,m.mode,k,g.key),p.return=m,m=p):(k=fa(g.type,g.key,g.props,null,m.mode,k),k.ref=li(m,p,g),k.return=m,m=k)}return o(m);case or:e:{for(N=g.key;p!==null;){if(p.key===N)if(p.tag===4&&p.stateNode.containerInfo===g.containerInfo&&p.stateNode.implementation===g.implementation){n(m,p.sibling),p=r(p,g.children||[]),p.return=m,m=p;break e}else{n(m,p);break}else e(m,p);p=p.sibling}p=_c(g,m.mode,k),p.return=m,m=p}return o(m);case zn:return N=g._init,w(m,p,N(g._payload),k)}if(vi(g))return v(m,p,g,k);if(si(g))return S(m,p,g,k);qo(m,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,p!==null&&p.tag===6?(n(m,p.sibling),p=r(p,g),p.return=m,m=p):(n(m,p),p=vc(g,m.mode,k),p.return=m,m=p),o(m)):n(m,p)}return w}var Dr=Ig(!0),bg=Ig(!1),Aa=vs(null),ja=null,mr=null,wd=null;function Sd(){wd=mr=ja=null}function kd(t){var e=Aa.current;Se(Aa),t._currentValue=e}function du(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function Er(t,e){ja=t,wd=mr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(wt=!0),t.firstContext=null)}function Wt(t){var e=t._currentValue;if(wd!==t)if(t={context:t,memoizedValue:e,next:null},mr===null){if(ja===null)throw Error(I(308));mr=t,ja.dependencies={lanes:0,firstContext:t}}else mr=mr.next=t;return e}var As=null;function xd(t){As===null?As=[t]:As.push(t)}function Pg(t,e,n,s){var r=e.interleaved;return r===null?(n.next=n,xd(e)):(n.next=r.next,r.next=n),e.interleaved=n,In(t,s)}function In(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var $n=!1;function Ed(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rg(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function En(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ns(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,oe&2){var r=s.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),s.pending=e,In(t,n)}return r=s.interleaved,r===null?(e.next=e,xd(s)):(e.next=r.next,r.next=e),s.interleaved=e,In(t,n)}function aa(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,cd(t,n)}}function Nf(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var r=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?r=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?r=i=e:i=i.next=e}else r=i=e;n={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:s.shared,effects:s.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Da(t,e,n,s){var r=t.updateQueue;$n=!1;var i=r.firstBaseUpdate,o=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(i!==null){var f=r.baseState;o=0,h=u=c=null,l=i;do{var d=l.lane,_=l.eventTime;if((s&d)===d){h!==null&&(h=h.next={eventTime:_,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=t,S=l;switch(d=e,_=n,S.tag){case 1:if(v=S.payload,typeof v=="function"){f=v.call(_,f,d);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=S.payload,d=typeof v=="function"?v.call(_,f,d):v,d==null)break e;f=Ie({},f,d);break e;case 2:$n=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,d=r.effects,d===null?r.effects=[l]:d.push(l))}else _={eventTime:_,lane:d,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=_,c=f):h=h.next=_,o|=d;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;d=l,l=d.next,d.next=null,r.lastBaseUpdate=d,r.shared.pending=null}}while(!0);if(h===null&&(c=f),r.baseState=c,r.firstBaseUpdate=u,r.lastBaseUpdate=h,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else i===null&&(r.shared.lanes=0);$s|=o,t.lanes=o,t.memoizedState=f}}function Tf(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var s=t[e],r=s.callback;if(r!==null){if(s.callback=null,s=n,typeof r!="function")throw Error(I(191,r));r.call(s)}}}var ko={},fn=vs(ko),Zi=vs(ko),eo=vs(ko);function js(t){if(t===ko)throw Error(I(174));return t}function Cd(t,e){switch(ge(eo,e),ge(Zi,t),ge(fn,ko),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Hc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Hc(e,t)}Se(fn),ge(fn,e)}function Or(){Se(fn),Se(Zi),Se(eo)}function Ag(t){js(eo.current);var e=js(fn.current),n=Hc(e,t.type);e!==n&&(ge(Zi,t),ge(fn,n))}function Nd(t){Zi.current===t&&(Se(fn),Se(Zi))}var Ne=vs(0);function Oa(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var dc=[];function Td(){for(var t=0;t<dc.length;t++)dc[t]._workInProgressVersionPrimary=null;dc.length=0}var la=jn.ReactCurrentDispatcher,hc=jn.ReactCurrentBatchConfig,zs=0,Te=null,Fe=null,Ge=null,La=!1,Ii=!1,to=0,OS=0;function st(){throw Error(I(321))}function Id(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!an(t[n],e[n]))return!1;return!0}function bd(t,e,n,s,r,i){if(zs=i,Te=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,la.current=t===null||t.memoizedState===null?US:VS,t=n(s,r),Ii){i=0;do{if(Ii=!1,to=0,25<=i)throw Error(I(301));i+=1,Ge=Fe=null,e.updateQueue=null,la.current=WS,t=n(s,r)}while(Ii)}if(la.current=Ma,e=Fe!==null&&Fe.next!==null,zs=0,Ge=Fe=Te=null,La=!1,e)throw Error(I(300));return t}function Pd(){var t=to!==0;return to=0,t}function un(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ge===null?Te.memoizedState=Ge=t:Ge=Ge.next=t,Ge}function zt(){if(Fe===null){var t=Te.alternate;t=t!==null?t.memoizedState:null}else t=Fe.next;var e=Ge===null?Te.memoizedState:Ge.next;if(e!==null)Ge=e,Fe=t;else{if(t===null)throw Error(I(310));Fe=t,t={memoizedState:Fe.memoizedState,baseState:Fe.baseState,baseQueue:Fe.baseQueue,queue:Fe.queue,next:null},Ge===null?Te.memoizedState=Ge=t:Ge=Ge.next=t}return Ge}function no(t,e){return typeof e=="function"?e(t):e}function fc(t){var e=zt(),n=e.queue;if(n===null)throw Error(I(311));n.lastRenderedReducer=t;var s=Fe,r=s.baseQueue,i=n.pending;if(i!==null){if(r!==null){var o=r.next;r.next=i.next,i.next=o}s.baseQueue=r=i,n.pending=null}if(r!==null){i=r.next,s=s.baseState;var l=o=null,c=null,u=i;do{var h=u.lane;if((zs&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:t(s,u.action);else{var f={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,o=s):c=c.next=f,Te.lanes|=h,$s|=h}u=u.next}while(u!==null&&u!==i);c===null?o=s:c.next=l,an(s,e.memoizedState)||(wt=!0),e.memoizedState=s,e.baseState=o,e.baseQueue=c,n.lastRenderedState=s}if(t=n.interleaved,t!==null){r=t;do i=r.lane,Te.lanes|=i,$s|=i,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function pc(t){var e=zt(),n=e.queue;if(n===null)throw Error(I(311));n.lastRenderedReducer=t;var s=n.dispatch,r=n.pending,i=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do i=t(i,o.action),o=o.next;while(o!==r);an(i,e.memoizedState)||(wt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,s]}function jg(){}function Dg(t,e){var n=Te,s=zt(),r=e(),i=!an(s.memoizedState,r);if(i&&(s.memoizedState=r,wt=!0),s=s.queue,Rd(Mg.bind(null,n,s,t),[t]),s.getSnapshot!==e||i||Ge!==null&&Ge.memoizedState.tag&1){if(n.flags|=2048,so(9,Lg.bind(null,n,s,r,e),void 0,null),Ke===null)throw Error(I(349));zs&30||Og(n,e,r)}return r}function Og(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Te.updateQueue,e===null?(e={lastEffect:null,stores:null},Te.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Lg(t,e,n,s){e.value=n,e.getSnapshot=s,Fg(e)&&Ug(t)}function Mg(t,e,n){return n(function(){Fg(e)&&Ug(t)})}function Fg(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!an(t,n)}catch{return!0}}function Ug(t){var e=In(t,1);e!==null&&rn(e,t,1,-1)}function If(t){var e=un();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:no,lastRenderedState:t},e.queue=t,t=t.dispatch=FS.bind(null,Te,t),[e.memoizedState,t]}function so(t,e,n,s){return t={tag:t,create:e,destroy:n,deps:s,next:null},e=Te.updateQueue,e===null?(e={lastEffect:null,stores:null},Te.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t)),t}function Vg(){return zt().memoizedState}function ca(t,e,n,s){var r=un();Te.flags|=t,r.memoizedState=so(1|e,n,void 0,s===void 0?null:s)}function yl(t,e,n,s){var r=zt();s=s===void 0?null:s;var i=void 0;if(Fe!==null){var o=Fe.memoizedState;if(i=o.destroy,s!==null&&Id(s,o.deps)){r.memoizedState=so(e,n,i,s);return}}Te.flags|=t,r.memoizedState=so(1|e,n,i,s)}function bf(t,e){return ca(8390656,8,t,e)}function Rd(t,e){return yl(2048,8,t,e)}function Wg(t,e){return yl(4,2,t,e)}function zg(t,e){return yl(4,4,t,e)}function $g(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Bg(t,e,n){return n=n!=null?n.concat([t]):null,yl(4,4,$g.bind(null,e,t),n)}function Ad(){}function Hg(t,e){var n=zt();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&Id(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function Gg(t,e){var n=zt();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&Id(e,s[1])?s[0]:(t=t(),n.memoizedState=[t,e],t)}function qg(t,e,n){return zs&21?(an(n,e)||(n=Jm(),Te.lanes|=n,$s|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,wt=!0),t.memoizedState=n)}function LS(t,e){var n=ce;ce=n!==0&&4>n?n:4,t(!0);var s=hc.transition;hc.transition={};try{t(!1),e()}finally{ce=n,hc.transition=s}}function Kg(){return zt().memoizedState}function MS(t,e,n){var s=rs(t);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},Yg(t))Qg(e,n);else if(n=Pg(t,e,n,s),n!==null){var r=dt();rn(n,t,s,r),Xg(n,e,s)}}function FS(t,e,n){var s=rs(t),r={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(Yg(t))Qg(e,r);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(r.hasEagerState=!0,r.eagerState=l,an(l,o)){var c=e.interleaved;c===null?(r.next=r,xd(e)):(r.next=c.next,c.next=r),e.interleaved=r;return}}catch{}finally{}n=Pg(t,e,r,s),n!==null&&(r=dt(),rn(n,t,s,r),Xg(n,e,s))}}function Yg(t){var e=t.alternate;return t===Te||e!==null&&e===Te}function Qg(t,e){Ii=La=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Xg(t,e,n){if(n&4194240){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,cd(t,n)}}var Ma={readContext:Wt,useCallback:st,useContext:st,useEffect:st,useImperativeHandle:st,useInsertionEffect:st,useLayoutEffect:st,useMemo:st,useReducer:st,useRef:st,useState:st,useDebugValue:st,useDeferredValue:st,useTransition:st,useMutableSource:st,useSyncExternalStore:st,useId:st,unstable_isNewReconciler:!1},US={readContext:Wt,useCallback:function(t,e){return un().memoizedState=[t,e===void 0?null:e],t},useContext:Wt,useEffect:bf,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ca(4194308,4,$g.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ca(4194308,4,t,e)},useInsertionEffect:function(t,e){return ca(4,2,t,e)},useMemo:function(t,e){var n=un();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var s=un();return e=n!==void 0?n(e):e,s.memoizedState=s.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},s.queue=t,t=t.dispatch=MS.bind(null,Te,t),[s.memoizedState,t]},useRef:function(t){var e=un();return t={current:t},e.memoizedState=t},useState:If,useDebugValue:Ad,useDeferredValue:function(t){return un().memoizedState=t},useTransition:function(){var t=If(!1),e=t[0];return t=LS.bind(null,t[1]),un().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var s=Te,r=un();if(xe){if(n===void 0)throw Error(I(407));n=n()}else{if(n=e(),Ke===null)throw Error(I(349));zs&30||Og(s,e,n)}r.memoizedState=n;var i={value:n,getSnapshot:e};return r.queue=i,bf(Mg.bind(null,s,i,t),[t]),s.flags|=2048,so(9,Lg.bind(null,s,i,n,e),void 0,null),n},useId:function(){var t=un(),e=Ke.identifierPrefix;if(xe){var n=wn,s=yn;n=(s&~(1<<32-sn(s)-1)).toString(32)+n,e=":"+e+"R"+n,n=to++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=OS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},VS={readContext:Wt,useCallback:Hg,useContext:Wt,useEffect:Rd,useImperativeHandle:Bg,useInsertionEffect:Wg,useLayoutEffect:zg,useMemo:Gg,useReducer:fc,useRef:Vg,useState:function(){return fc(no)},useDebugValue:Ad,useDeferredValue:function(t){var e=zt();return qg(e,Fe.memoizedState,t)},useTransition:function(){var t=fc(no)[0],e=zt().memoizedState;return[t,e]},useMutableSource:jg,useSyncExternalStore:Dg,useId:Kg,unstable_isNewReconciler:!1},WS={readContext:Wt,useCallback:Hg,useContext:Wt,useEffect:Rd,useImperativeHandle:Bg,useInsertionEffect:Wg,useLayoutEffect:zg,useMemo:Gg,useReducer:pc,useRef:Vg,useState:function(){return pc(no)},useDebugValue:Ad,useDeferredValue:function(t){var e=zt();return Fe===null?e.memoizedState=t:qg(e,Fe.memoizedState,t)},useTransition:function(){var t=pc(no)[0],e=zt().memoizedState;return[t,e]},useMutableSource:jg,useSyncExternalStore:Dg,useId:Kg,unstable_isNewReconciler:!1};function Xt(t,e){if(t&&t.defaultProps){e=Ie({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function hu(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:Ie({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var wl={isMounted:function(t){return(t=t._reactInternals)?Zs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var s=dt(),r=rs(t),i=En(s,r);i.payload=e,n!=null&&(i.callback=n),e=ns(t,i,r),e!==null&&(rn(e,t,r,s),aa(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=dt(),r=rs(t),i=En(s,r);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=ns(t,i,r),e!==null&&(rn(e,t,r,s),aa(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=dt(),s=rs(t),r=En(n,s);r.tag=2,e!=null&&(r.callback=e),e=ns(t,r,s),e!==null&&(rn(e,t,s,n),aa(e,t,s))}};function Pf(t,e,n,s,r,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,i,o):e.prototype&&e.prototype.isPureReactComponent?!Yi(n,s)||!Yi(r,i):!0}function Jg(t,e,n){var s=!1,r=hs,i=e.contextType;return typeof i=="object"&&i!==null?i=Wt(i):(r=xt(e)?Vs:ot.current,s=e.contextTypes,i=(s=s!=null)?Ar(t,r):hs),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=wl,t.stateNode=e,e._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=i),e}function Rf(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&wl.enqueueReplaceState(e,e.state,null)}function fu(t,e,n,s){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Ed(t);var i=e.contextType;typeof i=="object"&&i!==null?r.context=Wt(i):(i=xt(e)?Vs:ot.current,r.context=Ar(t,i)),r.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(hu(t,e,i,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&wl.enqueueReplaceState(r,r.state,null),Da(t,n,r,s),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Lr(t,e){try{var n="",s=e;do n+=mw(s),s=s.return;while(s);var r=n}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:r,digest:null}}function mc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function pu(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var zS=typeof WeakMap=="function"?WeakMap:Map;function Zg(t,e,n){n=En(-1,n),n.tag=3,n.payload={element:null};var s=e.value;return n.callback=function(){Ua||(Ua=!0,Eu=s),pu(t,e)},n}function ev(t,e,n){n=En(-1,n),n.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var r=e.value;n.payload=function(){return s(r)},n.callback=function(){pu(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){pu(t,e),typeof s!="function"&&(ss===null?ss=new Set([this]):ss.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Af(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new zS;var r=new Set;s.set(e,r)}else r=s.get(e),r===void 0&&(r=new Set,s.set(e,r));r.has(n)||(r.add(n),t=nk.bind(null,t,e,n),e.then(t,t))}function jf(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Df(t,e,n,s,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=En(-1,1),e.tag=2,ns(n,e,1))),n.lanes|=1),t)}var $S=jn.ReactCurrentOwner,wt=!1;function lt(t,e,n,s){e.child=t===null?bg(e,null,n,s):Dr(e,t.child,n,s)}function Of(t,e,n,s,r){n=n.render;var i=e.ref;return Er(e,r),s=bd(t,e,n,s,i,r),n=Pd(),t!==null&&!wt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,bn(t,e,r)):(xe&&n&&vd(e),e.flags|=1,lt(t,e,s,r),e.child)}function Lf(t,e,n,s,r){if(t===null){var i=n.type;return typeof i=="function"&&!Vd(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,tv(t,e,i,s,r)):(t=fa(n.type,null,s,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&r)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Yi,n(o,s)&&t.ref===e.ref)return bn(t,e,r)}return e.flags|=1,t=is(i,s),t.ref=e.ref,t.return=e,e.child=t}function tv(t,e,n,s,r){if(t!==null){var i=t.memoizedProps;if(Yi(i,s)&&t.ref===e.ref)if(wt=!1,e.pendingProps=s=i,(t.lanes&r)!==0)t.flags&131072&&(wt=!0);else return e.lanes=t.lanes,bn(t,e,r)}return mu(t,e,n,s,r)}function nv(t,e,n){var s=e.pendingProps,r=s.children,i=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ge(vr,Tt),Tt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ge(vr,Tt),Tt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:n,ge(vr,Tt),Tt|=s}else i!==null?(s=i.baseLanes|n,e.memoizedState=null):s=n,ge(vr,Tt),Tt|=s;return lt(t,e,r,n),e.child}function sv(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function mu(t,e,n,s,r){var i=xt(n)?Vs:ot.current;return i=Ar(e,i),Er(e,r),n=bd(t,e,n,s,i,r),s=Pd(),t!==null&&!wt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,bn(t,e,r)):(xe&&s&&vd(e),e.flags|=1,lt(t,e,n,r),e.child)}function Mf(t,e,n,s,r){if(xt(n)){var i=!0;ba(e)}else i=!1;if(Er(e,r),e.stateNode===null)ua(t,e),Jg(e,n,s),fu(e,n,s,r),s=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Wt(u):(u=xt(n)?Vs:ot.current,u=Ar(e,u));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==s||c!==u)&&Rf(e,o,s,u),$n=!1;var d=e.memoizedState;o.state=d,Da(e,s,o,r),c=e.memoizedState,l!==s||d!==c||kt.current||$n?(typeof h=="function"&&(hu(e,n,h,s),c=e.memoizedState),(l=$n||Pf(e,n,l,s,d,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=c),o.props=s,o.state=c,o.context=u,s=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{o=e.stateNode,Rg(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Xt(e.type,l),o.props=u,f=e.pendingProps,d=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Wt(c):(c=xt(n)?Vs:ot.current,c=Ar(e,c));var _=n.getDerivedStateFromProps;(h=typeof _=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||d!==c)&&Rf(e,o,s,c),$n=!1,d=e.memoizedState,o.state=d,Da(e,s,o,r);var v=e.memoizedState;l!==f||d!==v||kt.current||$n?(typeof _=="function"&&(hu(e,n,_,s),v=e.memoizedState),(u=$n||Pf(e,n,u,s,d,v,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,v,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,v,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=v),o.props=s,o.state=v,o.context=c,s=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),s=!1)}return gu(t,e,n,s,i,r)}function gu(t,e,n,s,r,i){sv(t,e);var o=(e.flags&128)!==0;if(!s&&!o)return r&&kf(e,n,!1),bn(t,e,i);s=e.stateNode,$S.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,t!==null&&o?(e.child=Dr(e,t.child,null,i),e.child=Dr(e,null,l,i)):lt(t,e,l,i),e.memoizedState=s.state,r&&kf(e,n,!0),e.child}function rv(t){var e=t.stateNode;e.pendingContext?Sf(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Sf(t,e.context,!1),Cd(t,e.containerInfo)}function Ff(t,e,n,s,r){return jr(),yd(r),e.flags|=256,lt(t,e,n,s),e.child}var vu={dehydrated:null,treeContext:null,retryLane:0};function _u(t){return{baseLanes:t,cachePool:null,transitions:null}}function iv(t,e,n){var s=e.pendingProps,r=Ne.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(r&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),ge(Ne,r&1),t===null)return uu(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=s.children,t=s.fallback,i?(s=e.mode,i=e.child,o={mode:"hidden",children:o},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=xl(o,s,0,null),t=Fs(t,s,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=_u(n),e.memoizedState=vu,t):jd(e,o));if(r=t.memoizedState,r!==null&&(l=r.dehydrated,l!==null))return BS(t,e,o,s,l,r,n);if(i){i=s.fallback,o=e.mode,r=t.child,l=r.sibling;var c={mode:"hidden",children:s.children};return!(o&1)&&e.child!==r?(s=e.child,s.childLanes=0,s.pendingProps=c,e.deletions=null):(s=is(r,c),s.subtreeFlags=r.subtreeFlags&14680064),l!==null?i=is(l,i):(i=Fs(i,o,n,null),i.flags|=2),i.return=e,s.return=e,s.sibling=i,e.child=s,s=i,i=e.child,o=t.child.memoizedState,o=o===null?_u(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=vu,s}return i=t.child,t=i.sibling,s=is(i,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=n),s.return=e,s.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=s,e.memoizedState=null,s}function jd(t,e){return e=xl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ko(t,e,n,s){return s!==null&&yd(s),Dr(e,t.child,null,n),t=jd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function BS(t,e,n,s,r,i,o){if(n)return e.flags&256?(e.flags&=-257,s=mc(Error(I(422))),Ko(t,e,o,s)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=s.fallback,r=e.mode,s=xl({mode:"visible",children:s.children},r,0,null),i=Fs(i,r,o,null),i.flags|=2,s.return=e,i.return=e,s.sibling=i,e.child=s,e.mode&1&&Dr(e,t.child,null,o),e.child.memoizedState=_u(o),e.memoizedState=vu,i);if(!(e.mode&1))return Ko(t,e,o,null);if(r.data==="$!"){if(s=r.nextSibling&&r.nextSibling.dataset,s)var l=s.dgst;return s=l,i=Error(I(419)),s=mc(i,s,void 0),Ko(t,e,o,s)}if(l=(o&t.childLanes)!==0,wt||l){if(s=Ke,s!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(s.suspendedLanes|o)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,In(t,r),rn(s,t,r,-1))}return Ud(),s=mc(Error(I(421))),Ko(t,e,o,s)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=sk.bind(null,t),r._reactRetry=e,null):(t=i.treeContext,It=ts(r.nextSibling),bt=e,xe=!0,Zt=null,t!==null&&(Lt[Mt++]=yn,Lt[Mt++]=wn,Lt[Mt++]=Ws,yn=t.id,wn=t.overflow,Ws=e),e=jd(e,s.children),e.flags|=4096,e)}function Uf(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),du(t.return,e,n)}function gc(t,e,n,s,r){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:r}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=n,i.tailMode=r)}function ov(t,e,n){var s=e.pendingProps,r=s.revealOrder,i=s.tail;if(lt(t,e,s.children,n),s=Ne.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Uf(t,n,e);else if(t.tag===19)Uf(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(ge(Ne,s),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Oa(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),gc(e,!1,r,n,i);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Oa(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}gc(e,!0,n,null,i);break;case"together":gc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ua(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function bn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),$s|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(I(153));if(e.child!==null){for(t=e.child,n=is(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=is(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function HS(t,e,n){switch(e.tag){case 3:rv(e),jr();break;case 5:Ag(e);break;case 1:xt(e.type)&&ba(e);break;case 4:Cd(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,r=e.memoizedProps.value;ge(Aa,s._currentValue),s._currentValue=r;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(ge(Ne,Ne.current&1),e.flags|=128,null):n&e.child.childLanes?iv(t,e,n):(ge(Ne,Ne.current&1),t=bn(t,e,n),t!==null?t.sibling:null);ge(Ne,Ne.current&1);break;case 19:if(s=(n&e.childLanes)!==0,t.flags&128){if(s)return ov(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),ge(Ne,Ne.current),s)break;return null;case 22:case 23:return e.lanes=0,nv(t,e,n)}return bn(t,e,n)}var av,yu,lv,cv;av=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};yu=function(){};lv=function(t,e,n,s){var r=t.memoizedProps;if(r!==s){t=e.stateNode,js(fn.current);var i=null;switch(n){case"input":r=Wc(t,r),s=Wc(t,s),i=[];break;case"select":r=Ie({},r,{value:void 0}),s=Ie({},s,{value:void 0}),i=[];break;case"textarea":r=Bc(t,r),s=Bc(t,s),i=[];break;default:typeof r.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=Ta)}Gc(n,s);var o;n=null;for(u in r)if(!s.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var l=r[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(zi.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in s){var c=s[u];if(l=r!=null?r[u]:void 0,s.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(zi.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&ye("scroll",t),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};cv=function(t,e,n,s){n!==s&&(e.flags|=4)};function ci(t,e){if(!xe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function rt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags&14680064,s|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function GS(t,e,n){var s=e.pendingProps;switch(_d(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rt(e),null;case 1:return xt(e.type)&&Ia(),rt(e),null;case 3:return s=e.stateNode,Or(),Se(kt),Se(ot),Td(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(Go(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Zt!==null&&(Tu(Zt),Zt=null))),yu(t,e),rt(e),null;case 5:Nd(e);var r=js(eo.current);if(n=e.type,t!==null&&e.stateNode!=null)lv(t,e,n,s,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(I(166));return rt(e),null}if(t=js(fn.current),Go(e)){s=e.stateNode,n=e.type;var i=e.memoizedProps;switch(s[dn]=e,s[Ji]=i,t=(e.mode&1)!==0,n){case"dialog":ye("cancel",s),ye("close",s);break;case"iframe":case"object":case"embed":ye("load",s);break;case"video":case"audio":for(r=0;r<yi.length;r++)ye(yi[r],s);break;case"source":ye("error",s);break;case"img":case"image":case"link":ye("error",s),ye("load",s);break;case"details":ye("toggle",s);break;case"input":qh(s,i),ye("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},ye("invalid",s);break;case"textarea":Yh(s,i),ye("invalid",s)}Gc(n,i),r=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?s.textContent!==l&&(i.suppressHydrationWarning!==!0&&Ho(s.textContent,l,t),r=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Ho(s.textContent,l,t),r=["children",""+l]):zi.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ye("scroll",s)}switch(n){case"input":Mo(s),Kh(s,i,!0);break;case"textarea":Mo(s),Qh(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=Ta)}s=r,e.updateQueue=s,s!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Mm(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=o.createElement(n,{is:s.is}):(t=o.createElement(n),n==="select"&&(o=t,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):t=o.createElementNS(t,n),t[dn]=e,t[Ji]=s,av(t,e,!1,!1),e.stateNode=t;e:{switch(o=qc(n,s),n){case"dialog":ye("cancel",t),ye("close",t),r=s;break;case"iframe":case"object":case"embed":ye("load",t),r=s;break;case"video":case"audio":for(r=0;r<yi.length;r++)ye(yi[r],t);r=s;break;case"source":ye("error",t),r=s;break;case"img":case"image":case"link":ye("error",t),ye("load",t),r=s;break;case"details":ye("toggle",t),r=s;break;case"input":qh(t,s),r=Wc(t,s),ye("invalid",t);break;case"option":r=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},r=Ie({},s,{value:void 0}),ye("invalid",t);break;case"textarea":Yh(t,s),r=Bc(t,s),ye("invalid",t);break;default:r=s}Gc(n,r),l=r;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Vm(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Fm(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&$i(t,c):typeof c=="number"&&$i(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(zi.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ye("scroll",t):c!=null&&sd(t,i,c,o))}switch(n){case"input":Mo(t),Kh(t,s,!1);break;case"textarea":Mo(t),Qh(t);break;case"option":s.value!=null&&t.setAttribute("value",""+ds(s.value));break;case"select":t.multiple=!!s.multiple,i=s.value,i!=null?wr(t,!!s.multiple,i,!1):s.defaultValue!=null&&wr(t,!!s.multiple,s.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Ta)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return rt(e),null;case 6:if(t&&e.stateNode!=null)cv(t,e,t.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(I(166));if(n=js(eo.current),js(fn.current),Go(e)){if(s=e.stateNode,n=e.memoizedProps,s[dn]=e,(i=s.nodeValue!==n)&&(t=bt,t!==null))switch(t.tag){case 3:Ho(s.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ho(s.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[dn]=e,e.stateNode=s}return rt(e),null;case 13:if(Se(Ne),s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(xe&&It!==null&&e.mode&1&&!(e.flags&128))Tg(),jr(),e.flags|=98560,i=!1;else if(i=Go(e),s!==null&&s.dehydrated!==null){if(t===null){if(!i)throw Error(I(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(I(317));i[dn]=e}else jr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;rt(e),i=!1}else Zt!==null&&(Tu(Zt),Zt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(t===null||Ne.current&1?We===0&&(We=3):Ud())),e.updateQueue!==null&&(e.flags|=4),rt(e),null);case 4:return Or(),yu(t,e),t===null&&Qi(e.stateNode.containerInfo),rt(e),null;case 10:return kd(e.type._context),rt(e),null;case 17:return xt(e.type)&&Ia(),rt(e),null;case 19:if(Se(Ne),i=e.memoizedState,i===null)return rt(e),null;if(s=(e.flags&128)!==0,o=i.rendering,o===null)if(s)ci(i,!1);else{if(We!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Oa(t),o!==null){for(e.flags|=128,ci(i,!1),s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=n,n=e.child;n!==null;)i=n,t=s,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ge(Ne,Ne.current&1|2),e.child}t=t.sibling}i.tail!==null&&je()>Mr&&(e.flags|=128,s=!0,ci(i,!1),e.lanes=4194304)}else{if(!s)if(t=Oa(o),t!==null){if(e.flags|=128,s=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ci(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!xe)return rt(e),null}else 2*je()-i.renderingStartTime>Mr&&n!==1073741824&&(e.flags|=128,s=!0,ci(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=je(),e.sibling=null,n=Ne.current,ge(Ne,s?n&1|2:n&1),e):(rt(e),null);case 22:case 23:return Fd(),s=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?Tt&1073741824&&(rt(e),e.subtreeFlags&6&&(e.flags|=8192)):rt(e),null;case 24:return null;case 25:return null}throw Error(I(156,e.tag))}function qS(t,e){switch(_d(e),e.tag){case 1:return xt(e.type)&&Ia(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Or(),Se(kt),Se(ot),Td(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Nd(e),null;case 13:if(Se(Ne),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(I(340));jr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Se(Ne),null;case 4:return Or(),null;case 10:return kd(e.type._context),null;case 22:case 23:return Fd(),null;case 24:return null;default:return null}}var Yo=!1,it=!1,KS=typeof WeakSet=="function"?WeakSet:Set,M=null;function gr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){Pe(t,e,s)}else n.current=null}function wu(t,e,n){try{n()}catch(s){Pe(t,e,s)}}var Vf=!1;function YS(t,e){if(su=Ea,t=pg(),gd(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var r=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,h=0,f=t,d=null;t:for(;;){for(var _;f!==n||r!==0&&f.nodeType!==3||(l=o+r),f!==i||s!==0&&f.nodeType!==3||(c=o+s),f.nodeType===3&&(o+=f.nodeValue.length),(_=f.firstChild)!==null;)d=f,f=_;for(;;){if(f===t)break t;if(d===n&&++u===r&&(l=o),d===i&&++h===s&&(c=o),(_=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=_}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ru={focusedElem:t,selectionRange:n},Ea=!1,M=e;M!==null;)if(e=M,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,M=t;else for(;M!==null;){e=M;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var S=v.memoizedProps,w=v.memoizedState,m=e.stateNode,p=m.getSnapshotBeforeUpdate(e.elementType===e.type?S:Xt(e.type,S),w);m.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var g=e.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(I(163))}}catch(k){Pe(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,M=t;break}M=e.return}return v=Vf,Vf=!1,v}function bi(t,e,n){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&t)===t){var i=r.destroy;r.destroy=void 0,i!==void 0&&wu(e,n,i)}r=r.next}while(r!==s)}}function Sl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var s=n.create;n.destroy=s()}n=n.next}while(n!==e)}}function Su(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function uv(t){var e=t.alternate;e!==null&&(t.alternate=null,uv(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[dn],delete e[Ji],delete e[au],delete e[RS],delete e[AS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function dv(t){return t.tag===5||t.tag===3||t.tag===4}function Wf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||dv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ku(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ta));else if(s!==4&&(t=t.child,t!==null))for(ku(t,e,n),t=t.sibling;t!==null;)ku(t,e,n),t=t.sibling}function xu(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(xu(t,e,n),t=t.sibling;t!==null;)xu(t,e,n),t=t.sibling}var Qe=null,Jt=!1;function Vn(t,e,n){for(n=n.child;n!==null;)hv(t,e,n),n=n.sibling}function hv(t,e,n){if(hn&&typeof hn.onCommitFiberUnmount=="function")try{hn.onCommitFiberUnmount(fl,n)}catch{}switch(n.tag){case 5:it||gr(n,e);case 6:var s=Qe,r=Jt;Qe=null,Vn(t,e,n),Qe=s,Jt=r,Qe!==null&&(Jt?(t=Qe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Qe.removeChild(n.stateNode));break;case 18:Qe!==null&&(Jt?(t=Qe,n=n.stateNode,t.nodeType===8?cc(t.parentNode,n):t.nodeType===1&&cc(t,n),qi(t)):cc(Qe,n.stateNode));break;case 4:s=Qe,r=Jt,Qe=n.stateNode.containerInfo,Jt=!0,Vn(t,e,n),Qe=s,Jt=r;break;case 0:case 11:case 14:case 15:if(!it&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){r=s=s.next;do{var i=r,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&wu(n,e,o),r=r.next}while(r!==s)}Vn(t,e,n);break;case 1:if(!it&&(gr(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(l){Pe(n,e,l)}Vn(t,e,n);break;case 21:Vn(t,e,n);break;case 22:n.mode&1?(it=(s=it)||n.memoizedState!==null,Vn(t,e,n),it=s):Vn(t,e,n);break;default:Vn(t,e,n)}}function zf(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new KS),e.forEach(function(s){var r=rk.bind(null,t,s);n.has(s)||(n.add(s),s.then(r,r))})}}function Qt(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var r=n[s];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Qe=l.stateNode,Jt=!1;break e;case 3:Qe=l.stateNode.containerInfo,Jt=!0;break e;case 4:Qe=l.stateNode.containerInfo,Jt=!0;break e}l=l.return}if(Qe===null)throw Error(I(160));hv(i,o,r),Qe=null,Jt=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(u){Pe(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)fv(e,t),e=e.sibling}function fv(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Qt(e,t),cn(t),s&4){try{bi(3,t,t.return),Sl(3,t)}catch(S){Pe(t,t.return,S)}try{bi(5,t,t.return)}catch(S){Pe(t,t.return,S)}}break;case 1:Qt(e,t),cn(t),s&512&&n!==null&&gr(n,n.return);break;case 5:if(Qt(e,t),cn(t),s&512&&n!==null&&gr(n,n.return),t.flags&32){var r=t.stateNode;try{$i(r,"")}catch(S){Pe(t,t.return,S)}}if(s&4&&(r=t.stateNode,r!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Om(r,i),qc(l,o);var u=qc(l,i);for(o=0;o<c.length;o+=2){var h=c[o],f=c[o+1];h==="style"?Vm(r,f):h==="dangerouslySetInnerHTML"?Fm(r,f):h==="children"?$i(r,f):sd(r,h,f,u)}switch(l){case"input":zc(r,i);break;case"textarea":Lm(r,i);break;case"select":var d=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var _=i.value;_!=null?wr(r,!!i.multiple,_,!1):d!==!!i.multiple&&(i.defaultValue!=null?wr(r,!!i.multiple,i.defaultValue,!0):wr(r,!!i.multiple,i.multiple?[]:"",!1))}r[Ji]=i}catch(S){Pe(t,t.return,S)}}break;case 6:if(Qt(e,t),cn(t),s&4){if(t.stateNode===null)throw Error(I(162));r=t.stateNode,i=t.memoizedProps;try{r.nodeValue=i}catch(S){Pe(t,t.return,S)}}break;case 3:if(Qt(e,t),cn(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{qi(e.containerInfo)}catch(S){Pe(t,t.return,S)}break;case 4:Qt(e,t),cn(t);break;case 13:Qt(e,t),cn(t),r=t.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(Ld=je())),s&4&&zf(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(it=(u=it)||h,Qt(e,t),it=u):Qt(e,t),cn(t),s&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(M=t,h=t.child;h!==null;){for(f=M=h;M!==null;){switch(d=M,_=d.child,d.tag){case 0:case 11:case 14:case 15:bi(4,d,d.return);break;case 1:gr(d,d.return);var v=d.stateNode;if(typeof v.componentWillUnmount=="function"){s=d,n=d.return;try{e=s,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(S){Pe(s,n,S)}}break;case 5:gr(d,d.return);break;case 22:if(d.memoizedState!==null){Bf(f);continue}}_!==null?(_.return=d,M=_):Bf(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{r=f.stateNode,u?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Um("display",o))}catch(S){Pe(t,t.return,S)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(S){Pe(t,t.return,S)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Qt(e,t),cn(t),s&4&&zf(t);break;case 21:break;default:Qt(e,t),cn(t)}}function cn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(dv(n)){var s=n;break e}n=n.return}throw Error(I(160))}switch(s.tag){case 5:var r=s.stateNode;s.flags&32&&($i(r,""),s.flags&=-33);var i=Wf(t);xu(t,i,r);break;case 3:case 4:var o=s.stateNode.containerInfo,l=Wf(t);ku(t,l,o);break;default:throw Error(I(161))}}catch(c){Pe(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function QS(t,e,n){M=t,pv(t)}function pv(t,e,n){for(var s=(t.mode&1)!==0;M!==null;){var r=M,i=r.child;if(r.tag===22&&s){var o=r.memoizedState!==null||Yo;if(!o){var l=r.alternate,c=l!==null&&l.memoizedState!==null||it;l=Yo;var u=it;if(Yo=o,(it=c)&&!u)for(M=r;M!==null;)o=M,c=o.child,o.tag===22&&o.memoizedState!==null?Hf(r):c!==null?(c.return=o,M=c):Hf(r);for(;i!==null;)M=i,pv(i),i=i.sibling;M=r,Yo=l,it=u}$f(t)}else r.subtreeFlags&8772&&i!==null?(i.return=r,M=i):$f(t)}}function $f(t){for(;M!==null;){var e=M;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:it||Sl(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!it)if(n===null)s.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Xt(e.type,n.memoizedProps);s.componentDidUpdate(r,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Tf(e,i,s);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Tf(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&qi(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(I(163))}it||e.flags&512&&Su(e)}catch(d){Pe(e,e.return,d)}}if(e===t){M=null;break}if(n=e.sibling,n!==null){n.return=e.return,M=n;break}M=e.return}}function Bf(t){for(;M!==null;){var e=M;if(e===t){M=null;break}var n=e.sibling;if(n!==null){n.return=e.return,M=n;break}M=e.return}}function Hf(t){for(;M!==null;){var e=M;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Sl(4,e)}catch(c){Pe(e,n,c)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var r=e.return;try{s.componentDidMount()}catch(c){Pe(e,r,c)}}var i=e.return;try{Su(e)}catch(c){Pe(e,i,c)}break;case 5:var o=e.return;try{Su(e)}catch(c){Pe(e,o,c)}}}catch(c){Pe(e,e.return,c)}if(e===t){M=null;break}var l=e.sibling;if(l!==null){l.return=e.return,M=l;break}M=e.return}}var XS=Math.ceil,Fa=jn.ReactCurrentDispatcher,Dd=jn.ReactCurrentOwner,Vt=jn.ReactCurrentBatchConfig,oe=0,Ke=null,Le=null,Je=0,Tt=0,vr=vs(0),We=0,ro=null,$s=0,kl=0,Od=0,Pi=null,_t=null,Ld=0,Mr=1/0,gn=null,Ua=!1,Eu=null,ss=null,Qo=!1,Qn=null,Va=0,Ri=0,Cu=null,da=-1,ha=0;function dt(){return oe&6?je():da!==-1?da:da=je()}function rs(t){return t.mode&1?oe&2&&Je!==0?Je&-Je:DS.transition!==null?(ha===0&&(ha=Jm()),ha):(t=ce,t!==0||(t=window.event,t=t===void 0?16:ig(t.type)),t):1}function rn(t,e,n,s){if(50<Ri)throw Ri=0,Cu=null,Error(I(185));yo(t,n,s),(!(oe&2)||t!==Ke)&&(t===Ke&&(!(oe&2)&&(kl|=n),We===4&&Hn(t,Je)),Et(t,s),n===1&&oe===0&&!(e.mode&1)&&(Mr=je()+500,_l&&_s()))}function Et(t,e){var n=t.callbackNode;Dw(t,e);var s=xa(t,t===Ke?Je:0);if(s===0)n!==null&&Zh(n),t.callbackNode=null,t.callbackPriority=0;else if(e=s&-s,t.callbackPriority!==e){if(n!=null&&Zh(n),e===1)t.tag===0?jS(Gf.bind(null,t)):Eg(Gf.bind(null,t)),bS(function(){!(oe&6)&&_s()}),n=null;else{switch(Zm(s)){case 1:n=ld;break;case 4:n=Qm;break;case 16:n=ka;break;case 536870912:n=Xm;break;default:n=ka}n=kv(n,mv.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function mv(t,e){if(da=-1,ha=0,oe&6)throw Error(I(327));var n=t.callbackNode;if(Cr()&&t.callbackNode!==n)return null;var s=xa(t,t===Ke?Je:0);if(s===0)return null;if(s&30||s&t.expiredLanes||e)e=Wa(t,s);else{e=s;var r=oe;oe|=2;var i=vv();(Ke!==t||Je!==e)&&(gn=null,Mr=je()+500,Ms(t,e));do try{ek();break}catch(l){gv(t,l)}while(!0);Sd(),Fa.current=i,oe=r,Le!==null?e=0:(Ke=null,Je=0,e=We)}if(e!==0){if(e===2&&(r=Jc(t),r!==0&&(s=r,e=Nu(t,r))),e===1)throw n=ro,Ms(t,0),Hn(t,s),Et(t,je()),n;if(e===6)Hn(t,s);else{if(r=t.current.alternate,!(s&30)&&!JS(r)&&(e=Wa(t,s),e===2&&(i=Jc(t),i!==0&&(s=i,e=Nu(t,i))),e===1))throw n=ro,Ms(t,0),Hn(t,s),Et(t,je()),n;switch(t.finishedWork=r,t.finishedLanes=s,e){case 0:case 1:throw Error(I(345));case 2:Ts(t,_t,gn);break;case 3:if(Hn(t,s),(s&130023424)===s&&(e=Ld+500-je(),10<e)){if(xa(t,0)!==0)break;if(r=t.suspendedLanes,(r&s)!==s){dt(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=ou(Ts.bind(null,t,_t,gn),e);break}Ts(t,_t,gn);break;case 4:if(Hn(t,s),(s&4194240)===s)break;for(e=t.eventTimes,r=-1;0<s;){var o=31-sn(s);i=1<<o,o=e[o],o>r&&(r=o),s&=~i}if(s=r,s=je()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*XS(s/1960))-s,10<s){t.timeoutHandle=ou(Ts.bind(null,t,_t,gn),s);break}Ts(t,_t,gn);break;case 5:Ts(t,_t,gn);break;default:throw Error(I(329))}}}return Et(t,je()),t.callbackNode===n?mv.bind(null,t):null}function Nu(t,e){var n=Pi;return t.current.memoizedState.isDehydrated&&(Ms(t,e).flags|=256),t=Wa(t,e),t!==2&&(e=_t,_t=n,e!==null&&Tu(e)),t}function Tu(t){_t===null?_t=t:_t.push.apply(_t,t)}function JS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var r=n[s],i=r.getSnapshot;r=r.value;try{if(!an(i(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Hn(t,e){for(e&=~Od,e&=~kl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-sn(e),s=1<<n;t[n]=-1,e&=~s}}function Gf(t){if(oe&6)throw Error(I(327));Cr();var e=xa(t,0);if(!(e&1))return Et(t,je()),null;var n=Wa(t,e);if(t.tag!==0&&n===2){var s=Jc(t);s!==0&&(e=s,n=Nu(t,s))}if(n===1)throw n=ro,Ms(t,0),Hn(t,e),Et(t,je()),n;if(n===6)throw Error(I(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ts(t,_t,gn),Et(t,je()),null}function Md(t,e){var n=oe;oe|=1;try{return t(e)}finally{oe=n,oe===0&&(Mr=je()+500,_l&&_s())}}function Bs(t){Qn!==null&&Qn.tag===0&&!(oe&6)&&Cr();var e=oe;oe|=1;var n=Vt.transition,s=ce;try{if(Vt.transition=null,ce=1,t)return t()}finally{ce=s,Vt.transition=n,oe=e,!(oe&6)&&_s()}}function Fd(){Tt=vr.current,Se(vr)}function Ms(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,IS(n)),Le!==null)for(n=Le.return;n!==null;){var s=n;switch(_d(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Ia();break;case 3:Or(),Se(kt),Se(ot),Td();break;case 5:Nd(s);break;case 4:Or();break;case 13:Se(Ne);break;case 19:Se(Ne);break;case 10:kd(s.type._context);break;case 22:case 23:Fd()}n=n.return}if(Ke=t,Le=t=is(t.current,null),Je=Tt=e,We=0,ro=null,Od=kl=$s=0,_t=Pi=null,As!==null){for(e=0;e<As.length;e++)if(n=As[e],s=n.interleaved,s!==null){n.interleaved=null;var r=s.next,i=n.pending;if(i!==null){var o=i.next;i.next=r,s.next=o}n.pending=s}As=null}return t}function gv(t,e){do{var n=Le;try{if(Sd(),la.current=Ma,La){for(var s=Te.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}La=!1}if(zs=0,Ge=Fe=Te=null,Ii=!1,to=0,Dd.current=null,n===null||n.return===null){We=1,ro=e,Le=null;break}e:{var i=t,o=n.return,l=n,c=e;if(e=Je,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=l,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var _=jf(o);if(_!==null){_.flags&=-257,Df(_,o,l,i,e),_.mode&1&&Af(i,u,e),e=_,c=u;var v=e.updateQueue;if(v===null){var S=new Set;S.add(c),e.updateQueue=S}else v.add(c);break e}else{if(!(e&1)){Af(i,u,e),Ud();break e}c=Error(I(426))}}else if(xe&&l.mode&1){var w=jf(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Df(w,o,l,i,e),yd(Lr(c,l));break e}}i=c=Lr(c,l),We!==4&&(We=2),Pi===null?Pi=[i]:Pi.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var m=Zg(i,c,e);Nf(i,m);break e;case 1:l=c;var p=i.type,g=i.stateNode;if(!(i.flags&128)&&(typeof p.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(ss===null||!ss.has(g)))){i.flags|=65536,e&=-e,i.lanes|=e;var k=ev(i,l,e);Nf(i,k);break e}}i=i.return}while(i!==null)}yv(n)}catch(C){e=C,Le===n&&n!==null&&(Le=n=n.return);continue}break}while(!0)}function vv(){var t=Fa.current;return Fa.current=Ma,t===null?Ma:t}function Ud(){(We===0||We===3||We===2)&&(We=4),Ke===null||!($s&268435455)&&!(kl&268435455)||Hn(Ke,Je)}function Wa(t,e){var n=oe;oe|=2;var s=vv();(Ke!==t||Je!==e)&&(gn=null,Ms(t,e));do try{ZS();break}catch(r){gv(t,r)}while(!0);if(Sd(),oe=n,Fa.current=s,Le!==null)throw Error(I(261));return Ke=null,Je=0,We}function ZS(){for(;Le!==null;)_v(Le)}function ek(){for(;Le!==null&&!Cw();)_v(Le)}function _v(t){var e=Sv(t.alternate,t,Tt);t.memoizedProps=t.pendingProps,e===null?yv(t):Le=e,Dd.current=null}function yv(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=qS(n,e),n!==null){n.flags&=32767,Le=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{We=6,Le=null;return}}else if(n=GS(n,e,Tt),n!==null){Le=n;return}if(e=e.sibling,e!==null){Le=e;return}Le=e=t}while(e!==null);We===0&&(We=5)}function Ts(t,e,n){var s=ce,r=Vt.transition;try{Vt.transition=null,ce=1,tk(t,e,n,s)}finally{Vt.transition=r,ce=s}return null}function tk(t,e,n,s){do Cr();while(Qn!==null);if(oe&6)throw Error(I(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(I(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Ow(t,i),t===Ke&&(Le=Ke=null,Je=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Qo||(Qo=!0,kv(ka,function(){return Cr(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Vt.transition,Vt.transition=null;var o=ce;ce=1;var l=oe;oe|=4,Dd.current=null,YS(t,n),fv(n,t),SS(ru),Ea=!!su,ru=su=null,t.current=n,QS(n),Nw(),oe=l,ce=o,Vt.transition=i}else t.current=n;if(Qo&&(Qo=!1,Qn=t,Va=r),i=t.pendingLanes,i===0&&(ss=null),bw(n.stateNode),Et(t,je()),e!==null)for(s=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],s(r.value,{componentStack:r.stack,digest:r.digest});if(Ua)throw Ua=!1,t=Eu,Eu=null,t;return Va&1&&t.tag!==0&&Cr(),i=t.pendingLanes,i&1?t===Cu?Ri++:(Ri=0,Cu=t):Ri=0,_s(),null}function Cr(){if(Qn!==null){var t=Zm(Va),e=Vt.transition,n=ce;try{if(Vt.transition=null,ce=16>t?16:t,Qn===null)var s=!1;else{if(t=Qn,Qn=null,Va=0,oe&6)throw Error(I(331));var r=oe;for(oe|=4,M=t.current;M!==null;){var i=M,o=i.child;if(M.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(M=u;M!==null;){var h=M;switch(h.tag){case 0:case 11:case 15:bi(8,h,i)}var f=h.child;if(f!==null)f.return=h,M=f;else for(;M!==null;){h=M;var d=h.sibling,_=h.return;if(uv(h),h===u){M=null;break}if(d!==null){d.return=_,M=d;break}M=_}}}var v=i.alternate;if(v!==null){var S=v.child;if(S!==null){v.child=null;do{var w=S.sibling;S.sibling=null,S=w}while(S!==null)}}M=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,M=o;else e:for(;M!==null;){if(i=M,i.flags&2048)switch(i.tag){case 0:case 11:case 15:bi(9,i,i.return)}var m=i.sibling;if(m!==null){m.return=i.return,M=m;break e}M=i.return}}var p=t.current;for(M=p;M!==null;){o=M;var g=o.child;if(o.subtreeFlags&2064&&g!==null)g.return=o,M=g;else e:for(o=p;M!==null;){if(l=M,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Sl(9,l)}}catch(C){Pe(l,l.return,C)}if(l===o){M=null;break e}var k=l.sibling;if(k!==null){k.return=l.return,M=k;break e}M=l.return}}if(oe=r,_s(),hn&&typeof hn.onPostCommitFiberRoot=="function")try{hn.onPostCommitFiberRoot(fl,t)}catch{}s=!0}return s}finally{ce=n,Vt.transition=e}}return!1}function qf(t,e,n){e=Lr(n,e),e=Zg(t,e,1),t=ns(t,e,1),e=dt(),t!==null&&(yo(t,1,e),Et(t,e))}function Pe(t,e,n){if(t.tag===3)qf(t,t,n);else for(;e!==null;){if(e.tag===3){qf(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(ss===null||!ss.has(s))){t=Lr(n,t),t=ev(e,t,1),e=ns(e,t,1),t=dt(),e!==null&&(yo(e,1,t),Et(e,t));break}}e=e.return}}function nk(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),e=dt(),t.pingedLanes|=t.suspendedLanes&n,Ke===t&&(Je&n)===n&&(We===4||We===3&&(Je&130023424)===Je&&500>je()-Ld?Ms(t,0):Od|=n),Et(t,e)}function wv(t,e){e===0&&(t.mode&1?(e=Vo,Vo<<=1,!(Vo&130023424)&&(Vo=4194304)):e=1);var n=dt();t=In(t,e),t!==null&&(yo(t,e,n),Et(t,n))}function sk(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),wv(t,n)}function rk(t,e){var n=0;switch(t.tag){case 13:var s=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(I(314))}s!==null&&s.delete(e),wv(t,n)}var Sv;Sv=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||kt.current)wt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return wt=!1,HS(t,e,n);wt=!!(t.flags&131072)}else wt=!1,xe&&e.flags&1048576&&Cg(e,Ra,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;ua(t,e),t=e.pendingProps;var r=Ar(e,ot.current);Er(e,n),r=bd(null,e,s,t,r,n);var i=Pd();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,xt(s)?(i=!0,ba(e)):i=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Ed(e),r.updater=wl,e.stateNode=r,r._reactInternals=e,fu(e,s,t,n),e=gu(null,e,s,!0,i,n)):(e.tag=0,xe&&i&&vd(e),lt(null,e,r,n),e=e.child),e;case 16:s=e.elementType;e:{switch(ua(t,e),t=e.pendingProps,r=s._init,s=r(s._payload),e.type=s,r=e.tag=ok(s),t=Xt(s,t),r){case 0:e=mu(null,e,s,t,n);break e;case 1:e=Mf(null,e,s,t,n);break e;case 11:e=Of(null,e,s,t,n);break e;case 14:e=Lf(null,e,s,Xt(s.type,t),n);break e}throw Error(I(306,s,""))}return e;case 0:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Xt(s,r),mu(t,e,s,r,n);case 1:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Xt(s,r),Mf(t,e,s,r,n);case 3:e:{if(rv(e),t===null)throw Error(I(387));s=e.pendingProps,i=e.memoizedState,r=i.element,Rg(t,e),Da(e,s,null,n);var o=e.memoizedState;if(s=o.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){r=Lr(Error(I(423)),e),e=Ff(t,e,s,n,r);break e}else if(s!==r){r=Lr(Error(I(424)),e),e=Ff(t,e,s,n,r);break e}else for(It=ts(e.stateNode.containerInfo.firstChild),bt=e,xe=!0,Zt=null,n=bg(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(jr(),s===r){e=bn(t,e,n);break e}lt(t,e,s,n)}e=e.child}return e;case 5:return Ag(e),t===null&&uu(e),s=e.type,r=e.pendingProps,i=t!==null?t.memoizedProps:null,o=r.children,iu(s,r)?o=null:i!==null&&iu(s,i)&&(e.flags|=32),sv(t,e),lt(t,e,o,n),e.child;case 6:return t===null&&uu(e),null;case 13:return iv(t,e,n);case 4:return Cd(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=Dr(e,null,s,n):lt(t,e,s,n),e.child;case 11:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Xt(s,r),Of(t,e,s,r,n);case 7:return lt(t,e,e.pendingProps,n),e.child;case 8:return lt(t,e,e.pendingProps.children,n),e.child;case 12:return lt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(s=e.type._context,r=e.pendingProps,i=e.memoizedProps,o=r.value,ge(Aa,s._currentValue),s._currentValue=o,i!==null)if(an(i.value,o)){if(i.children===r.children&&!kt.current){e=bn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===s){if(i.tag===1){c=En(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),du(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(I(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),du(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}lt(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,s=e.pendingProps.children,Er(e,n),r=Wt(r),s=s(r),e.flags|=1,lt(t,e,s,n),e.child;case 14:return s=e.type,r=Xt(s,e.pendingProps),r=Xt(s.type,r),Lf(t,e,s,r,n);case 15:return tv(t,e,e.type,e.pendingProps,n);case 17:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Xt(s,r),ua(t,e),e.tag=1,xt(s)?(t=!0,ba(e)):t=!1,Er(e,n),Jg(e,s,r),fu(e,s,r,n),gu(null,e,s,!0,t,n);case 19:return ov(t,e,n);case 22:return nv(t,e,n)}throw Error(I(156,e.tag))};function kv(t,e){return Ym(t,e)}function ik(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ft(t,e,n,s){return new ik(t,e,n,s)}function Vd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ok(t){if(typeof t=="function")return Vd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===id)return 11;if(t===od)return 14}return 2}function is(t,e){var n=t.alternate;return n===null?(n=Ft(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function fa(t,e,n,s,r,i){var o=2;if(s=t,typeof t=="function")Vd(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ar:return Fs(n.children,r,i,e);case rd:o=8,r|=8;break;case Mc:return t=Ft(12,n,e,r|2),t.elementType=Mc,t.lanes=i,t;case Fc:return t=Ft(13,n,e,r),t.elementType=Fc,t.lanes=i,t;case Uc:return t=Ft(19,n,e,r),t.elementType=Uc,t.lanes=i,t;case Am:return xl(n,r,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Pm:o=10;break e;case Rm:o=9;break e;case id:o=11;break e;case od:o=14;break e;case zn:o=16,s=null;break e}throw Error(I(130,t==null?t:typeof t,""))}return e=Ft(o,n,e,r),e.elementType=t,e.type=s,e.lanes=i,e}function Fs(t,e,n,s){return t=Ft(7,t,s,e),t.lanes=n,t}function xl(t,e,n,s){return t=Ft(22,t,s,e),t.elementType=Am,t.lanes=n,t.stateNode={isHidden:!1},t}function vc(t,e,n){return t=Ft(6,t,null,e),t.lanes=n,t}function _c(t,e,n){return e=Ft(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function ak(t,e,n,s,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Jl(0),this.expirationTimes=Jl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jl(0),this.identifierPrefix=s,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Wd(t,e,n,s,r,i,o,l,c){return t=new ak(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Ft(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ed(i),t}function lk(t,e,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:or,key:s==null?null:""+s,children:t,containerInfo:e,implementation:n}}function xv(t){if(!t)return hs;t=t._reactInternals;e:{if(Zs(t)!==t||t.tag!==1)throw Error(I(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(xt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(I(171))}if(t.tag===1){var n=t.type;if(xt(n))return xg(t,n,e)}return e}function Ev(t,e,n,s,r,i,o,l,c){return t=Wd(n,s,!0,t,r,i,o,l,c),t.context=xv(null),n=t.current,s=dt(),r=rs(n),i=En(s,r),i.callback=e??null,ns(n,i,r),t.current.lanes=r,yo(t,r,s),Et(t,s),t}function El(t,e,n,s){var r=e.current,i=dt(),o=rs(r);return n=xv(n),e.context===null?e.context=n:e.pendingContext=n,e=En(i,o),e.payload={element:t},s=s===void 0?null:s,s!==null&&(e.callback=s),t=ns(r,e,o),t!==null&&(rn(t,r,o,i),aa(t,r,o)),o}function za(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Kf(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function zd(t,e){Kf(t,e),(t=t.alternate)&&Kf(t,e)}function ck(){return null}var Cv=typeof reportError=="function"?reportError:function(t){console.error(t)};function $d(t){this._internalRoot=t}Cl.prototype.render=$d.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(I(409));El(t,e,null,null)};Cl.prototype.unmount=$d.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Bs(function(){El(null,t,null,null)}),e[Tn]=null}};function Cl(t){this._internalRoot=t}Cl.prototype.unstable_scheduleHydration=function(t){if(t){var e=ng();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Bn.length&&e!==0&&e<Bn[n].priority;n++);Bn.splice(n,0,t),n===0&&rg(t)}};function Bd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Nl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Yf(){}function uk(t,e,n,s,r){if(r){if(typeof s=="function"){var i=s;s=function(){var u=za(o);i.call(u)}}var o=Ev(e,s,t,0,null,!1,!1,"",Yf);return t._reactRootContainer=o,t[Tn]=o.current,Qi(t.nodeType===8?t.parentNode:t),Bs(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof s=="function"){var l=s;s=function(){var u=za(c);l.call(u)}}var c=Wd(t,0,!1,null,null,!1,!1,"",Yf);return t._reactRootContainer=c,t[Tn]=c.current,Qi(t.nodeType===8?t.parentNode:t),Bs(function(){El(e,c,n,s)}),c}function Tl(t,e,n,s,r){var i=n._reactRootContainer;if(i){var o=i;if(typeof r=="function"){var l=r;r=function(){var c=za(o);l.call(c)}}El(e,o,t,r)}else o=uk(n,e,t,r,s);return za(o)}eg=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=_i(e.pendingLanes);n!==0&&(cd(e,n|1),Et(e,je()),!(oe&6)&&(Mr=je()+500,_s()))}break;case 13:Bs(function(){var s=In(t,1);if(s!==null){var r=dt();rn(s,t,1,r)}}),zd(t,1)}};ud=function(t){if(t.tag===13){var e=In(t,134217728);if(e!==null){var n=dt();rn(e,t,134217728,n)}zd(t,134217728)}};tg=function(t){if(t.tag===13){var e=rs(t),n=In(t,e);if(n!==null){var s=dt();rn(n,t,e,s)}zd(t,e)}};ng=function(){return ce};sg=function(t,e){var n=ce;try{return ce=t,e()}finally{ce=n}};Yc=function(t,e,n){switch(e){case"input":if(zc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var r=vl(s);if(!r)throw Error(I(90));Dm(s),zc(s,r)}}}break;case"textarea":Lm(t,n);break;case"select":e=n.value,e!=null&&wr(t,!!n.multiple,e,!1)}};$m=Md;Bm=Bs;var dk={usingClientEntryPoint:!1,Events:[So,dr,vl,Wm,zm,Md]},ui={findFiberByHostInstance:Rs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},hk={bundleType:ui.bundleType,version:ui.version,rendererPackageName:ui.rendererPackageName,rendererConfig:ui.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:jn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=qm(t),t===null?null:t.stateNode},findFiberByHostInstance:ui.findFiberByHostInstance||ck,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xo.isDisabled&&Xo.supportsFiber)try{fl=Xo.inject(hk),hn=Xo}catch{}}Rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dk;Rt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Bd(e))throw Error(I(200));return lk(t,e,null,n)};Rt.createRoot=function(t,e){if(!Bd(t))throw Error(I(299));var n=!1,s="",r=Cv;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Wd(t,1,!1,null,null,n,!1,s,r),t[Tn]=e.current,Qi(t.nodeType===8?t.parentNode:t),new $d(e)};Rt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(I(188)):(t=Object.keys(t).join(","),Error(I(268,t)));return t=qm(e),t=t===null?null:t.stateNode,t};Rt.flushSync=function(t){return Bs(t)};Rt.hydrate=function(t,e,n){if(!Nl(e))throw Error(I(200));return Tl(null,t,e,!0,n)};Rt.hydrateRoot=function(t,e,n){if(!Bd(t))throw Error(I(405));var s=n!=null&&n.hydratedSources||null,r=!1,i="",o=Cv;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Ev(e,null,t,1,n??null,r,!1,i,o),t[Tn]=e.current,Qi(t),s)for(t=0;t<s.length;t++)n=s[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Cl(e)};Rt.render=function(t,e,n){if(!Nl(e))throw Error(I(200));return Tl(null,t,e,!1,n)};Rt.unmountComponentAtNode=function(t){if(!Nl(t))throw Error(I(40));return t._reactRootContainer?(Bs(function(){Tl(null,null,t,!1,function(){t._reactRootContainer=null,t[Tn]=null})}),!0):!1};Rt.unstable_batchedUpdates=Md;Rt.unstable_renderSubtreeIntoContainer=function(t,e,n,s){if(!Nl(n))throw Error(I(200));if(t==null||t._reactInternals===void 0)throw Error(I(38));return Tl(t,e,n,!1,s)};Rt.version="18.3.1-next-f1338f8080-20240426";function Nv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Nv)}catch(t){console.error(t)}}Nv(),Nm.exports=Rt;var fk=Nm.exports,Qf=fk;Oc.createRoot=Qf.createRoot,Oc.hydrateRoot=Qf.hydrateRoot;const pk=()=>{};var Xf={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tv={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P=function(t,e){if(!t)throw Kr(e)},Kr=function(t){return new Error("Firebase Database ("+Tv.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iv=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},mk=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],o=t[n++],l=t[n++],c=((r&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[s++]=String.fromCharCode(55296+(c>>10)),e[s++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Hd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],o=r+1<t.length,l=o?t[r+1]:0,c=r+2<t.length,u=c?t[r+2]:0,h=i>>2,f=(i&3)<<4|l>>4;let d=(l&15)<<2|u>>6,_=u&63;c||(_=64,o||(d=64)),s.push(n[h],n[f],n[d],n[_])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Iv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):mk(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],l=r<t.length?n[t.charAt(r)]:0;++r;const u=r<t.length?n[t.charAt(r)]:64;++r;const f=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||l==null||u==null||f==null)throw new gk;const d=i<<2|l>>4;if(s.push(d),u!==64){const _=l<<4&240|u>>2;if(s.push(_),f!==64){const v=u<<6&192|f;s.push(v)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class gk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const bv=function(t){const e=Iv(t);return Hd.encodeByteArray(e,!0)},$a=function(t){return bv(t).replace(/\./g,"")},Ba=function(t){try{return Hd.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vk(t){return Pv(void 0,t)}function Pv(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!_k(n)||(t[n]=Pv(t[n],e[n]));return t}function _k(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wk=()=>yk().__FIREBASE_DEFAULTS__,Sk=()=>{if(typeof process>"u"||typeof Xf>"u")return;const t=Xf.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},kk=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Ba(t[1]);return e&&JSON.parse(e)},Gd=()=>{try{return pk()||wk()||Sk()||kk()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Rv=t=>{var e,n;return(n=(e=Gd())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},xk=t=>{const e=Rv(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},Av=()=>{var t;return(t=Gd())==null?void 0:t.config},jv=t=>{var e;return(e=Gd())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yr(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Dv(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ek(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[$a(JSON.stringify(n)),$a(JSON.stringify(o)),""].join(".")}const Ai={};function Ck(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ai))Ai[e]?t.emulator.push(e):t.prod.push(e);return t}function Nk(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Jf=!1;function Ov(t,e){if(typeof window>"u"||typeof document>"u"||!Yr(window.location.host)||Ai[t]===e||Ai[t]||Jf)return;Ai[t]=e;function n(d){return`__firebase__banner__${d}`}const s="__firebase__banner",i=Ck().prod.length>0;function o(){const d=document.getElementById(s);d&&d.remove()}function l(d){d.style.display="flex",d.style.background="#7faaf0",d.style.position="fixed",d.style.bottom="5px",d.style.left="5px",d.style.padding=".5em",d.style.borderRadius="5px",d.style.alignItems="center"}function c(d,_){d.setAttribute("width","24"),d.setAttribute("id",_),d.setAttribute("height","24"),d.setAttribute("viewBox","0 0 24 24"),d.setAttribute("fill","none"),d.style.marginLeft="-6px"}function u(){const d=document.createElement("span");return d.style.cursor="pointer",d.style.marginLeft="16px",d.style.fontSize="24px",d.innerHTML=" &times;",d.onclick=()=>{Jf=!0,o()},d}function h(d,_){d.setAttribute("id",_),d.innerText="Learn more",d.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",d.setAttribute("target","__blank"),d.style.paddingLeft="5px",d.style.textDecoration="underline"}function f(){const d=Nk(s),_=n("text"),v=document.getElementById(_)||document.createElement("span"),S=n("learnmore"),w=document.getElementById(S)||document.createElement("a"),m=n("preprendIcon"),p=document.getElementById(m)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(d.created){const g=d.element;l(g),h(w,S);const k=u();c(p,m),g.append(p,v,w,k),document.body.appendChild(g)}i?(v.innerText="Preview backend disconnected.",p.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(p.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,v.innerText="Preview backend running in this workspace."),v.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ft(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qd(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ft())}function Tk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Ik(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Lv(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function bk(){const t=ft();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Pk(){return Tv.NODE_ADMIN===!0}function Rk(){try{return typeof indexedDB=="object"}catch{return!1}}function Ak(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var i;e(((i=r.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jk="FirebaseError";class ys extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=jk,Object.setPrototypeOf(this,ys.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Eo.prototype.create)}}class Eo{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?Dk(i,s):"Error",l=`${this.serviceName}: ${o} (${r}).`;return new ys(r,l,s)}}function Dk(t,e){return t.replace(Ok,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const Ok=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function io(t){return JSON.parse(t)}function Ve(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mv=function(t){let e={},n={},s={},r="";try{const i=t.split(".");e=io(Ba(i[0])||""),n=io(Ba(i[1])||""),r=i[2],s=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:s,signature:r}},Lk=function(t){const e=Mv(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},Mk=function(t){const e=Mv(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Fr(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Iu(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ha(t,e,n){const s={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=e.call(n,t[r],r,t));return s}function Hs(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],o=e[r];if(Zf(i)&&Zf(o)){if(!Hs(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function Zf(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function wi(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[r,i]=s.split("=");e[decodeURIComponent(r)]=decodeURIComponent(i)}}),e}function Si(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const s=this.W_;if(typeof e=="string")for(let f=0;f<16;f++)s[f]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let f=0;f<16;f++)s[f]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let f=16;f<80;f++){const d=s[f-3]^s[f-8]^s[f-14]^s[f-16];s[f]=(d<<1|d>>>31)&4294967295}let r=this.chain_[0],i=this.chain_[1],o=this.chain_[2],l=this.chain_[3],c=this.chain_[4],u,h;for(let f=0;f<80;f++){f<40?f<20?(u=l^i&(o^l),h=1518500249):(u=i^o^l,h=1859775393):f<60?(u=i&o|l&(i|o),h=2400959708):(u=i^o^l,h=3395469782);const d=(r<<5|r>>>27)+u+c+h+s[f]&4294967295;c=l,l=o,o=(i<<30|i>>>2)&4294967295,i=r,r=d}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const s=n-this.blockSize;let r=0;const i=this.buf_;let o=this.inbuf_;for(;r<n;){if(o===0)for(;r<=s;)this.compress_(e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<n;)if(i[o]=e.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<n;)if(i[o]=e[r],++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=n&255,n/=256;this.compress_(this.buf_);let s=0;for(let r=0;r<5;r++)for(let i=24;i>=0;i-=8)e[s]=this.chain_[r]>>i&255,++s;return e}}function Uk(t,e){const n=new Vk(t,e);return n.subscribe.bind(n)}class Vk{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let r;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");Wk(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:s},r.next===void 0&&(r.next=yc),r.error===void 0&&(r.error=yc),r.complete===void 0&&(r.complete=yc);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Wk(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function yc(){}function Il(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zk=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);if(r>=55296&&r<=56319){const i=r-55296;s++,P(s<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(s)-56320;r=65536+(i<<10)+o}r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):r<65536?(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},bl=function(t){let e=0;for(let n=0;n<t.length;n++){const s=t.charCodeAt(n);s<128?e++:s<2048?e+=2:s>=55296&&s<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nt(t){return t&&t._delegate?t._delegate:t}class Gs{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new xo;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Hk(e))try{this.getOrInitializeService({instanceIdentifier:Is})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=Is){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Is){return this.instances.has(e)}getOptions(e=Is){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);s===l&&o.resolve(r)}return r}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(s)??new Set;r.add(e),this.onInitCallbacks.set(s,r);const i=this.instances.get(s);return i&&e(i,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Bk(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Is){return this.component?this.component.multipleInstances?e:Is:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Bk(t){return t===Is?void 0:t}function Hk(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new $k(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ue;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ue||(ue={}));const qk={debug:ue.DEBUG,verbose:ue.VERBOSE,info:ue.INFO,warn:ue.WARN,error:ue.ERROR,silent:ue.SILENT},Kk=ue.INFO,Yk={[ue.DEBUG]:"log",[ue.VERBOSE]:"log",[ue.INFO]:"info",[ue.WARN]:"warn",[ue.ERROR]:"error"},Qk=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=Yk[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Kd{constructor(e){this.name=e,this._logLevel=Kk,this._logHandler=Qk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?qk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ue.DEBUG,...e),this._logHandler(this,ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ue.VERBOSE,...e),this._logHandler(this,ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ue.INFO,...e),this._logHandler(this,ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ue.WARN,...e),this._logHandler(this,ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ue.ERROR,...e),this._logHandler(this,ue.ERROR,...e)}}const Xk=(t,e)=>e.some(n=>t instanceof n);let ep,tp;function Jk(){return ep||(ep=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Zk(){return tp||(tp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Fv=new WeakMap,bu=new WeakMap,Uv=new WeakMap,wc=new WeakMap,Yd=new WeakMap;function ex(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(os(t.result)),r()},o=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Fv.set(n,t)}).catch(()=>{}),Yd.set(e,t),e}function tx(t){if(bu.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),r()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});bu.set(t,e)}let Pu={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return bu.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Uv.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return os(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function nx(t){Pu=t(Pu)}function sx(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(Sc(this),e,...n);return Uv.set(s,e.sort?e.sort():[e]),os(s)}:Zk().includes(t)?function(...e){return t.apply(Sc(this),e),os(Fv.get(this))}:function(...e){return os(t.apply(Sc(this),e))}}function rx(t){return typeof t=="function"?sx(t):(t instanceof IDBTransaction&&tx(t),Xk(t,Jk())?new Proxy(t,Pu):t)}function os(t){if(t instanceof IDBRequest)return ex(t);if(wc.has(t))return wc.get(t);const e=rx(t);return e!==t&&(wc.set(t,e),Yd.set(e,t)),e}const Sc=t=>Yd.get(t);function ix(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(t,e),l=os(o);return s&&o.addEventListener("upgradeneeded",c=>{s(os(o.result),c.oldVersion,c.newVersion,os(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),r&&c.addEventListener("versionchange",u=>r(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const ox=["get","getKey","getAll","getAllKeys","count"],ax=["put","add","delete","clear"],kc=new Map;function np(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(kc.get(e))return kc.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=ax.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||ox.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,r?"readwrite":"readonly");let u=c.store;return s&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),r&&c.done]))[0]};return kc.set(e,i),i}nx(t=>({...t,get:(e,n,s)=>np(e,n)||t.get(e,n,s),has:(e,n)=>!!np(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(cx(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function cx(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ru="@firebase/app",sp="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pn=new Kd("@firebase/app"),ux="@firebase/app-compat",dx="@firebase/analytics-compat",hx="@firebase/analytics",fx="@firebase/app-check-compat",px="@firebase/app-check",mx="@firebase/auth",gx="@firebase/auth-compat",vx="@firebase/database",_x="@firebase/data-connect",yx="@firebase/database-compat",wx="@firebase/functions",Sx="@firebase/functions-compat",kx="@firebase/installations",xx="@firebase/installations-compat",Ex="@firebase/messaging",Cx="@firebase/messaging-compat",Nx="@firebase/performance",Tx="@firebase/performance-compat",Ix="@firebase/remote-config",bx="@firebase/remote-config-compat",Px="@firebase/storage",Rx="@firebase/storage-compat",Ax="@firebase/firestore",jx="@firebase/ai",Dx="@firebase/firestore-compat",Ox="firebase",Lx="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Au="[DEFAULT]",Mx={[Ru]:"fire-core",[ux]:"fire-core-compat",[hx]:"fire-analytics",[dx]:"fire-analytics-compat",[px]:"fire-app-check",[fx]:"fire-app-check-compat",[mx]:"fire-auth",[gx]:"fire-auth-compat",[vx]:"fire-rtdb",[_x]:"fire-data-connect",[yx]:"fire-rtdb-compat",[wx]:"fire-fn",[Sx]:"fire-fn-compat",[kx]:"fire-iid",[xx]:"fire-iid-compat",[Ex]:"fire-fcm",[Cx]:"fire-fcm-compat",[Nx]:"fire-perf",[Tx]:"fire-perf-compat",[Ix]:"fire-rc",[bx]:"fire-rc-compat",[Px]:"fire-gcs",[Rx]:"fire-gcs-compat",[Ax]:"fire-fst",[Dx]:"fire-fst-compat",[jx]:"fire-vertex","fire-js":"fire-js",[Ox]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ga=new Map,Fx=new Map,ju=new Map;function rp(t,e){try{t.container.addComponent(e)}catch(n){Pn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ur(t){const e=t.name;if(ju.has(e))return Pn.debug(`There were multiple attempts to register component ${e}.`),!1;ju.set(e,t);for(const n of Ga.values())rp(n,t);for(const n of Fx.values())rp(n,t);return!0}function Qd(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function yt(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},as=new Eo("app","Firebase",Ux);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Gs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw as.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qr=Lx;function Vv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:Au,automaticDataCollectionEnabled:!0,...e},r=s.name;if(typeof r!="string"||!r)throw as.create("bad-app-name",{appName:String(r)});if(n||(n=Av()),!n)throw as.create("no-options");const i=Ga.get(r);if(i){if(Hs(n,i.options)&&Hs(s,i.config))return i;throw as.create("duplicate-app",{appName:r})}const o=new Gk(r);for(const c of ju.values())o.addComponent(c);const l=new Vx(n,s,o);return Ga.set(r,l),l}function Wv(t=Au){const e=Ga.get(t);if(!e&&t===Au&&Av())return Vv();if(!e)throw as.create("no-app",{appName:t});return e}function ls(t,e,n){let s=Mx[t]??t;n&&(s+=`-${n}`);const r=s.match(/\s|\//),i=e.match(/\s|\//);if(r||i){const o=[`Unable to register library "${s}" with version "${e}":`];r&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Pn.warn(o.join(" "));return}Ur(new Gs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wx="firebase-heartbeat-database",zx=1,oo="firebase-heartbeat-store";let xc=null;function zv(){return xc||(xc=ix(Wx,zx,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(oo)}catch(n){console.warn(n)}}}}).catch(t=>{throw as.create("idb-open",{originalErrorMessage:t.message})})),xc}async function $x(t){try{const n=(await zv()).transaction(oo),s=await n.objectStore(oo).get($v(t));return await n.done,s}catch(e){if(e instanceof ys)Pn.warn(e.message);else{const n=as.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Pn.warn(n.message)}}}async function ip(t,e){try{const s=(await zv()).transaction(oo,"readwrite");await s.objectStore(oo).put(e,$v(t)),await s.done}catch(n){if(n instanceof ys)Pn.warn(n.message);else{const s=as.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Pn.warn(s.message)}}}function $v(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx=1024,Hx=30;class Gx{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Kx(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=op();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:r}),this._heartbeatsCache.heartbeats.length>Hx){const o=Yx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Pn.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=op(),{heartbeatsToSend:s,unsentEntries:r}=qx(this._heartbeatsCache.heartbeats),i=$a(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Pn.warn(n),""}}}function op(){return new Date().toISOString().substring(0,10)}function qx(t,e=Bx){const n=[];let s=t.slice();for(const r of t){const i=n.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),ap(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),ap(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class Kx{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Rk()?Ak().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await $x(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return ip(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return ip(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function ap(t){return $a(JSON.stringify({version:2,heartbeats:t})).length}function Yx(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qx(t){Ur(new Gs("platform-logger",e=>new lx(e),"PRIVATE")),Ur(new Gs("heartbeat",e=>new Gx(e),"PRIVATE")),ls(Ru,sp,t),ls(Ru,sp,"esm2020"),ls("fire-js","")}Qx("");function Bv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Xx=Bv,Hv=new Eo("auth","Firebase",Bv());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qa=new Kd("@firebase/auth");function Jx(t,...e){qa.logLevel<=ue.WARN&&qa.warn(`Auth (${Qr}): ${t}`,...e)}function pa(t,...e){qa.logLevel<=ue.ERROR&&qa.error(`Auth (${Qr}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $t(t,...e){throw Jd(t,...e)}function Ct(t,...e){return Jd(t,...e)}function Xd(t,e,n){const s={...Xx(),[e]:n};return new Eo("auth","Firebase",s).create(e,{appName:t.name})}function pn(t){return Xd(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Zx(t,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&$t(t,"argument-error"),Xd(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Jd(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return Hv.create(t,...e)}function O(t,e,...n){if(!t)throw Jd(e,...n)}function Sn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw pa(e),new Error(e)}function Rn(t,e){t||Sn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Du(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function Gv(){return lp()==="http:"||lp()==="https:"}function lp(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eE(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Gv()||Ik()||"connection"in navigator)?navigator.onLine:!0}function tE(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e,n){this.shortDelay=e,this.longDelay=n,Rn(n>e,"Short delay should be less than long delay!"),this.isMobile=qd()||Lv()}get(){return eE()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zd(t,e){Rn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Sn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Sn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Sn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],rE=new Co(3e4,6e4);function gt(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function jt(t,e,n,s,r={}){return Kv(t,r,async()=>{let i={},o={};s&&(e==="GET"?o=s:i={body:JSON.stringify(s)});const l=er({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...i};return Tk()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Yr(t.emulatorConfig.host)&&(u.credentials="include"),qv.fetch()(await Yv(t,t.config.apiHost,n,l),u)})}async function Kv(t,e,n){t._canInitEmulator=!1;const s={...nE,...e};try{const r=new oE(t),i=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw ki(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw ki(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw ki(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw ki(t,"user-disabled",o);const h=s[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Xd(t,h,u);$t(t,h)}}catch(r){if(r instanceof ys)throw r;$t(t,"network-request-failed",{message:String(r)})}}async function ws(t,e,n,s,r={}){const i=await jt(t,e,n,s,r);return"mfaPendingCredential"in i&&$t(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function Yv(t,e,n,s){const r=`${e}${n}?${s}`,i=t,o=i.config.emulator?Zd(t.config,r):`${t.config.apiScheme}://${r}`;return sE.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function iE(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class oE{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Ct(this.auth,"network-request-failed")),rE.get())})}}function ki(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=Ct(t,e,s);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cp(t){return t!==void 0&&t.getResponse!==void 0}function up(t){return t!==void 0&&t.enterprise!==void 0}class Qv{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return iE(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aE(t){return(await jt(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function Xv(t,e){return jt(t,"GET","/v2/recaptchaConfig",gt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lE(t,e){return jt(t,"POST","/v1/accounts:delete",e)}async function Ka(t,e){return jt(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ji(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function cE(t,e=!1){const n=Nt(t),s=await n.getIdToken(e),r=eh(s);O(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:r,token:s,authTime:ji(Ec(r.auth_time)),issuedAtTime:ji(Ec(r.iat)),expirationTime:ji(Ec(r.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Ec(t){return Number(t)*1e3}function eh(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return pa("JWT malformed, contained fewer than 3 sections"),null;try{const r=Ba(n);return r?JSON.parse(r):(pa("Failed to decode base64 JWT payload"),null)}catch(r){return pa("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function dp(t){const e=eh(t);return O(e,"internal-error"),O(typeof e.exp<"u","internal-error"),O(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ao(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof ys&&uE(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function uE({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ji(this.lastLoginAt),this.creationTime=ji(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ya(t){var f;const e=t.auth,n=await t.getIdToken(),s=await ao(t,Ka(e,{idToken:n}));O(s==null?void 0:s.users.length,e,"internal-error");const r=s.users[0];t._notifyReloadListener(r);const i=(f=r.providerUserInfo)!=null&&f.length?Jv(r.providerUserInfo):[],o=fE(t.providerData,i),l=t.isAnonymous,c=!(t.email&&r.passwordHash)&&!(o!=null&&o.length),u=l?c:!1,h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new Ou(r.createdAt,r.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function hE(t){const e=Nt(t);await Ya(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function fE(t,e){return[...t.filter(s=>!e.some(r=>r.providerId===s.providerId)),...e]}function Jv(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pE(t,e){const n=await Kv(t,{},async()=>{const s=er({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=t.config,o=await Yv(t,r,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:s};return t.emulatorConfig&&Yr(t.emulatorConfig.host)&&(c.credentials="include"),qv.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function mE(t,e){return jt(t,"POST","/v2/accounts:revokeToken",gt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){O(e.idToken,"internal-error"),O(typeof e.idToken<"u","internal-error"),O(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):dp(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){O(e.length!==0,"internal-error");const n=dp(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(O(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:r,expiresIn:i}=await pE(e,n);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:r,expirationTime:i}=n,o=new Nr;return s&&(O(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),r&&(O(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),i&&(O(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Nr,this.toJSON())}_performRefresh(){return Sn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wn(t,e){O(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class tn{constructor({uid:e,auth:n,stsTokenManager:s,...r}){this.providerId="firebase",this.proactiveRefresh=new dE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Ou(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await ao(this,this.stsTokenManager.getToken(this.auth,e));return O(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return cE(this,e)}reload(){return hE(this)}_assign(e){this!==e&&(O(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new tn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){O(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Ya(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(yt(this.auth.app))return Promise.reject(pn(this.auth));const e=await this.getIdToken();return await ao(this,lE(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,r=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:f,emailVerified:d,isAnonymous:_,providerData:v,stsTokenManager:S}=n;O(f&&S,e,"internal-error");const w=Nr.fromJSON(this.name,S);O(typeof f=="string",e,"internal-error"),Wn(s,e.name),Wn(r,e.name),O(typeof d=="boolean",e,"internal-error"),O(typeof _=="boolean",e,"internal-error"),Wn(i,e.name),Wn(o,e.name),Wn(l,e.name),Wn(c,e.name),Wn(u,e.name),Wn(h,e.name);const m=new tn({uid:f,auth:e,email:r,emailVerified:d,displayName:s,isAnonymous:_,photoURL:o,phoneNumber:i,tenantId:l,stsTokenManager:w,createdAt:u,lastLoginAt:h});return v&&Array.isArray(v)&&(m.providerData=v.map(p=>({...p}))),c&&(m._redirectEventId=c),m}static async _fromIdTokenResponse(e,n,s=!1){const r=new Nr;r.updateFromServerResponse(n);const i=new tn({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await Ya(i),i}static async _fromGetAccountInfoResponse(e,n,s){const r=n.users[0];O(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?Jv(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(i!=null&&i.length),l=new Nr;l.updateFromIdToken(s);const c=new tn({uid:r.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Ou(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hp=new Map;function kn(t){Rn(t instanceof Function,"Expected a class definition");let e=hp.get(t);return e?(Rn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,hp.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Zv.type="NONE";const fp=Zv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ma(t,e,n){return`firebase:${t}:${e}:${n}`}class Tr{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=ma(this.userKey,r.apiKey,i),this.fullPersistenceKey=ma("persistence",r.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Ka(this.auth,{idToken:e}).catch(()=>{});return n?tn._fromGetAccountInfoResponse(this.auth,n,e):null}return tn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Tr(kn(fp),e,s);const r=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=r[0]||kn(fp);const o=ma(s,e.config.apiKey,e.name);let l=null;for(const u of n)try{const h=await u._get(o);if(h){let f;if(typeof h=="string"){const d=await Ka(e,{idToken:h}).catch(()=>{});if(!d)break;f=await tn._fromGetAccountInfoResponse(e,d,h)}else f=tn._fromJSON(e,h);u!==i&&(l=f),i=u;break}}catch{}const c=r.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Tr(i,e,s):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new Tr(i,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pp(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(s_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(e_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(i_(e))return"Blackberry";if(o_(e))return"Webos";if(t_(e))return"Safari";if((e.includes("chrome/")||n_(e))&&!e.includes("edge/"))return"Chrome";if(r_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function e_(t=ft()){return/firefox\//i.test(t)}function t_(t=ft()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function n_(t=ft()){return/crios\//i.test(t)}function s_(t=ft()){return/iemobile/i.test(t)}function r_(t=ft()){return/android/i.test(t)}function i_(t=ft()){return/blackberry/i.test(t)}function o_(t=ft()){return/webos/i.test(t)}function th(t=ft()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function gE(t=ft()){var e;return th(t)&&!!((e=window.navigator)!=null&&e.standalone)}function vE(){return bk()&&document.documentMode===10}function a_(t=ft()){return th(t)||r_(t)||o_(t)||i_(t)||/windows phone/i.test(t)||s_(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l_(t,e=[]){let n;switch(t){case"Browser":n=pp(ft());break;case"Worker":n=`${pp(ft())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Qr}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});s.onAbort=n,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yE(t,e={}){return jt(t,"GET","/v2/passwordPolicy",gt(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE=6;class SE{constructor(e){var s;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??wE,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(e,n,s,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new mp(this),this.idTokenSubscription=new mp(this),this.beforeStateQueue=new _E(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Hv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=kn(n)),this._initializationPromise=this.queue(async()=>{var s,r,i;if(!this._deleted&&(this.persistenceManager=await Tr.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Ka(this,{idToken:e}),s=await tn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(yt(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,l=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(s=c.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return O(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ya(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=tE()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(yt(this.app))return Promise.reject(pn(this));const n=e?Nt(e):null;return n&&O(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&O(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return yt(this.app)?Promise.reject(pn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return yt(this.app)?Promise.reject(pn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(kn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await yE(this),n=new SE(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Eo("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await mE(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&kn(e)||this._popupRedirectResolver;O(n,this,"argument-error"),this.redirectPersistenceManager=await Tr.create(this,[kn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,r){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(O(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,s,r);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return O(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=l_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var n;if(yt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&Jx(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Ht(t){return Nt(t)}class mp{constructor(e){this.auth=e,this.observer=null,this.addObserver=Uk(n=>this.observer=n)}get next(){return O(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let No={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function xE(t){No=t}function nh(t){return No.loadJS(t)}function EE(){return No.recaptchaV2Script}function CE(){return No.recaptchaEnterpriseScript}function NE(){return No.gapiScript}function c_(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TE=500,IE=6e4,Jo=1e12;class bE{constructor(e){this.auth=e,this.counter=Jo,this._widgets=new Map}render(e,n){const s=this.counter;return this._widgets.set(s,new AE(e,this.auth.name,n||{})),this.counter++,s}reset(e){var s;const n=e||Jo;(s=this._widgets.get(n))==null||s.delete(),this._widgets.delete(n)}getResponse(e){var s;const n=e||Jo;return((s=this._widgets.get(n))==null?void 0:s.getResponse())||""}async execute(e){var s;const n=e||Jo;return(s=this._widgets.get(n))==null||s.execute(),""}}class PE{constructor(){this.enterprise=new RE}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class RE{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class AE{constructor(e,n,s){this.params=s,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r=typeof e=="string"?document.getElementById(e):e;O(r,"argument-error",{appName:n}),this.container=r,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=jE(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},IE)},TE))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function jE(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let s=0;s<t;s++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}const DE="recaptcha-enterprise",Di="NO_RECAPTCHA";class u_{constructor(e){this.type=DE,this.auth=Ht(e)}async verify(e="verify",n=!1){async function s(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{Xv(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new Qv(c);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(c=>{l(c)})})}function r(i,o,l){const c=window.grecaptcha;up(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(Di)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new PE().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{s(this.auth).then(l=>{if(!n&&up(window.grecaptcha))r(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=CE();c.length!==0&&(c+=l),nh(c).then(()=>{r(l,i,o)}).catch(u=>{o(u)})}}).catch(l=>{o(l)})})}}async function di(t,e,n,s=!1,r=!1){const i=new u_(t);let o;if(r)o=Di;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,u=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return s?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Us(t,e,n,s,r){var i,o;if(r==="EMAIL_PASSWORD_PROVIDER")if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await di(t,e,n,n==="getOobCode");return s(t,l)}else return s(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await di(t,e,n,n==="getOobCode");return s(t,c)}else return Promise.reject(l)});else if(r==="PHONE_PROVIDER")if((o=t._getRecaptchaConfig())!=null&&o.isProviderEnabled("PHONE_PROVIDER")){const l=await di(t,e,n);return s(t,l).catch(async c=>{var u;if(((u=t._getRecaptchaConfig())==null?void 0:u.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const h=await di(t,e,n,!1,!0);return s(t,h)}return Promise.reject(c)})}else{const l=await di(t,e,n,!1,!0);return s(t,l)}else return Promise.reject(r+" provider is not supported.")}async function OE(t){const e=Ht(t),n=await Xv(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),s=new Qv(n);e.tenantId==null?e._agentRecaptchaConfig=s:e._tenantRecaptchaConfigs[e.tenantId]=s,s.isAnyProviderEnabled()&&new u_(e).verify()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LE(t,e){const n=Qd(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),i=n.getOptions();if(Hs(i,e??{}))return r;$t(r,"already-initialized")}return n.initialize({options:e})}function ME(t,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(kn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function FE(t,e,n){const s=Ht(t);O(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!1,i=d_(e),{host:o,port:l}=UE(e),c=l===null?"":`:${l}`,u={url:`${i}//${o}${c}/`},h=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){O(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),O(Hs(u,s.config.emulator)&&Hs(h,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=u,s.emulatorConfig=h,s.settings.appVerificationDisabledForTesting=!0,Yr(o)?(Dv(`${i}//${o}${c}`),Ov("Auth",!0)):VE()}function d_(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function UE(t){const e=d_(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:gp(s.substr(i.length+1))}}else{const[i,o]=s.split(":");return{host:i,port:gp(o)}}}function gp(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function VE(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Sn("not implemented")}_getIdTokenResponse(e){return Sn("not implemented")}_linkToIdToken(e,n){return Sn("not implemented")}_getReauthenticationResolver(e){return Sn("not implemented")}}async function WE(t,e){return jt(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zE(t,e){return ws(t,"POST","/v1/accounts:signInWithPassword",gt(t,e))}async function $E(t,e){return jt(t,"POST","/v1/accounts:sendOobCode",gt(t,e))}async function BE(t,e){return $E(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HE(t,e){return ws(t,"POST","/v1/accounts:signInWithEmailLink",gt(t,e))}async function GE(t,e){return ws(t,"POST","/v1/accounts:signInWithEmailLink",gt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo extends Pl{constructor(e,n,s,r=null){super("password",s),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new lo(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new lo(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Us(e,n,"signInWithPassword",zE,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return HE(e,{email:this._email,oobCode:this._password});default:$t(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Us(e,s,"signUpPassword",WE,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return GE(e,{idToken:n,email:this._email,oobCode:this._password});default:$t(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ir(t,e){return ws(t,"POST","/v1/accounts:signInWithIdp",gt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qE="http://localhost";class qs extends Pl{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new qs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):$t("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r,...i}=n;if(!s||!r)return null;const o=new qs(s,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ir(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Ir(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ir(e,n)}buildRequest(){const e={requestUri:qE,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=er(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vp(t,e){return jt(t,"POST","/v1/accounts:sendVerificationCode",gt(t,e))}async function KE(t,e){return ws(t,"POST","/v1/accounts:signInWithPhoneNumber",gt(t,e))}async function YE(t,e){const n=await ws(t,"POST","/v1/accounts:signInWithPhoneNumber",gt(t,e));if(n.temporaryProof)throw ki(t,"account-exists-with-different-credential",n);return n}const QE={USER_NOT_FOUND:"user-not-found"};async function XE(t,e){const n={...e,operation:"REAUTH"};return ws(t,"POST","/v1/accounts:signInWithPhoneNumber",gt(t,n),QE)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi extends Pl{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new Oi({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Oi({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return KE(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return YE(e,{idToken:n,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return XE(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:s,verificationCode:r}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:s,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:s,phoneNumber:r,temporaryProof:i}=e;return!s&&!n&&!r&&!i?null:new Oi({verificationId:n,verificationCode:s,phoneNumber:r,temporaryProof:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JE(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function ZE(t){const e=wi(Si(t)).link,n=e?wi(Si(e)).deep_link_id:null,s=wi(Si(t)).deep_link_id;return(s?wi(Si(s)).link:null)||s||n||e||t}class sh{constructor(e){const n=wi(Si(e)),s=n.apiKey??null,r=n.oobCode??null,i=JE(n.mode??null);O(s&&r&&i,"argument-error"),this.apiKey=s,this.operation=i,this.code=r,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=ZE(e);try{return new sh(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(){this.providerId=Xr.PROVIDER_ID}static credential(e,n){return lo._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=sh.parseLink(n);return O(s,"argument-error"),lo._fromEmailAndCode(e,s.code,s.tenantId)}}Xr.PROVIDER_ID="password";Xr.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Xr.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To extends rh{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn extends To{constructor(){super("facebook.com")}static credential(e){return qs._fromParams({providerId:Gn.PROVIDER_ID,signInMethod:Gn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gn.credentialFromTaggedObject(e)}static credentialFromError(e){return Gn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gn.credential(e.oauthAccessToken)}catch{return null}}}Gn.FACEBOOK_SIGN_IN_METHOD="facebook.com";Gn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n extends To{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return qs._fromParams({providerId:_n.PROVIDER_ID,signInMethod:_n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return _n.credentialFromTaggedObject(e)}static credentialFromError(e){return _n.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return _n.credential(n,s)}catch{return null}}}_n.GOOGLE_SIGN_IN_METHOD="google.com";_n.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn extends To{constructor(){super("github.com")}static credential(e){return qs._fromParams({providerId:qn.PROVIDER_ID,signInMethod:qn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qn.credentialFromTaggedObject(e)}static credentialFromError(e){return qn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qn.credential(e.oauthAccessToken)}catch{return null}}}qn.GITHUB_SIGN_IN_METHOD="github.com";qn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn extends To{constructor(){super("twitter.com")}static credential(e,n){return qs._fromParams({providerId:Kn.PROVIDER_ID,signInMethod:Kn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Kn.credentialFromTaggedObject(e)}static credentialFromError(e){return Kn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Kn.credential(n,s)}catch{return null}}}Kn.TWITTER_SIGN_IN_METHOD="twitter.com";Kn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eC(t,e){return ws(t,"POST","/v1/accounts:signUp",gt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,r=!1){const i=await tn._fromIdTokenResponse(e,s,r),o=_p(s);return new Ks({user:i,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const r=_p(s);return new Ks({user:e,providerId:r,_tokenResponse:s,operationType:n})}}function _p(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa extends ys{constructor(e,n,s,r){super(n.code,n.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,Qa.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,r){return new Qa(e,n,s,r)}}function h_(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Qa._fromErrorAndOperation(t,i,e,s):i})}async function tC(t,e,n=!1){const s=await ao(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ks._forOperation(t,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nC(t,e,n=!1){const{auth:s}=t;if(yt(s.app))return Promise.reject(pn(s));const r="reauthenticate";try{const i=await ao(t,h_(s,r,e,t),n);O(i.idToken,s,"internal-error");const o=eh(i.idToken);O(o,s,"internal-error");const{sub:l}=o;return O(t.uid===l,s,"user-mismatch"),Ks._forOperation(t,r,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&$t(s,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f_(t,e,n=!1){if(yt(t.app))return Promise.reject(pn(t));const s="signIn",r=await h_(t,s,e),i=await Ks._fromIdTokenResponse(t,s,r);return n||await t._updateCurrentUser(i.user),i}async function p_(t,e){return f_(Ht(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m_(t){const e=Ht(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function sC(t,e,n){const s=Ht(t);await Us(s,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",BE,"EMAIL_PASSWORD_PROVIDER")}async function rC(t,e,n){if(yt(t.app))return Promise.reject(pn(t));const s=Ht(t),o=await Us(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",eC,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&m_(t),c}),l=await Ks._fromIdTokenResponse(s,"signIn",o);return await s._updateCurrentUser(l.user),l}function iC(t,e,n){return yt(t.app)?Promise.reject(pn(t)):p_(Nt(t),Xr.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&m_(t),s})}function oC(t,e,n,s){return Nt(t).onIdTokenChanged(e,n,s)}function aC(t,e,n){return Nt(t).beforeAuthStateChanged(e,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yp(t,e){return jt(t,"POST","/v2/accounts/mfaEnrollment:start",gt(t,e))}const Xa="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Xa,"1"),this.storage.removeItem(Xa),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC=1e3,cC=10;class v_ extends g_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=a_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),r=this.localCache[n];s!==r&&e(n,r,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const s=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},i=this.storage.getItem(s);vE()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,cC):r()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},lC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}v_.type="LOCAL";const uC=v_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __ extends g_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}__.type="SESSION";const y_=__;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dC(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const s=new Rl(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:r,data:i}=n.data,o=this.handlersMap[r];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const l=Array.from(o).map(async u=>u(n.origin,i)),c=await dC(l);n.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Rl.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ih(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const u=ih("",20);r.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},s);o={messageChannel:r,onMessage(f){const d=f;if(d.data.eventId===u)switch(d.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(d.data.response);break;default:clearTimeout(h),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oe(){return window}function fC(t){Oe().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oh(){return typeof Oe().WorkerGlobalScope<"u"&&typeof Oe().importScripts=="function"}async function pC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function mC(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function gC(){return oh()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w_="firebaseLocalStorageDb",vC=1,Ja="firebaseLocalStorage",S_="fbase_key";class Io{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Al(t,e){return t.transaction([Ja],e?"readwrite":"readonly").objectStore(Ja)}function _C(){const t=indexedDB.deleteDatabase(w_);return new Io(t).toPromise()}function Lu(){const t=indexedDB.open(w_,vC);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(Ja,{keyPath:S_})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(Ja)?e(s):(s.close(),await _C(),e(await Lu()))})})}async function wp(t,e,n){const s=Al(t,!0).put({[S_]:e,value:n});return new Io(s).toPromise()}async function yC(t,e){const n=Al(t,!1).get(e),s=await new Io(n).toPromise();return s===void 0?null:s.value}function Sp(t,e){const n=Al(t,!0).delete(e);return new Io(n).toPromise()}const wC=800,SC=3;class k_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Lu(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>SC)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return oh()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Rl._getInstance(gC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,s;if(this.activeServiceWorker=await pC(),!this.activeServiceWorker)return;this.sender=new hC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||mC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Lu();return await wp(e,Xa,"1"),await Sp(e,Xa),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>wp(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>yC(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Sp(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=Al(r,!1).getAll();return new Io(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),wC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}k_.type="LOCAL";const kC=k_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kp(t,e){return jt(t,"POST","/v2/accounts/mfaSignIn:start",gt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cc=c_("rcb"),xC=new Co(3e4,6e4);class EC{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!((e=Oe().grecaptcha)!=null&&e.render)}load(e,n=""){return O(CC(n),e,"argument-error"),this.shouldResolveImmediately(n)&&cp(Oe().grecaptcha)?Promise.resolve(Oe().grecaptcha):new Promise((s,r)=>{const i=Oe().setTimeout(()=>{r(Ct(e,"network-request-failed"))},xC.get());Oe()[Cc]=()=>{Oe().clearTimeout(i),delete Oe()[Cc];const l=Oe().grecaptcha;if(!l||!cp(l)){r(Ct(e,"internal-error"));return}const c=l.render;l.render=(u,h)=>{const f=c(u,h);return this.counter++,f},this.hostLanguage=n,s(l)};const o=`${EE()}?${er({onload:Cc,render:"explicit",hl:n})}`;nh(o).catch(()=>{clearTimeout(i),r(Ct(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!((n=Oe().grecaptcha)!=null&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function CC(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class NC{async load(e){return new bE(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Li="recaptcha",TC={theme:"light",type:"image"};class IC{constructor(e,n,s={...TC}){this.parameters=s,this.type=Li,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ht(e),this.isInvisible=this.parameters.size==="invisible",O(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const r=typeof n=="string"?document.getElementById(n):n;O(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new NC:new EC,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),s=n.getResponse(e);return s||new Promise(r=>{const i=o=>{o&&(this.tokenChangeListeners.delete(i),r(o))};this.tokenChangeListeners.add(i),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){O(!this.parameters.sitekey,this.auth,"argument-error"),O(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),O(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(s=>s(n)),typeof e=="function")e(n);else if(typeof e=="string"){const s=Oe()[e];typeof s=="function"&&s(n)}}}assertNotDestroyed(){O(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){O(Gv()&&!oh(),this.auth,"internal-error"),await bC(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await aE(this.auth);O(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return O(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function bC(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Oi._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function xp(t,e,n){if(yt(t.app))return Promise.reject(pn(t));const s=Ht(t),r=await RC(s,e,Nt(n));return new PC(r,i=>p_(s,i))}async function RC(t,e,n){var s;if(!t._getRecaptchaConfig())try{await OE(t)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let r;if(typeof e=="string"?r={phoneNumber:e}:r=e,"session"in r){const i=r.session;if("phoneNumber"in r){O(i.type==="enroll",t,"internal-error");const o={idToken:i.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await Us(t,o,"mfaSmsEnrollment",async(h,f)=>{if(f.phoneEnrollmentInfo.captchaResponse===Di){O((n==null?void 0:n.type)===Li,h,"argument-error");const d=await Nc(h,f,n);return yp(h,d)}return yp(h,f)},"PHONE_PROVIDER").catch(h=>Promise.reject(h))).phoneSessionInfo.sessionInfo}else{O(i.type==="signin",t,"internal-error");const o=((s=r.multiFactorHint)==null?void 0:s.uid)||r.multiFactorUid;O(o,t,"missing-multi-factor-info");const l={mfaPendingCredential:i.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await Us(t,l,"mfaSmsSignIn",async(f,d)=>{if(d.phoneSignInInfo.captchaResponse===Di){O((n==null?void 0:n.type)===Li,f,"argument-error");const _=await Nc(f,d,n);return kp(f,_)}return kp(f,d)},"PHONE_PROVIDER").catch(f=>Promise.reject(f))).phoneResponseInfo.sessionInfo}}else{const i={phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await Us(t,i,"sendVerificationCode",async(u,h)=>{if(h.captchaResponse===Di){O((n==null?void 0:n.type)===Li,u,"argument-error");const f=await Nc(u,h,n);return vp(u,f)}return vp(u,h)},"PHONE_PROVIDER").catch(u=>Promise.reject(u))).sessionInfo}}finally{n==null||n._reset()}}async function Nc(t,e,n){O(n.type===Li,t,"argument-error");const s=await n.verify();O(typeof s=="string",t,"argument-error");const r={...e};if("phoneEnrollmentInfo"in r){const i=r.phoneEnrollmentInfo.phoneNumber,o=r.phoneEnrollmentInfo.captchaResponse,l=r.phoneEnrollmentInfo.clientType,c=r.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(r,{phoneEnrollmentInfo:{phoneNumber:i,recaptchaToken:s,captchaResponse:o,clientType:l,recaptchaVersion:c}}),r}else if("phoneSignInInfo"in r){const i=r.phoneSignInInfo.captchaResponse,o=r.phoneSignInInfo.clientType,l=r.phoneSignInInfo.recaptchaVersion;return Object.assign(r,{phoneSignInInfo:{recaptchaToken:s,captchaResponse:i,clientType:o,recaptchaVersion:l}}),r}else return Object.assign(r,{recaptchaToken:s}),r}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x_(t,e){return e?kn(e):(O(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah extends Pl{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ir(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ir(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ir(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function AC(t){return f_(t.auth,new ah(t),t.bypassAuthState)}function jC(t){const{auth:e,user:n}=t;return O(n,e,"internal-error"),nC(n,new ah(t),t.bypassAuthState)}async function DC(t){const{auth:e,user:n}=t;return O(n,e,"internal-error"),tC(n,new ah(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_{constructor(e,n,s,r,i=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:r,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return AC;case"linkViaPopup":case"linkViaRedirect":return DC;case"reauthViaPopup":case"reauthViaRedirect":return jC;default:$t(this.auth,"internal-error")}}resolve(e){Rn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Rn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC=new Co(2e3,1e4);async function LC(t,e,n){if(yt(t.app))return Promise.reject(Ct(t,"operation-not-supported-in-this-environment"));const s=Ht(t);Zx(t,e,rh);const r=x_(s,n);return new Ds(s,"signInViaPopup",e,r).executeNotNull()}class Ds extends E_{constructor(e,n,s,r,i){super(e,n,r,i),this.provider=s,this.authWindow=null,this.pollId=null,Ds.currentPopupAction&&Ds.currentPopupAction.cancel(),Ds.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return O(e,this.auth,"internal-error"),e}async onExecution(){Rn(this.filter.length===1,"Popup operations only handle one event");const e=ih();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ct(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Ct(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ds.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if((s=(n=this.authWindow)==null?void 0:n.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ct(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,OC.get())};e()}}Ds.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC="pendingRedirect",ga=new Map;class FC extends E_{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=ga.get(this.auth._key());if(!e){try{const s=await UC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}ga.set(this.auth._key(),e)}return this.bypassAuthState||ga.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function UC(t,e){const n=zC(e),s=WC(t);if(!await s._isAvailable())return!1;const r=await s._get(n)==="true";return await s._remove(n),r}function VC(t,e){ga.set(t._key(),e)}function WC(t){return kn(t._redirectPersistence)}function zC(t){return ma(MC,t.config.apiKey,t.name)}async function $C(t,e,n=!1){if(yt(t.app))return Promise.reject(pn(t));const s=Ht(t),r=x_(s,e),o=await new FC(s,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC=10*60*1e3;class HC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!GC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!C_(e)){const r=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";n.onError(Ct(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=BC&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ep(e))}saveEventToCache(e){this.cachedEventUids.add(Ep(e)),this.lastProcessedEventTime=Date.now()}}function Ep(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function C_({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function GC(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return C_(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qC(t,e={}){return jt(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,YC=/^https?/;async function QC(t){if(t.config.emulator)return;const{authorizedDomains:e}=await qC(t);for(const n of e)try{if(XC(n))return}catch{}$t(t,"unauthorized-domain")}function XC(t){const e=Du(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!YC.test(n))return!1;if(KC.test(t))return s===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC=new Co(3e4,6e4);function Cp(){const t=Oe().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function ZC(t){return new Promise((e,n)=>{var r,i,o;function s(){Cp(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Cp(),n(Ct(t,"network-request-failed"))},timeout:JC.get()})}if((i=(r=Oe().gapi)==null?void 0:r.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=Oe().gapi)!=null&&o.load)s();else{const l=c_("iframefcb");return Oe()[l]=()=>{gapi.load?s():n(Ct(t,"network-request-failed"))},nh(`${NE()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw va=null,e})}let va=null;function eN(t){return va=va||ZC(t),va}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN=new Co(5e3,15e3),nN="__/auth/iframe",sN="emulator/auth/iframe",rN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},iN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function oN(t){const e=t.config;O(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Zd(e,sN):`https://${t.config.authDomain}/${nN}`,s={apiKey:e.apiKey,appName:t.name,v:Qr},r=iN.get(t.config.apiHost);r&&(s.eid=r);const i=t._getFrameworks();return i.length&&(s.fw=i.join(",")),`${n}?${er(s).slice(1)}`}async function aN(t){const e=await eN(t),n=Oe().gapi;return O(n,t,"internal-error"),e.open({where:document.body,url:oN(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:rN,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const o=Ct(t,"network-request-failed"),l=Oe().setTimeout(()=>{i(o)},tN.get());function c(){Oe().clearTimeout(l),r(s)}s.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},cN=500,uN=600,dN="_blank",hN="http://localhost";class Np{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function fN(t,e,n,s=cN,r=uN){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let l="";const c={...lN,width:s.toString(),height:r.toString(),top:i,left:o},u=ft().toLowerCase();n&&(l=n_(u)?dN:n),e_(u)&&(e=e||hN,c.scrollbars="yes");const h=Object.entries(c).reduce((d,[_,v])=>`${d}${_}=${v},`,"");if(gE(u)&&l!=="_self")return pN(e||"",l),new Np(null);const f=window.open(e||"",l,h);O(f,t,"popup-blocked");try{f.focus()}catch{}return new Np(f)}function pN(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN="__/auth/handler",gN="emulator/auth/handler",vN=encodeURIComponent("fac");async function Tp(t,e,n,s,r,i){O(t.config.authDomain,t,"auth-domain-config-required"),O(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:Qr,eventId:r};if(e instanceof rh){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Iu(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof To){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const c=await t._getAppCheckToken(),u=c?`#${vN}=${encodeURIComponent(c)}`:"";return`${_N(t)}?${er(l).slice(1)}${u}`}function _N({config:t}){return t.emulator?Zd(t,gN):`https://${t.authDomain}/${mN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tc="webStorageSupport";class yN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=y_,this._completeRedirectFn=$C,this._overrideRedirectResult=VC}async _openPopup(e,n,s,r){var o;Rn((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await Tp(e,n,s,Du(),r);return fN(e,i,ih())}async _openRedirect(e,n,s,r){await this._originValidation(e);const i=await Tp(e,n,s,Du(),r);return fC(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:i}=this.eventManagers[n];return r?Promise.resolve(r):(Rn(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await aN(e),s=new HC(e);return n.register("authEvent",r=>(O(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Tc,{type:Tc},r=>{var o;const i=(o=r==null?void 0:r[0])==null?void 0:o[Tc];i!==void 0&&n(!!i),$t(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=QC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return a_()||t_()||th()}}const wN=yN;var Ip="@firebase/auth",bp="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){O(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kN(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function xN(t){Ur(new Gs("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=s.options;O(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:l_(t)},u=new kE(s,r,i,c);return ME(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Ur(new Gs("auth-internal",e=>{const n=Ht(e.getProvider("auth").getImmediate());return(s=>new SN(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ls(Ip,bp,kN(t)),ls(Ip,bp,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN=5*60,CN=jv("authIdTokenMaxAge")||EN;let Pp=null;const NN=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>CN)return;const r=n==null?void 0:n.token;Pp!==r&&(Pp=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function TN(t=Wv()){const e=Qd(t,"auth");if(e.isInitialized())return e.getImmediate();const n=LE(t,{popupRedirectResolver:wN,persistence:[kC,uC,y_]}),s=jv("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const o=NN(i.toString());aC(n,o,()=>o(n.currentUser)),oC(n,l=>o(l))}}const r=Rv("auth");return r&&FE(n,`http://${r}`),n}function IN(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}xE({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=r=>{const i=Ct("internal-error");i.customData=r,n(i)},s.type="text/javascript",s.charset="UTF-8",IN().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});xN("Browser");var Rp={};const Ap="@firebase/database",jp="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let N_="";function bN(t){N_=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Ve(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:io(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return mn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new PN(e)}}catch{}return new RN},Os=T_("localStorage"),AN=T_("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const br=new Kd("@firebase/database"),jN=function(){let t=1;return function(){return t++}}(),I_=function(t){const e=zk(t),n=new Fk;n.update(e);const s=n.digest();return Hd.encodeByteArray(s)},bo=function(...t){let e="";for(let n=0;n<t.length;n++){const s=t[n];Array.isArray(s)||s&&typeof s=="object"&&typeof s.length=="number"?e+=bo.apply(null,s):typeof s=="object"?e+=Ve(s):e+=s,e+=" "}return e};let Mi=null,Dp=!0;const DN=function(t,e){P(!0,"Can't turn on custom loggers persistently."),br.logLevel=ue.VERBOSE,Mi=br.log.bind(br)},Xe=function(...t){if(Dp===!0&&(Dp=!1,Mi===null&&AN.get("logging_enabled")===!0&&DN()),Mi){const e=bo.apply(null,t);Mi(e)}},Po=function(t){return function(...e){Xe(t,...e)}},Mu=function(...t){const e="FIREBASE INTERNAL ERROR: "+bo(...t);br.error(e)},An=function(...t){const e=`FIREBASE FATAL ERROR: ${bo(...t)}`;throw br.error(e),new Error(e)},ht=function(...t){const e="FIREBASE WARNING: "+bo(...t);br.warn(e)},ON=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&ht("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},lh=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},LN=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Vr="[MIN_NAME]",Ys="[MAX_NAME]",tr=function(t,e){if(t===e)return 0;if(t===Vr||e===Ys)return-1;if(e===Vr||t===Ys)return 1;{const n=Op(t),s=Op(e);return n!==null?s!==null?n-s===0?t.length-e.length:n-s:-1:s!==null?1:t<e?-1:1}},MN=function(t,e){return t===e?0:t<e?-1:1},hi=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Ve(e))},ch=function(t){if(typeof t!="object"||t===null)return Ve(t);const e=[];for(const s in t)e.push(s);e.sort();let n="{";for(let s=0;s<e.length;s++)s!==0&&(n+=","),n+=Ve(e[s]),n+=":",n+=ch(t[e[s]]);return n+="}",n},b_=function(t,e){const n=t.length;if(n<=e)return[t];const s=[];for(let r=0;r<n;r+=e)r+e>n?s.push(t.substring(r,n)):s.push(t.substring(r,r+e));return s};function et(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const P_=function(t){P(!lh(t),"Invalid JSON number");const e=11,n=52,s=(1<<e-1)-1;let r,i,o,l,c;t===0?(i=0,o=0,r=1/t===-1/0?1:0):(r=t<0,t=Math.abs(t),t>=Math.pow(2,1-s)?(l=Math.min(Math.floor(Math.log(t)/Math.LN2),s),i=l+s,o=Math.round(t*Math.pow(2,n-l)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-s-n))));const u=[];for(c=n;c;c-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)u.push(i%2?1:0),i=Math.floor(i/2);u.push(r?1:0),u.reverse();const h=u.join("");let f="";for(c=0;c<64;c+=8){let d=parseInt(h.substr(c,8),2).toString(16);d.length===1&&(d="0"+d),f=f+d}return f.toLowerCase()},FN=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},UN=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function VN(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const s=new Error(t+" at "+e._path.toString()+": "+n);return s.code=t.toUpperCase(),s}const WN=new RegExp("^-?(0*)\\d{1,10}$"),zN=-2147483648,$N=2147483647,Op=function(t){if(WN.test(t)){const e=Number(t);if(e>=zN&&e<=$N)return e}return null},Jr=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw ht("Exception was thrown by user callback.",n),e},Math.floor(0))}},BN=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Fi=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,yt(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(s=>this.appCheck=s)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,s)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)==null||n.get().then(s=>s.addTokenListener(e))}notifyForInvalidToken(){ht(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(e,n,s){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Xe("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,s)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ht(e)}}class _a{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}_a.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uh="5",R_="v",A_="s",j_="r",D_="f",O_=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,L_="ls",M_="p",Fu="ac",F_="websocket",U_="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{constructor(e,n,s,r,i=!1,o="",l=!1,c=!1,u=null){this.secure=n,this.namespace=s,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=l,this.isUsingEmulator=c,this.emulatorOptions=u,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Os.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Os.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function qN(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function W_(t,e,n){P(typeof e=="string","typeof type must == string"),P(typeof n=="object","typeof params must == object");let s;if(e===F_)s=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===U_)s=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);qN(t)&&(n.ns=t.namespace);const r=[];return et(n,(i,o)=>{r.push(i+"="+o)}),s+r.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(){this.counters_={}}incrementCounter(e,n=1){mn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return vk(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ic={},bc={};function dh(t){const e=t.toString();return Ic[e]||(Ic[e]=new KN),Ic[e]}function YN(t,e){const n=t.toString();return bc[n]||(bc[n]=e()),bc[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const s=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<s.length;++r)s[r]&&Jr(()=>{this.onMessage_(s[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lp="start",XN="close",JN="pLPCommand",ZN="pRTLPCB",z_="id",$_="pw",B_="ser",eT="cb",tT="seg",nT="ts",sT="d",rT="dframe",H_=1870,G_=30,iT=H_-G_,oT=25e3,aT=3e4;class _r{constructor(e,n,s,r,i,o,l){this.connId=e,this.repoInfo=n,this.applicationId=s,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=l,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Po(e),this.stats_=dh(n),this.urlFn=c=>(this.appCheckToken&&(c[Fu]=this.appCheckToken),W_(n,U_,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new QN(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(aT)),LN(()=>{if(this.isClosed_)return;this.scriptTagHolder=new hh((...i)=>{const[o,l,c,u,h]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Lp)this.id=l,this.password=c;else if(o===XN)l?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(l,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,l]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,l)},()=>{this.onClosed_()},this.urlFn);const s={};s[Lp]="t",s[B_]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(s[eT]=this.scriptTagHolder.uniqueCallbackIdentifier),s[R_]=uh,this.transportSessionId&&(s[A_]=this.transportSessionId),this.lastSessionId&&(s[L_]=this.lastSessionId),this.applicationId&&(s[M_]=this.applicationId),this.appCheckToken&&(s[Fu]=this.appCheckToken),typeof location<"u"&&location.hostname&&O_.test(location.hostname)&&(s[j_]=D_);const r=this.urlFn(s);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){_r.forceAllow_=!0}static forceDisallow(){_r.forceDisallow_=!0}static isAvailable(){return _r.forceAllow_?!0:!_r.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!FN()&&!UN()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Ve(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=bv(n),r=b_(s,iT);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const s={};s[rT]="t",s[z_]=e,s[$_]=n,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Ve(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class hh{constructor(e,n,s,r){this.onDisconnect=s,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=jN(),window[JN+this.uniqueCallbackIdentifier]=e,window[ZN+this.uniqueCallbackIdentifier]=n,this.myIFrame=hh.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(l){Xe("frame writing exception"),l.stack&&Xe(l.stack),Xe(l)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Xe("No IE domain setting required")}catch{const s=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+s+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[z_]=this.myID,e[$_]=this.myPW,e[B_]=this.currentSerial;let n=this.urlFn(e),s="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+G_+s.length<=H_;){const o=this.pendingSegs.shift();s=s+"&"+tT+r+"="+o.seg+"&"+nT+r+"="+o.ts+"&"+sT+r+"="+o.d,r++}return n=n+s,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,s){this.pendingSegs.push({seg:e,ts:n,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const s=()=>{this.outstandingRequests.delete(n),this.newRequest_()},r=setTimeout(s,Math.floor(oT)),i=()=>{clearTimeout(r),s()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=e,s.onload=s.onreadystatechange=function(){const r=s.readyState;(!r||r==="loaded"||r==="complete")&&(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),n())},s.onerror=()=>{Xe("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT=16384,cT=45e3;let Za=null;typeof MozWebSocket<"u"?Za=MozWebSocket:typeof WebSocket<"u"&&(Za=WebSocket);class en{constructor(e,n,s,r,i,o,l){this.connId=e,this.applicationId=s,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Po(this.connId),this.stats_=dh(n),this.connURL=en.connectionURL_(n,o,l,r,s),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,s,r,i){const o={};return o[R_]=uh,typeof location<"u"&&location.hostname&&O_.test(location.hostname)&&(o[j_]=D_),n&&(o[A_]=n),s&&(o[L_]=s),r&&(o[Fu]=r),i&&(o[M_]=i),W_(e,F_,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Os.set("previous_websocket_failure",!0);try{let s;Pk(),this.mySock=new Za(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");const r=s.message||s.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const r=s.message||s.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){en.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(n);s&&s.length>1&&parseFloat(s[1])<4.4&&(e=!0)}return!e&&Za!==null&&!en.forceDisallow_}static previouslyFailed(){return Os.isInMemoryStorage||Os.get("previous_websocket_failure")===!0}markConnectionHealthy(){Os.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const s=io(n);this.onMessage(s)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(P(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const s=this.extractFrameCount_(n);s!==null&&this.appendFrame_(s)}}send(e){this.resetKeepAlive();const n=Ve(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=b_(n,lT);s.length>1&&this.sendString_(String(s.length));for(let r=0;r<s.length;r++)this.sendString_(s[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(cT))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}en.responsesRequiredToBeHealthy=2;en.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{static get ALL_TRANSPORTS(){return[_r,en]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=en&&en.isAvailable();let s=n&&!en.previouslyFailed();if(e.webSocketOnly&&(n||ht("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[en];else{const r=this.transports_=[];for(const i of co.ALL_TRANSPORTS)i&&i.isAvailable()&&r.push(i);co.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}co.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT=6e4,dT=5e3,hT=10*1024,fT=100*1024,Pc="t",Mp="d",pT="s",Fp="r",mT="e",Up="o",Vp="a",Wp="n",zp="p",gT="h";class vT{constructor(e,n,s,r,i,o,l,c,u,h){this.id=e,this.repoInfo_=n,this.applicationId_=s,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=l,this.onDisconnect_=c,this.onKill_=u,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Po("c:"+this.id+":"),this.transportManager_=new co(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,s)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=Fi(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>fT?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>hT?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Pc in e){const n=e[Pc];n===Vp?this.upgradeIfSecondaryHealthy_():n===Fp?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Up&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=hi("t",e),s=hi("d",e);if(n==="c")this.onSecondaryControl_(s);else if(n==="d")this.pendingDataMessages.push(s);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:zp,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Vp,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Wp,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=hi("t",e),s=hi("d",e);n==="c"?this.onControl_(s):n==="d"&&this.onDataMessage_(s)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=hi(Pc,e);if(Mp in e){const s=e[Mp];if(n===gT){const r={...s};this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(n===Wp){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===pT?this.onConnectionShutdown_(s):n===Fp?this.onReset_(s):n===mT?Mu("Server Error: "+s):n===Up?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Mu("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,s=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),uh!==s&&ht("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,s),Fi(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(uT))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Fi(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(dT))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:zp,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Os.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{put(e,n,s,r){}merge(e,n,s,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,s){}onDisconnectMerge(e,n,s){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{constructor(e){this.allowedEvents_=e,this.listeners_={},P(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const s=[...this.listeners_[e]];for(let r=0;r<s.length;r++)s[r].callback.apply(s[r].context,n)}}on(e,n,s){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:s});const r=this.getInitialEvent(e);r&&n.apply(s,r)}off(e,n,s){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===n&&(!s||s===r[i].context)){r.splice(i,1);return}}validateEventType_(e){P(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el extends K_{static getInstance(){return new el}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!qd()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return P(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $p=32,Bp=768;class de{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let s=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[s]=this.pieces_[r],s++);this.pieces_.length=s,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function ae(){return new de("")}function J(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function fs(t){return t.pieces_.length-t.pieceNum_}function me(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new de(t.pieces_,e)}function fh(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function _T(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function uo(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function Y_(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new de(e,0)}function Re(t,e){const n=[];for(let s=t.pieceNum_;s<t.pieces_.length;s++)n.push(t.pieces_[s]);if(e instanceof de)for(let s=e.pieceNum_;s<e.pieces_.length;s++)n.push(e.pieces_[s]);else{const s=e.split("/");for(let r=0;r<s.length;r++)s[r].length>0&&n.push(s[r])}return new de(n,0)}function te(t){return t.pieceNum_>=t.pieces_.length}function ut(t,e){const n=J(t),s=J(e);if(n===null)return e;if(n===s)return ut(me(t),me(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function yT(t,e){const n=uo(t,0),s=uo(e,0);for(let r=0;r<n.length&&r<s.length;r++){const i=tr(n[r],s[r]);if(i!==0)return i}return n.length===s.length?0:n.length<s.length?-1:1}function ph(t,e){if(fs(t)!==fs(e))return!1;for(let n=t.pieceNum_,s=e.pieceNum_;n<=t.pieces_.length;n++,s++)if(t.pieces_[n]!==e.pieces_[s])return!1;return!0}function Ut(t,e){let n=t.pieceNum_,s=e.pieceNum_;if(fs(t)>fs(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[s])return!1;++n,++s}return!0}class wT{constructor(e,n){this.errorPrefix_=n,this.parts_=uo(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let s=0;s<this.parts_.length;s++)this.byteLength_+=bl(this.parts_[s]);Q_(this)}}function ST(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=bl(e),Q_(t)}function kT(t){const e=t.parts_.pop();t.byteLength_-=bl(e),t.parts_.length>0&&(t.byteLength_-=1)}function Q_(t){if(t.byteLength_>Bp)throw new Error(t.errorPrefix_+"has a key path longer than "+Bp+" bytes ("+t.byteLength_+").");if(t.parts_.length>$p)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+$p+") or object contains a cycle "+bs(t))}function bs(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh extends K_{static getInstance(){return new mh}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const s=!document[e];s!==this.visible_&&(this.visible_=s,this.trigger("visible",s))},!1)}getInitialEvent(e){return P(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fi=1e3,xT=60*5*1e3,Hp=30*1e3,ET=1.3,CT=3e4,NT="server_kill",Gp=3;class Cn extends q_{constructor(e,n,s,r,i,o,l,c){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=s,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=Cn.nextPersistentConnectionId_++,this.log_=Po("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=fi,this.maxReconnectDelay_=xT,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");mh.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&el.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,s){const r=++this.requestNumber_,i={r,a:e,b:n};this.log_(Ve(i)),P(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),s&&(this.requestCBHash_[r]=s)}get(e){this.initConnection_();const n=new xo,r={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const l=o.d;o.s==="ok"?n.resolve(l):n.reject(l)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,s,r){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),P(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),P(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const l={onComplete:r,hashFn:n,query:e,tag:s};this.listens.get(o).set(i,l),this.connected_&&this.sendListen_(l)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,s=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(s)})}sendListen_(e){const n=e.query,s=n._path.toString(),r=n._queryIdentifier;this.log_("Listen on "+s+" for "+r);const i={p:s},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,l=>{const c=l.d,u=l.s;Cn.warnOnListenWarnings_(c,n),(this.listens.get(s)&&this.listens.get(s).get(r))===e&&(this.log_("listen response",l),u!=="ok"&&this.removeListen_(s,r),e.onComplete&&e.onComplete(u,c))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&mn(e,"w")){const s=Fr(e,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const r='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();ht(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||Mk(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Hp)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=Lk(e)?"auth":"gauth",s={cred:e};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(n,s,r=>{const i=r.s,o=r.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,s=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,s)})}unlisten(e,n){const s=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+s+" "+r),P(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,r)&&this.connected_&&this.sendUnlisten_(s,r,e._queryObject,n)}sendUnlisten_(e,n,s,r){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";r&&(i.q=s,i.t=r),this.sendRequest(o,i)}onDisconnectPut(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:s})}onDisconnectMerge(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:s})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,s,r){const i={p:n,d:s};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{r&&setTimeout(()=>{r(o.s,o.d)},Math.floor(0))})}put(e,n,s,r){this.putInternal("p",e,n,s,r)}merge(e,n,s,r){this.putInternal("m",e,n,s,r)}putInternal(e,n,s,r,i){this.initConnection_();const o={p:n,d:s};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;const l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,s=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,s,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,s=>{if(s.s!=="ok"){const i=s.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Ve(e));const n=e.r,s=this.requestCBHash_[n];s&&(delete this.requestCBHash_[n],s(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Mu("Unrecognized action received from server: "+Ve(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){P(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=fi,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=fi,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>CT&&(this.reconnectDelay_=fi),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*ET)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+Cn.nextConnectionId_++,i=this.lastSessionId;let o=!1,l=null;const c=function(){l?l.close():(o=!0,s())},u=function(f){P(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(f)};this.realtime_={close:c,sendRequest:u};const h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[f,d]=await Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);o?Xe("getToken() completed but was canceled"):(Xe("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=d&&d.token,l=new vT(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,s,_=>{ht(_+" ("+this.repoInfo_.toString()+")"),this.interrupt(NT)},i))}catch(f){this.log_("Failed to get token: "+f),o||(this.repoInfo_.nodeAdmin&&ht(f),c())}}}interrupt(e){Xe("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Xe("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Iu(this.interruptReasons_)&&(this.reconnectDelay_=fi,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let s;n?s=n.map(i=>ch(i)).join("$"):s="default";const r=this.removeListen_(e,s);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,n){const s=new de(e).toString();let r;if(this.listens.has(s)){const i=this.listens.get(s);r=i.get(n),i.delete(n),i.size===0&&this.listens.delete(s)}else r=void 0;return r}onAuthRevoked_(e,n){Xe("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Gp&&(this.reconnectDelay_=Hp,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Xe("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Gp&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+N_.replace(/\./g,"-")]=1,qd()?e["framework.cordova"]=1:Lv()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=el.getInstance().currentlyOnline();return Iu(this.interruptReasons_)&&e}}Cn.nextPersistentConnectionId_=0;Cn.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Z(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const s=new Z(Vr,e),r=new Z(Vr,n);return this.compare(s,r)!==0}minPost(){return Z.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zo;class X_ extends jl{static get __EMPTY_NODE(){return Zo}static set __EMPTY_NODE(e){Zo=e}compare(e,n){return tr(e.name,n.name)}isDefinedOn(e){throw Kr("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Z.MIN}maxPost(){return new Z(Ys,Zo)}makePost(e,n){return P(typeof e=="string","KeyIndex indexValue must always be a string."),new Z(e,Zo)}toString(){return".key"}}const Pr=new X_;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e,n,s,r,i=null){this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?s(e.key,n):1,r&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class qe{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??qe.RED,this.left=r??St.EMPTY_NODE,this.right=i??St.EMPTY_NODE}copy(e,n,s,r,i){return new qe(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return i<0?r=r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r=r.copy(null,n,null,null,null):r=r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return St.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let s,r;if(s=this,n(e,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),n(e,s.key)===0){if(s.right.isEmpty())return St.EMPTY_NODE;r=s.right.min_(),s=s.copy(r.key,r.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,qe.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,qe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}qe.RED=!0;qe.BLACK=!1;class TT{copy(e,n,s,r,i){return this}insert(e,n,s){return new qe(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class St{constructor(e,n=St.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new St(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,qe.BLACK,null,null))}remove(e){return new St(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,qe.BLACK,null,null))}get(e){let n,s=this.root_;for(;!s.isEmpty();){if(n=this.comparator_(e,s.key),n===0)return s.value;n<0?s=s.left:n>0&&(s=s.right)}return null}getPredecessorKey(e){let n,s=this.root_,r=null;for(;!s.isEmpty();)if(n=this.comparator_(e,s.key),n===0){if(s.left.isEmpty())return r?r.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}else n<0?s=s.left:n>0&&(r=s,s=s.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ea(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new ea(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new ea(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new ea(this.root_,null,this.comparator_,!0,e)}}St.EMPTY_NODE=new TT;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IT(t,e){return tr(t.name,e.name)}function gh(t,e){return tr(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uu;function bT(t){Uu=t}const J_=function(t){return typeof t=="number"?"number:"+P_(t):"string:"+t},Z_=function(t){if(t.isLeafNode()){const e=t.val();P(typeof e=="string"||typeof e=="number"||typeof e=="object"&&mn(e,".sv"),"Priority must be a string or number.")}else P(t===Uu||t.isEmpty(),"priority of unexpected type.");P(t===Uu||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qp;class He{static set __childrenNodeConstructor(e){qp=e}static get __childrenNodeConstructor(){return qp}constructor(e,n=He.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,P(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Z_(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new He(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:He.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return te(e)?this:J(e)===".priority"?this.priorityNode_:He.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:He.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const s=J(e);return s===null?n:n.isEmpty()&&s!==".priority"?this:(P(s!==".priority"||fs(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,He.__childrenNodeConstructor.EMPTY_NODE.updateChild(me(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+J_(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=P_(this.value_):e+=this.value_,this.lazyHash_=I_(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===He.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof He.__childrenNodeConstructor?-1:(P(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,s=typeof this.value_,r=He.VALUE_TYPE_ORDER.indexOf(n),i=He.VALUE_TYPE_ORDER.indexOf(s);return P(r>=0,"Unknown leaf type: "+n),P(i>=0,"Unknown leaf type: "+s),r===i?s==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}He.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ey,ty;function PT(t){ey=t}function RT(t){ty=t}class AT extends jl{compare(e,n){const s=e.node.getPriority(),r=n.node.getPriority(),i=s.compareTo(r);return i===0?tr(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Z.MIN}maxPost(){return new Z(Ys,new He("[PRIORITY-POST]",ty))}makePost(e,n){const s=ey(e);return new Z(n,new He("[PRIORITY-POST]",s))}toString(){return".priority"}}const Ae=new AT;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jT=Math.log(2);class DT{constructor(e){const n=i=>parseInt(Math.log(i)/jT,10),s=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const r=s(this.count);this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const tl=function(t,e,n,s){t.sort(e);const r=function(c,u){const h=u-c;let f,d;if(h===0)return null;if(h===1)return f=t[c],d=n?n(f):f,new qe(d,f.node,qe.BLACK,null,null);{const _=parseInt(h/2,10)+c,v=r(c,_),S=r(_+1,u);return f=t[_],d=n?n(f):f,new qe(d,f.node,qe.BLACK,v,S)}},i=function(c){let u=null,h=null,f=t.length;const d=function(v,S){const w=f-v,m=f;f-=v;const p=r(w+1,m),g=t[w],k=n?n(g):g;_(new qe(k,g.node,S,null,p))},_=function(v){u?(u.left=v,u=v):(h=v,u=v)};for(let v=0;v<c.count;++v){const S=c.nextBitIsOne(),w=Math.pow(2,c.count-(v+1));S?d(w,qe.BLACK):(d(w,qe.BLACK),d(w,qe.RED))}return h},o=new DT(t.length),l=i(o);return new St(s||e,l)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rc;const ir={};class xn{static get Default(){return P(ir&&Ae,"ChildrenNode.ts has not been loaded"),Rc=Rc||new xn({".priority":ir},{".priority":Ae}),Rc}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=Fr(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof St?n:null}hasIndex(e){return mn(this.indexSet_,e.toString())}addIndex(e,n){P(e!==Pr,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let r=!1;const i=n.getIterator(Z.Wrap);let o=i.getNext();for(;o;)r=r||e.isDefinedOn(o.node),s.push(o),o=i.getNext();let l;r?l=tl(s,e.getCompare()):l=ir;const c=e.toString(),u={...this.indexSet_};u[c]=e;const h={...this.indexes_};return h[c]=l,new xn(h,u)}addToIndexes(e,n){const s=Ha(this.indexes_,(r,i)=>{const o=Fr(this.indexSet_,i);if(P(o,"Missing index implementation for "+i),r===ir)if(o.isDefinedOn(e.node)){const l=[],c=n.getIterator(Z.Wrap);let u=c.getNext();for(;u;)u.name!==e.name&&l.push(u),u=c.getNext();return l.push(e),tl(l,o.getCompare())}else return ir;else{const l=n.get(e.name);let c=r;return l&&(c=c.remove(new Z(e.name,l))),c.insert(e,e.node)}});return new xn(s,this.indexSet_)}removeFromIndexes(e,n){const s=Ha(this.indexes_,r=>{if(r===ir)return r;{const i=n.get(e.name);return i?r.remove(new Z(e.name,i)):r}});return new xn(s,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pi;class q{static get EMPTY_NODE(){return pi||(pi=new q(new St(gh),null,xn.Default))}constructor(e,n,s){this.children_=e,this.priorityNode_=n,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&Z_(this.priorityNode_),this.children_.isEmpty()&&P(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||pi}updatePriority(e){return this.children_.isEmpty()?this:new q(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?pi:n}}getChild(e){const n=J(e);return n===null?this:this.getImmediateChild(n).getChild(me(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(P(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const s=new Z(e,n);let r,i;n.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(s,this.children_)):(r=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(s,this.children_));const o=r.isEmpty()?pi:this.priorityNode_;return new q(r,o,i)}}updateChild(e,n){const s=J(e);if(s===null)return n;{P(J(e)!==".priority"||fs(e)===1,".priority must be the last token in a path");const r=this.getImmediateChild(s).updateChild(me(e),n);return this.updateImmediateChild(s,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let s=0,r=0,i=!0;if(this.forEachChild(Ae,(o,l)=>{n[o]=l.val(e),s++,i&&q.INTEGER_REGEXP_.test(o)?r=Math.max(r,Number(o)):i=!1}),!e&&i&&r<2*s){const o=[];for(const l in n)o[l]=n[l];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+J_(this.getPriority().val())+":"),this.forEachChild(Ae,(n,s)=>{const r=s.hash();r!==""&&(e+=":"+n+":"+r)}),this.lazyHash_=e===""?"":I_(e)}return this.lazyHash_}getPredecessorChildName(e,n,s){const r=this.resolveIndex_(s);if(r){const i=r.getPredecessorKey(new Z(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Z(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Z(n,this.children_.get(n)):null}forEachChild(e,n){const s=this.resolveIndex_(e);return s?s.inorderTraversal(r=>n(r.name,r.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getIteratorFrom(e,r=>r);{const r=this.children_.getIteratorFrom(e.name,Z.Wrap);let i=r.peek();for(;i!=null&&n.compare(i,e)<0;)r.getNext(),i=r.peek();return r}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getReverseIteratorFrom(e,r=>r);{const r=this.children_.getReverseIteratorFrom(e.name,Z.Wrap);let i=r.peek();for(;i!=null&&n.compare(i,e)>0;)r.getNext(),i=r.peek();return r}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Ro?-1:0}withIndex(e){if(e===Pr||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new q(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Pr||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const s=this.getIterator(Ae),r=n.getIterator(Ae);let i=s.getNext(),o=r.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=s.getNext(),o=r.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Pr?null:this.indexMap_.get(e.toString())}}q.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class OT extends q{constructor(){super(new St(gh),q.EMPTY_NODE,xn.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return q.EMPTY_NODE}isEmpty(){return!1}}const Ro=new OT;Object.defineProperties(Z,{MIN:{value:new Z(Vr,q.EMPTY_NODE)},MAX:{value:new Z(Ys,Ro)}});X_.__EMPTY_NODE=q.EMPTY_NODE;He.__childrenNodeConstructor=q;bT(Ro);RT(Ro);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LT=!0;function Ue(t,e=null){if(t===null)return q.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),P(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new He(n,Ue(e))}if(!(t instanceof Array)&&LT){const n=[];let s=!1;if(et(t,(o,l)=>{if(o.substring(0,1)!=="."){const c=Ue(l);c.isEmpty()||(s=s||!c.getPriority().isEmpty(),n.push(new Z(o,c)))}}),n.length===0)return q.EMPTY_NODE;const i=tl(n,IT,o=>o.name,gh);if(s){const o=tl(n,Ae.getCompare());return new q(i,Ue(e),new xn({".priority":o},{".priority":Ae}))}else return new q(i,Ue(e),xn.Default)}else{let n=q.EMPTY_NODE;return et(t,(s,r)=>{if(mn(t,s)&&s.substring(0,1)!=="."){const i=Ue(r);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(s,i))}}),n.updatePriority(Ue(e))}}PT(Ue);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT extends jl{constructor(e){super(),this.indexPath_=e,P(!te(e)&&J(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const s=this.extractChild(e.node),r=this.extractChild(n.node),i=s.compareTo(r);return i===0?tr(e.name,n.name):i}makePost(e,n){const s=Ue(e),r=q.EMPTY_NODE.updateChild(this.indexPath_,s);return new Z(n,r)}maxPost(){const e=q.EMPTY_NODE.updateChild(this.indexPath_,Ro);return new Z(Ys,e)}toString(){return uo(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT extends jl{compare(e,n){const s=e.node.compareTo(n.node);return s===0?tr(e.name,n.name):s}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Z.MIN}maxPost(){return Z.MAX}makePost(e,n){const s=Ue(e);return new Z(n,s)}toString(){return".value"}}const UT=new FT;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ny(t){return{type:"value",snapshotNode:t}}function Wr(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function ho(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function fo(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function VT(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(e){this.index_=e}updateChild(e,n,s,r,i,o){P(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const l=e.getImmediateChild(n);return l.getChild(r).equals(s.getChild(r))&&l.isEmpty()===s.isEmpty()||(o!=null&&(s.isEmpty()?e.hasChild(n)?o.trackChildChange(ho(n,l)):P(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):l.isEmpty()?o.trackChildChange(Wr(n,s)):o.trackChildChange(fo(n,s,l))),e.isLeafNode()&&s.isEmpty())?e:e.updateImmediateChild(n,s).withIndex(this.index_)}updateFullNode(e,n,s){return s!=null&&(e.isLeafNode()||e.forEachChild(Ae,(r,i)=>{n.hasChild(r)||s.trackChildChange(ho(r,i))}),n.isLeafNode()||n.forEachChild(Ae,(r,i)=>{if(e.hasChild(r)){const o=e.getImmediateChild(r);o.equals(i)||s.trackChildChange(fo(r,i,o))}else s.trackChildChange(Wr(r,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?q.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e){this.indexedFilter_=new vh(e.getIndex()),this.index_=e.getIndex(),this.startPost_=po.getStartPost_(e),this.endPost_=po.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,s=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&s}updateChild(e,n,s,r,i,o){return this.matches(new Z(n,s))||(s=q.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,s,r,i,o)}updateFullNode(e,n,s){n.isLeafNode()&&(n=q.EMPTY_NODE);let r=n.withIndex(this.index_);r=r.updatePriority(q.EMPTY_NODE);const i=this;return n.forEachChild(Ae,(o,l)=>{i.matches(new Z(o,l))||(r=r.updateImmediateChild(o,q.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const s=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?s<=0:s<0},this.withinEndPost=n=>{const s=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?s<=0:s<0},this.rangedFilter_=new po(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,s,r,i,o){return this.rangedFilter_.matches(new Z(n,s))||(s=q.EMPTY_NODE),e.getImmediateChild(n).equals(s)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,s,r,i,o):this.fullLimitUpdateChild_(e,n,s,i,o)}updateFullNode(e,n,s){let r;if(n.isLeafNode()||n.isEmpty())r=q.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){r=q.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const l=i.getNext();if(this.withinDirectionalStart(l))if(this.withinDirectionalEnd(l))r=r.updateImmediateChild(l.name,l.node),o++;else break;else continue}}else{r=n.withIndex(this.index_),r=r.updatePriority(q.EMPTY_NODE);let i;this.reverse_?i=r.getReverseIterator(this.index_):i=r.getIterator(this.index_);let o=0;for(;i.hasNext();){const l=i.getNext();o<this.limit_&&this.withinDirectionalStart(l)&&this.withinDirectionalEnd(l)?o++:r=r.updateImmediateChild(l.name,q.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,s,r,i){let o;if(this.reverse_){const f=this.index_.getCompare();o=(d,_)=>f(_,d)}else o=this.index_.getCompare();const l=e;P(l.numChildren()===this.limit_,"");const c=new Z(n,s),u=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(l.hasChild(n)){const f=l.getImmediateChild(n);let d=r.getChildAfterChild(this.index_,u,this.reverse_);for(;d!=null&&(d.name===n||l.hasChild(d.name));)d=r.getChildAfterChild(this.index_,d,this.reverse_);const _=d==null?1:o(d,c);if(h&&!s.isEmpty()&&_>=0)return i!=null&&i.trackChildChange(fo(n,s,f)),l.updateImmediateChild(n,s);{i!=null&&i.trackChildChange(ho(n,f));const S=l.updateImmediateChild(n,q.EMPTY_NODE);return d!=null&&this.rangedFilter_.matches(d)?(i!=null&&i.trackChildChange(Wr(d.name,d.node)),S.updateImmediateChild(d.name,d.node)):S}}else return s.isEmpty()?e:h&&o(u,c)>=0?(i!=null&&(i.trackChildChange(ho(u.name,u.node)),i.trackChildChange(Wr(n,s))),l.updateImmediateChild(n,s).updateImmediateChild(u.name,q.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ae}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return P(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return P(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Vr}hasEnd(){return this.endSet_}getIndexEndValue(){return P(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return P(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ys}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return P(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ae}copy(){const e=new _h;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function zT(t){return t.loadsAllData()?new vh(t.getIndex()):t.hasLimit()?new WT(t):new po(t)}function Kp(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Ae?n="$priority":t.index_===UT?n="$value":t.index_===Pr?n="$key":(P(t.index_ instanceof MT,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Ve(n),t.startSet_){const s=t.startAfterSet_?"startAfter":"startAt";e[s]=Ve(t.indexStartValue_),t.startNameSet_&&(e[s]+=","+Ve(t.indexStartName_))}if(t.endSet_){const s=t.endBeforeSet_?"endBefore":"endAt";e[s]=Ve(t.indexEndValue_),t.endNameSet_&&(e[s]+=","+Ve(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Yp(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Ae&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl extends q_{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(P(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,s,r){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=s,this.appCheckTokenProvider_=r,this.log_=Po("p:rest:"),this.listens_={}}listen(e,n,s,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=nl.getListenId_(e,s),l={};this.listens_[o]=l;const c=Kp(e._queryParams);this.restRequest_(i+".json",c,(u,h)=>{let f=h;if(u===404&&(f=null,u=null),u===null&&this.onDataUpdate_(i,f,!1,s),Fr(this.listens_,o)===l){let d;u?u===401?d="permission_denied":d="rest_error:"+u:d="ok",r(d,null)}})}unlisten(e,n){const s=nl.getListenId_(e,n);delete this.listens_[s]}get(e){const n=Kp(e._queryParams),s=e._path.toString(),r=new xo;return this.restRequest_(s+".json",n,(i,o)=>{let l=o;i===404&&(l=null,i=null),i===null?(this.onDataUpdate_(s,l,!1,null),r.resolve(l)):r.reject(new Error(l))}),r.promise}refreshAuthToken(e){}restRequest_(e,n={},s){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,i])=>{r&&r.accessToken&&(n.auth=r.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+er(n);this.log_("Sending REST request for "+o);const l=new XMLHttpRequest;l.onreadystatechange=()=>{if(s&&l.readyState===4){this.log_("REST Response for "+o+" received. status:",l.status,"response:",l.responseText);let c=null;if(l.status>=200&&l.status<300){try{c=io(l.responseText)}catch{ht("Failed to parse JSON response for "+o+": "+l.responseText)}s(null,c)}else l.status!==401&&l.status!==404&&ht("Got unsuccessful REST response for "+o+" Status: "+l.status),s(l.status);s=null}},l.open("GET",o,!0),l.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(){this.rootNode_=q.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sl(){return{value:null,children:new Map}}function sy(t,e,n){if(te(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const s=J(e);t.children.has(s)||t.children.set(s,sl());const r=t.children.get(s);e=me(e),sy(r,e,n)}}function Vu(t,e,n){t.value!==null?n(e,t.value):BT(t,(s,r)=>{const i=new de(e.toString()+"/"+s);Vu(r,i,n)})}function BT(t,e){t.children.forEach((n,s)=>{e(s,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n={...e};return this.last_&&et(this.last_,(s,r)=>{n[s]=n[s]-r}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qp=10*1e3,GT=30*1e3,qT=5*60*1e3;class KT{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new HT(e);const s=Qp+(GT-Qp)*Math.random();Fi(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const e=this.statsListener_.get(),n={};let s=!1;et(e,(r,i)=>{i>0&&mn(this.statsToReport_,r)&&(n[r]=i,s=!0)}),s&&this.server_.reportStats(n),Fi(this.reportStats_.bind(this),Math.floor(Math.random()*2*qT))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nn;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(nn||(nn={}));function yh(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function wh(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Sh(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(e,n,s){this.path=e,this.affectedTree=n,this.revert=s,this.type=nn.ACK_USER_WRITE,this.source=yh()}operationForChild(e){if(te(this.path)){if(this.affectedTree.value!=null)return P(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new de(e));return new rl(ae(),n,this.revert)}}else return P(J(this.path)===e,"operationForChild called for unrelated child."),new rl(me(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e,n){this.source=e,this.path=n,this.type=nn.LISTEN_COMPLETE}operationForChild(e){return te(this.path)?new mo(this.source,ae()):new mo(this.source,me(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e,n,s){this.source=e,this.path=n,this.snap=s,this.type=nn.OVERWRITE}operationForChild(e){return te(this.path)?new Qs(this.source,ae(),this.snap.getImmediateChild(e)):new Qs(this.source,me(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e,n,s){this.source=e,this.path=n,this.children=s,this.type=nn.MERGE}operationForChild(e){if(te(this.path)){const n=this.children.subtree(new de(e));return n.isEmpty()?null:n.value?new Qs(this.source,ae(),n.value):new zr(this.source,ae(),n)}else return P(J(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new zr(this.source,me(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e,n,s){this.node_=e,this.fullyInitialized_=n,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(te(e))return this.isFullyInitialized()&&!this.filtered_;const n=J(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function QT(t,e,n,s){const r=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(VT(o.childName,o.snapshotNode))}),mi(t,r,"child_removed",e,s,n),mi(t,r,"child_added",e,s,n),mi(t,r,"child_moved",i,s,n),mi(t,r,"child_changed",e,s,n),mi(t,r,"value",e,s,n),r}function mi(t,e,n,s,r,i){const o=s.filter(l=>l.type===n);o.sort((l,c)=>JT(t,l,c)),o.forEach(l=>{const c=XT(t,l,i);r.forEach(u=>{u.respondsTo(l.type)&&e.push(u.createEvent(c,t.query_))})})}function XT(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function JT(t,e,n){if(e.childName==null||n.childName==null)throw Kr("Should only compare child_ events.");const s=new Z(e.childName,e.snapshotNode),r=new Z(n.childName,n.snapshotNode);return t.index_.compare(s,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dl(t,e){return{eventCache:t,serverCache:e}}function Ui(t,e,n,s){return Dl(new ps(e,n,s),t.serverCache)}function ry(t,e,n,s){return Dl(t.eventCache,new ps(e,n,s))}function il(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Xs(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ac;const ZT=()=>(Ac||(Ac=new St(MN)),Ac);class pe{static fromObject(e){let n=new pe(null);return et(e,(s,r)=>{n=n.set(new de(s),r)}),n}constructor(e,n=ZT()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:ae(),value:this.value};if(te(e))return null;{const s=J(e),r=this.children.get(s);if(r!==null){const i=r.findRootMostMatchingPathAndValue(me(e),n);return i!=null?{path:Re(new de(s),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(te(e))return this;{const n=J(e),s=this.children.get(n);return s!==null?s.subtree(me(e)):new pe(null)}}set(e,n){if(te(e))return new pe(n,this.children);{const s=J(e),i=(this.children.get(s)||new pe(null)).set(me(e),n),o=this.children.insert(s,i);return new pe(this.value,o)}}remove(e){if(te(e))return this.children.isEmpty()?new pe(null):new pe(null,this.children);{const n=J(e),s=this.children.get(n);if(s){const r=s.remove(me(e));let i;return r.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,r),this.value===null&&i.isEmpty()?new pe(null):new pe(this.value,i)}else return this}}get(e){if(te(e))return this.value;{const n=J(e),s=this.children.get(n);return s?s.get(me(e)):null}}setTree(e,n){if(te(e))return n;{const s=J(e),i=(this.children.get(s)||new pe(null)).setTree(me(e),n);let o;return i.isEmpty()?o=this.children.remove(s):o=this.children.insert(s,i),new pe(this.value,o)}}fold(e){return this.fold_(ae(),e)}fold_(e,n){const s={};return this.children.inorderTraversal((r,i)=>{s[r]=i.fold_(Re(e,r),n)}),n(e,this.value,s)}findOnPath(e,n){return this.findOnPath_(e,ae(),n)}findOnPath_(e,n,s){const r=this.value?s(n,this.value):!1;if(r)return r;if(te(e))return null;{const i=J(e),o=this.children.get(i);return o?o.findOnPath_(me(e),Re(n,i),s):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,ae(),n)}foreachOnPath_(e,n,s){if(te(e))return this;{this.value&&s(n,this.value);const r=J(e),i=this.children.get(r);return i?i.foreachOnPath_(me(e),Re(n,r),s):new pe(null)}}foreach(e){this.foreach_(ae(),e)}foreach_(e,n){this.children.inorderTraversal((s,r)=>{r.foreach_(Re(e,s),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,s)=>{s.value&&e(n,s.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.writeTree_=e}static empty(){return new on(new pe(null))}}function Vi(t,e,n){if(te(e))return new on(new pe(n));{const s=t.writeTree_.findRootMostValueAndPath(e);if(s!=null){const r=s.path;let i=s.value;const o=ut(r,e);return i=i.updateChild(o,n),new on(t.writeTree_.set(r,i))}else{const r=new pe(n),i=t.writeTree_.setTree(e,r);return new on(i)}}}function Wu(t,e,n){let s=t;return et(n,(r,i)=>{s=Vi(s,Re(e,r),i)}),s}function Xp(t,e){if(te(e))return on.empty();{const n=t.writeTree_.setTree(e,new pe(null));return new on(n)}}function zu(t,e){return nr(t,e)!=null}function nr(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(ut(n.path,e)):null}function Jp(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Ae,(s,r)=>{e.push(new Z(s,r))}):t.writeTree_.children.inorderTraversal((s,r)=>{r.value!=null&&e.push(new Z(s,r.value))}),e}function cs(t,e){if(te(e))return t;{const n=nr(t,e);return n!=null?new on(new pe(n)):new on(t.writeTree_.subtree(e))}}function $u(t){return t.writeTree_.isEmpty()}function $r(t,e){return iy(ae(),t.writeTree_,e)}function iy(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let s=null;return e.children.inorderTraversal((r,i)=>{r===".priority"?(P(i.value!==null,"Priority writes must always be leaf nodes"),s=i.value):n=iy(Re(t,r),i,n)}),!n.getChild(t).isEmpty()&&s!==null&&(n=n.updateChild(Re(t,".priority"),s)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ol(t,e){return cy(e,t)}function e0(t,e,n,s,r){P(s>t.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),t.allWrites.push({path:e,snap:n,writeId:s,visible:r}),r&&(t.visibleWrites=Vi(t.visibleWrites,e,n)),t.lastWriteId=s}function t0(t,e,n,s){P(s>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:s,visible:!0}),t.visibleWrites=Wu(t.visibleWrites,e,n),t.lastWriteId=s}function n0(t,e){for(let n=0;n<t.allWrites.length;n++){const s=t.allWrites[n];if(s.writeId===e)return s}return null}function s0(t,e){const n=t.allWrites.findIndex(l=>l.writeId===e);P(n>=0,"removeWrite called with nonexistent writeId.");const s=t.allWrites[n];t.allWrites.splice(n,1);let r=s.visible,i=!1,o=t.allWrites.length-1;for(;r&&o>=0;){const l=t.allWrites[o];l.visible&&(o>=n&&r0(l,s.path)?r=!1:Ut(s.path,l.path)&&(i=!0)),o--}if(r){if(i)return i0(t),!0;if(s.snap)t.visibleWrites=Xp(t.visibleWrites,s.path);else{const l=s.children;et(l,c=>{t.visibleWrites=Xp(t.visibleWrites,Re(s.path,c))})}return!0}else return!1}function r0(t,e){if(t.snap)return Ut(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Ut(Re(t.path,n),e))return!0;return!1}function i0(t){t.visibleWrites=oy(t.allWrites,o0,ae()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function o0(t){return t.visible}function oy(t,e,n){let s=on.empty();for(let r=0;r<t.length;++r){const i=t[r];if(e(i)){const o=i.path;let l;if(i.snap)Ut(n,o)?(l=ut(n,o),s=Vi(s,l,i.snap)):Ut(o,n)&&(l=ut(o,n),s=Vi(s,ae(),i.snap.getChild(l)));else if(i.children){if(Ut(n,o))l=ut(n,o),s=Wu(s,l,i.children);else if(Ut(o,n))if(l=ut(o,n),te(l))s=Wu(s,ae(),i.children);else{const c=Fr(i.children,J(l));if(c){const u=c.getChild(me(l));s=Vi(s,ae(),u)}}}else throw Kr("WriteRecord should have .snap or .children")}}return s}function ay(t,e,n,s,r){if(!s&&!r){const i=nr(t.visibleWrites,e);if(i!=null)return i;{const o=cs(t.visibleWrites,e);if($u(o))return n;if(n==null&&!zu(o,ae()))return null;{const l=n||q.EMPTY_NODE;return $r(o,l)}}}else{const i=cs(t.visibleWrites,e);if(!r&&$u(i))return n;if(!r&&n==null&&!zu(i,ae()))return null;{const o=function(u){return(u.visible||r)&&(!s||!~s.indexOf(u.writeId))&&(Ut(u.path,e)||Ut(e,u.path))},l=oy(t.allWrites,o,e),c=n||q.EMPTY_NODE;return $r(l,c)}}}function a0(t,e,n){let s=q.EMPTY_NODE;const r=nr(t.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(Ae,(i,o)=>{s=s.updateImmediateChild(i,o)}),s;if(n){const i=cs(t.visibleWrites,e);return n.forEachChild(Ae,(o,l)=>{const c=$r(cs(i,new de(o)),l);s=s.updateImmediateChild(o,c)}),Jp(i).forEach(o=>{s=s.updateImmediateChild(o.name,o.node)}),s}else{const i=cs(t.visibleWrites,e);return Jp(i).forEach(o=>{s=s.updateImmediateChild(o.name,o.node)}),s}}function l0(t,e,n,s,r){P(s||r,"Either existingEventSnap or existingServerSnap must exist");const i=Re(e,n);if(zu(t.visibleWrites,i))return null;{const o=cs(t.visibleWrites,i);return $u(o)?r.getChild(n):$r(o,r.getChild(n))}}function c0(t,e,n,s){const r=Re(e,n),i=nr(t.visibleWrites,r);if(i!=null)return i;if(s.isCompleteForChild(n)){const o=cs(t.visibleWrites,r);return $r(o,s.getNode().getImmediateChild(n))}else return null}function u0(t,e){return nr(t.visibleWrites,e)}function d0(t,e,n,s,r,i,o){let l;const c=cs(t.visibleWrites,e),u=nr(c,ae());if(u!=null)l=u;else if(n!=null)l=$r(c,n);else return[];if(l=l.withIndex(o),!l.isEmpty()&&!l.isLeafNode()){const h=[],f=o.getCompare(),d=i?l.getReverseIteratorFrom(s,o):l.getIteratorFrom(s,o);let _=d.getNext();for(;_&&h.length<r;)f(_,s)!==0&&h.push(_),_=d.getNext();return h}else return[]}function h0(){return{visibleWrites:on.empty(),allWrites:[],lastWriteId:-1}}function ol(t,e,n,s){return ay(t.writeTree,t.treePath,e,n,s)}function kh(t,e){return a0(t.writeTree,t.treePath,e)}function Zp(t,e,n,s){return l0(t.writeTree,t.treePath,e,n,s)}function al(t,e){return u0(t.writeTree,Re(t.treePath,e))}function f0(t,e,n,s,r,i){return d0(t.writeTree,t.treePath,e,n,s,r,i)}function xh(t,e,n){return c0(t.writeTree,t.treePath,e,n)}function ly(t,e){return cy(Re(t.treePath,e),t.writeTree)}function cy(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,s=e.childName;P(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),P(s!==".priority","Only non-priority child changes can be tracked.");const r=this.changeMap.get(s);if(r){const i=r.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(s,fo(s,e.snapshotNode,r.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(s);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(s,ho(s,r.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(s,Wr(s,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(s,fo(s,e.snapshotNode,r.oldSnap));else throw Kr("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(s,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0{getCompleteChild(e){return null}getChildAfterChild(e,n,s){return null}}const uy=new m0;class Eh{constructor(e,n,s=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=s}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const s=this.optCompleteServerCache_!=null?new ps(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return xh(this.writes_,e,s)}}getChildAfterChild(e,n,s){const r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Xs(this.viewCache_),i=f0(this.writes_,r,n,1,s,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g0(t){return{filter:t}}function v0(t,e){P(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),P(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function _0(t,e,n,s,r){const i=new p0;let o,l;if(n.type===nn.OVERWRITE){const u=n;u.source.fromUser?o=Bu(t,e,u.path,u.snap,s,r,i):(P(u.source.fromServer,"Unknown source."),l=u.source.tagged||e.serverCache.isFiltered()&&!te(u.path),o=ll(t,e,u.path,u.snap,s,r,l,i))}else if(n.type===nn.MERGE){const u=n;u.source.fromUser?o=w0(t,e,u.path,u.children,s,r,i):(P(u.source.fromServer,"Unknown source."),l=u.source.tagged||e.serverCache.isFiltered(),o=Hu(t,e,u.path,u.children,s,r,l,i))}else if(n.type===nn.ACK_USER_WRITE){const u=n;u.revert?o=x0(t,e,u.path,s,r,i):o=S0(t,e,u.path,u.affectedTree,s,r,i)}else if(n.type===nn.LISTEN_COMPLETE)o=k0(t,e,n.path,s,i);else throw Kr("Unknown operation type: "+n.type);const c=i.getChanges();return y0(e,o,c),{viewCache:o,changes:c}}function y0(t,e,n){const s=e.eventCache;if(s.isFullyInitialized()){const r=s.getNode().isLeafNode()||s.getNode().isEmpty(),i=il(t);(n.length>0||!t.eventCache.isFullyInitialized()||r&&!s.getNode().equals(i)||!s.getNode().getPriority().equals(i.getPriority()))&&n.push(ny(il(e)))}}function dy(t,e,n,s,r,i){const o=e.eventCache;if(al(s,n)!=null)return e;{let l,c;if(te(n))if(P(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=Xs(e),h=u instanceof q?u:q.EMPTY_NODE,f=kh(s,h);l=t.filter.updateFullNode(e.eventCache.getNode(),f,i)}else{const u=ol(s,Xs(e));l=t.filter.updateFullNode(e.eventCache.getNode(),u,i)}else{const u=J(n);if(u===".priority"){P(fs(n)===1,"Can't have a priority with additional path components");const h=o.getNode();c=e.serverCache.getNode();const f=Zp(s,n,h,c);f!=null?l=t.filter.updatePriority(h,f):l=o.getNode()}else{const h=me(n);let f;if(o.isCompleteForChild(u)){c=e.serverCache.getNode();const d=Zp(s,n,o.getNode(),c);d!=null?f=o.getNode().getImmediateChild(u).updateChild(h,d):f=o.getNode().getImmediateChild(u)}else f=xh(s,u,e.serverCache);f!=null?l=t.filter.updateChild(o.getNode(),u,f,h,r,i):l=o.getNode()}}return Ui(e,l,o.isFullyInitialized()||te(n),t.filter.filtersNodes())}}function ll(t,e,n,s,r,i,o,l){const c=e.serverCache;let u;const h=o?t.filter:t.filter.getIndexedFilter();if(te(n))u=h.updateFullNode(c.getNode(),s,null);else if(h.filtersNodes()&&!c.isFiltered()){const _=c.getNode().updateChild(n,s);u=h.updateFullNode(c.getNode(),_,null)}else{const _=J(n);if(!c.isCompleteForPath(n)&&fs(n)>1)return e;const v=me(n),w=c.getNode().getImmediateChild(_).updateChild(v,s);_===".priority"?u=h.updatePriority(c.getNode(),w):u=h.updateChild(c.getNode(),_,w,v,uy,null)}const f=ry(e,u,c.isFullyInitialized()||te(n),h.filtersNodes()),d=new Eh(r,f,i);return dy(t,f,n,r,d,l)}function Bu(t,e,n,s,r,i,o){const l=e.eventCache;let c,u;const h=new Eh(r,e,i);if(te(n))u=t.filter.updateFullNode(e.eventCache.getNode(),s,o),c=Ui(e,u,!0,t.filter.filtersNodes());else{const f=J(n);if(f===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),s),c=Ui(e,u,l.isFullyInitialized(),l.isFiltered());else{const d=me(n),_=l.getNode().getImmediateChild(f);let v;if(te(d))v=s;else{const S=h.getCompleteChild(f);S!=null?fh(d)===".priority"&&S.getChild(Y_(d)).isEmpty()?v=S:v=S.updateChild(d,s):v=q.EMPTY_NODE}if(_.equals(v))c=e;else{const S=t.filter.updateChild(l.getNode(),f,v,d,h,o);c=Ui(e,S,l.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function em(t,e){return t.eventCache.isCompleteForChild(e)}function w0(t,e,n,s,r,i,o){let l=e;return s.foreach((c,u)=>{const h=Re(n,c);em(e,J(h))&&(l=Bu(t,l,h,u,r,i,o))}),s.foreach((c,u)=>{const h=Re(n,c);em(e,J(h))||(l=Bu(t,l,h,u,r,i,o))}),l}function tm(t,e,n){return n.foreach((s,r)=>{e=e.updateChild(s,r)}),e}function Hu(t,e,n,s,r,i,o,l){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,u;te(n)?u=s:u=new pe(null).setTree(n,s);const h=e.serverCache.getNode();return u.children.inorderTraversal((f,d)=>{if(h.hasChild(f)){const _=e.serverCache.getNode().getImmediateChild(f),v=tm(t,_,d);c=ll(t,c,new de(f),v,r,i,o,l)}}),u.children.inorderTraversal((f,d)=>{const _=!e.serverCache.isCompleteForChild(f)&&d.value===null;if(!h.hasChild(f)&&!_){const v=e.serverCache.getNode().getImmediateChild(f),S=tm(t,v,d);c=ll(t,c,new de(f),S,r,i,o,l)}}),c}function S0(t,e,n,s,r,i,o){if(al(r,n)!=null)return e;const l=e.serverCache.isFiltered(),c=e.serverCache;if(s.value!=null){if(te(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return ll(t,e,n,c.getNode().getChild(n),r,i,l,o);if(te(n)){let u=new pe(null);return c.getNode().forEachChild(Pr,(h,f)=>{u=u.set(new de(h),f)}),Hu(t,e,n,u,r,i,l,o)}else return e}else{let u=new pe(null);return s.foreach((h,f)=>{const d=Re(n,h);c.isCompleteForPath(d)&&(u=u.set(h,c.getNode().getChild(d)))}),Hu(t,e,n,u,r,i,l,o)}}function k0(t,e,n,s,r){const i=e.serverCache,o=ry(e,i.getNode(),i.isFullyInitialized()||te(n),i.isFiltered());return dy(t,o,n,s,uy,r)}function x0(t,e,n,s,r,i){let o;if(al(s,n)!=null)return e;{const l=new Eh(s,e,r),c=e.eventCache.getNode();let u;if(te(n)||J(n)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=ol(s,Xs(e));else{const f=e.serverCache.getNode();P(f instanceof q,"serverChildren would be complete if leaf node"),h=kh(s,f)}h=h,u=t.filter.updateFullNode(c,h,i)}else{const h=J(n);let f=xh(s,h,e.serverCache);f==null&&e.serverCache.isCompleteForChild(h)&&(f=c.getImmediateChild(h)),f!=null?u=t.filter.updateChild(c,h,f,me(n),l,i):e.eventCache.getNode().hasChild(h)?u=t.filter.updateChild(c,h,q.EMPTY_NODE,me(n),l,i):u=c,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=ol(s,Xs(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,i)))}return o=e.serverCache.isFullyInitialized()||al(s,ae())!=null,Ui(e,u,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const s=this.query_._queryParams,r=new vh(s.getIndex()),i=zT(s);this.processor_=g0(i);const o=n.serverCache,l=n.eventCache,c=r.updateFullNode(q.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(q.EMPTY_NODE,l.getNode(),null),h=new ps(c,o.isFullyInitialized(),r.filtersNodes()),f=new ps(u,l.isFullyInitialized(),i.filtersNodes());this.viewCache_=Dl(f,h),this.eventGenerator_=new YT(this.query_)}get query(){return this.query_}}function C0(t){return t.viewCache_.serverCache.getNode()}function N0(t){return il(t.viewCache_)}function T0(t,e){const n=Xs(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!te(e)&&!n.getImmediateChild(J(e)).isEmpty())?n.getChild(e):null}function nm(t){return t.eventRegistrations_.length===0}function I0(t,e){t.eventRegistrations_.push(e)}function sm(t,e,n){const s=[];if(n){P(e==null,"A cancel should cancel all event registrations.");const r=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,r);o&&s.push(o)})}if(e){let r=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))r.push(o);else if(e.hasAnyCallback()){r=r.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=r}else t.eventRegistrations_=[];return s}function rm(t,e,n,s){e.type===nn.MERGE&&e.source.queryId!==null&&(P(Xs(t.viewCache_),"We should always have a full cache before handling merges"),P(il(t.viewCache_),"Missing event cache, even though we have a server cache"));const r=t.viewCache_,i=_0(t.processor_,r,e,n,s);return v0(t.processor_,i.viewCache),P(i.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,hy(t,i.changes,i.viewCache.eventCache.getNode(),null)}function b0(t,e){const n=t.viewCache_.eventCache,s=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Ae,(i,o)=>{s.push(Wr(i,o))}),n.isFullyInitialized()&&s.push(ny(n.getNode())),hy(t,s,n.getNode(),e)}function hy(t,e,n,s){const r=s?[s]:t.eventRegistrations_;return QT(t.eventGenerator_,e,n,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cl;class fy{constructor(){this.views=new Map}}function P0(t){P(!cl,"__referenceConstructor has already been defined"),cl=t}function R0(){return P(cl,"Reference.ts has not been loaded"),cl}function A0(t){return t.views.size===0}function Ch(t,e,n,s){const r=e.source.queryId;if(r!==null){const i=t.views.get(r);return P(i!=null,"SyncTree gave us an op for an invalid query."),rm(i,e,n,s)}else{let i=[];for(const o of t.views.values())i=i.concat(rm(o,e,n,s));return i}}function py(t,e,n,s,r){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let l=ol(n,r?s:null),c=!1;l?c=!0:s instanceof q?(l=kh(n,s),c=!1):(l=q.EMPTY_NODE,c=!1);const u=Dl(new ps(l,c,!1),new ps(s,r,!1));return new E0(e,u)}return o}function j0(t,e,n,s,r,i){const o=py(t,e,s,r,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),I0(o,n),b0(o,n)}function D0(t,e,n,s){const r=e._queryIdentifier,i=[];let o=[];const l=ms(t);if(r==="default")for(const[c,u]of t.views.entries())o=o.concat(sm(u,n,s)),nm(u)&&(t.views.delete(c),u.query._queryParams.loadsAllData()||i.push(u.query));else{const c=t.views.get(r);c&&(o=o.concat(sm(c,n,s)),nm(c)&&(t.views.delete(r),c.query._queryParams.loadsAllData()||i.push(c.query)))}return l&&!ms(t)&&i.push(new(R0())(e._repo,e._path)),{removed:i,events:o}}function my(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function us(t,e){let n=null;for(const s of t.views.values())n=n||T0(s,e);return n}function gy(t,e){if(e._queryParams.loadsAllData())return Ll(t);{const s=e._queryIdentifier;return t.views.get(s)}}function vy(t,e){return gy(t,e)!=null}function ms(t){return Ll(t)!=null}function Ll(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ul;function O0(t){P(!ul,"__referenceConstructor has already been defined"),ul=t}function L0(){return P(ul,"Reference.ts has not been loaded"),ul}let M0=1;class im{constructor(e){this.listenProvider_=e,this.syncPointTree_=new pe(null),this.pendingWriteTree_=h0(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function _y(t,e,n,s,r){return e0(t.pendingWriteTree_,e,n,s,r),r?Zr(t,new Qs(yh(),e,n)):[]}function F0(t,e,n,s){t0(t.pendingWriteTree_,e,n,s);const r=pe.fromObject(n);return Zr(t,new zr(yh(),e,r))}function Xn(t,e,n=!1){const s=n0(t.pendingWriteTree_,e);if(s0(t.pendingWriteTree_,e)){let i=new pe(null);return s.snap!=null?i=i.set(ae(),!0):et(s.children,o=>{i=i.set(new de(o),!0)}),Zr(t,new rl(s.path,i,n))}else return[]}function Ao(t,e,n){return Zr(t,new Qs(wh(),e,n))}function U0(t,e,n){const s=pe.fromObject(n);return Zr(t,new zr(wh(),e,s))}function V0(t,e){return Zr(t,new mo(wh(),e))}function W0(t,e,n){const s=Th(t,n);if(s){const r=Ih(s),i=r.path,o=r.queryId,l=ut(i,e),c=new mo(Sh(o),l);return bh(t,i,c)}else return[]}function dl(t,e,n,s,r=!1){const i=e._path,o=t.syncPointTree_.get(i);let l=[];if(o&&(e._queryIdentifier==="default"||vy(o,e))){const c=D0(o,e,n,s);A0(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const u=c.removed;if(l=c.events,!r){const h=u.findIndex(d=>d._queryParams.loadsAllData())!==-1,f=t.syncPointTree_.findOnPath(i,(d,_)=>ms(_));if(h&&!f){const d=t.syncPointTree_.subtree(i);if(!d.isEmpty()){const _=B0(d);for(let v=0;v<_.length;++v){const S=_[v],w=S.query,m=ky(t,S);t.listenProvider_.startListening(Wi(w),go(t,w),m.hashFn,m.onComplete)}}}!f&&u.length>0&&!s&&(h?t.listenProvider_.stopListening(Wi(e),null):u.forEach(d=>{const _=t.queryToTagMap.get(Ml(d));t.listenProvider_.stopListening(Wi(d),_)}))}H0(t,u)}return l}function yy(t,e,n,s){const r=Th(t,s);if(r!=null){const i=Ih(r),o=i.path,l=i.queryId,c=ut(o,e),u=new Qs(Sh(l),c,n);return bh(t,o,u)}else return[]}function z0(t,e,n,s){const r=Th(t,s);if(r){const i=Ih(r),o=i.path,l=i.queryId,c=ut(o,e),u=pe.fromObject(n),h=new zr(Sh(l),c,u);return bh(t,o,h)}else return[]}function Gu(t,e,n,s=!1){const r=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(r,(d,_)=>{const v=ut(d,r);i=i||us(_,v),o=o||ms(_)});let l=t.syncPointTree_.get(r);l?(o=o||ms(l),i=i||us(l,ae())):(l=new fy,t.syncPointTree_=t.syncPointTree_.set(r,l));let c;i!=null?c=!0:(c=!1,i=q.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((_,v)=>{const S=us(v,ae());S&&(i=i.updateImmediateChild(_,S))}));const u=vy(l,e);if(!u&&!e._queryParams.loadsAllData()){const d=Ml(e);P(!t.queryToTagMap.has(d),"View does not exist, but we have a tag");const _=G0();t.queryToTagMap.set(d,_),t.tagToQueryMap.set(_,d)}const h=Ol(t.pendingWriteTree_,r);let f=j0(l,e,n,h,i,c);if(!u&&!o&&!s){const d=gy(l,e);f=f.concat(q0(t,e,d))}return f}function Nh(t,e,n){const r=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,l)=>{const c=ut(o,e),u=us(l,c);if(u)return u});return ay(r,e,i,n,!0)}function $0(t,e){const n=e._path;let s=null;t.syncPointTree_.foreachOnPath(n,(u,h)=>{const f=ut(u,n);s=s||us(h,f)});let r=t.syncPointTree_.get(n);r?s=s||us(r,ae()):(r=new fy,t.syncPointTree_=t.syncPointTree_.set(n,r));const i=s!=null,o=i?new ps(s,!0,!1):null,l=Ol(t.pendingWriteTree_,e._path),c=py(r,e,l,i?o.getNode():q.EMPTY_NODE,i);return N0(c)}function Zr(t,e){return wy(e,t.syncPointTree_,null,Ol(t.pendingWriteTree_,ae()))}function wy(t,e,n,s){if(te(t.path))return Sy(t,e,n,s);{const r=e.get(ae());n==null&&r!=null&&(n=us(r,ae()));let i=[];const o=J(t.path),l=t.operationForChild(o),c=e.children.get(o);if(c&&l){const u=n?n.getImmediateChild(o):null,h=ly(s,o);i=i.concat(wy(l,c,u,h))}return r&&(i=i.concat(Ch(r,t,s,n))),i}}function Sy(t,e,n,s){const r=e.get(ae());n==null&&r!=null&&(n=us(r,ae()));let i=[];return e.children.inorderTraversal((o,l)=>{const c=n?n.getImmediateChild(o):null,u=ly(s,o),h=t.operationForChild(o);h&&(i=i.concat(Sy(h,l,c,u)))}),r&&(i=i.concat(Ch(r,t,s,n))),i}function ky(t,e){const n=e.query,s=go(t,n);return{hashFn:()=>(C0(e)||q.EMPTY_NODE).hash(),onComplete:r=>{if(r==="ok")return s?W0(t,n._path,s):V0(t,n._path);{const i=VN(r,n);return dl(t,n,null,i)}}}}function go(t,e){const n=Ml(e);return t.queryToTagMap.get(n)}function Ml(t){return t._path.toString()+"$"+t._queryIdentifier}function Th(t,e){return t.tagToQueryMap.get(e)}function Ih(t){const e=t.indexOf("$");return P(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new de(t.substr(0,e))}}function bh(t,e,n){const s=t.syncPointTree_.get(e);P(s,"Missing sync point for query tag that we're tracking");const r=Ol(t.pendingWriteTree_,e);return Ch(s,n,r,null)}function B0(t){return t.fold((e,n,s)=>{if(n&&ms(n))return[Ll(n)];{let r=[];return n&&(r=my(n)),et(s,(i,o)=>{r=r.concat(o)}),r}})}function Wi(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(L0())(t._repo,t._path):t}function H0(t,e){for(let n=0;n<e.length;++n){const s=e[n];if(!s._queryParams.loadsAllData()){const r=Ml(s),i=t.queryToTagMap.get(r);t.queryToTagMap.delete(r),t.tagToQueryMap.delete(i)}}}function G0(){return M0++}function q0(t,e,n){const s=e._path,r=go(t,e),i=ky(t,n),o=t.listenProvider_.startListening(Wi(e),r,i.hashFn,i.onComplete),l=t.syncPointTree_.subtree(s);if(r)P(!ms(l.value),"If we're adding a query, it shouldn't be shadowed");else{const c=l.fold((u,h,f)=>{if(!te(u)&&h&&ms(h))return[Ll(h).query];{let d=[];return h&&(d=d.concat(my(h).map(_=>_.query))),et(f,(_,v)=>{d=d.concat(v)}),d}});for(let u=0;u<c.length;++u){const h=c[u];t.listenProvider_.stopListening(Wi(h),go(t,h))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Ph(n)}node(){return this.node_}}class Rh{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Re(this.path_,e);return new Rh(this.syncTree_,n)}node(){return Nh(this.syncTree_,this.path_)}}const K0=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},om=function(t,e,n){if(!t||typeof t!="object")return t;if(P(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return Y0(t[".sv"],e,n);if(typeof t[".sv"]=="object")return Q0(t[".sv"],e);P(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},Y0=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:P(!1,"Unexpected server value: "+t)}},Q0=function(t,e,n){t.hasOwnProperty("increment")||P(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const s=t.increment;typeof s!="number"&&P(!1,"Unexpected increment value: "+s);const r=e.node();if(P(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return s;const o=r.getValue();return typeof o!="number"?s:o+s},xy=function(t,e,n,s){return Ah(e,new Rh(n,t),s)},Ey=function(t,e,n){return Ah(t,new Ph(e),n)};function Ah(t,e,n){const s=t.getPriority().val(),r=om(s,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,l=om(o.getValue(),e,n);return l!==o.getValue()||r!==o.getPriority().val()?new He(l,Ue(r)):t}else{const o=t;return i=o,r!==o.getPriority().val()&&(i=i.updatePriority(new He(r))),o.forEachChild(Ae,(l,c)=>{const u=Ah(c,e.getImmediateChild(l),n);u!==c&&(i=i.updateImmediateChild(l,u))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e="",n=null,s={children:{},childCount:0}){this.name=e,this.parent=n,this.node=s}}function Dh(t,e){let n=e instanceof de?e:new de(e),s=t,r=J(n);for(;r!==null;){const i=Fr(s.node.children,r)||{children:{},childCount:0};s=new jh(r,s,i),n=me(n),r=J(n)}return s}function ei(t){return t.node.value}function Cy(t,e){t.node.value=e,qu(t)}function Ny(t){return t.node.childCount>0}function X0(t){return ei(t)===void 0&&!Ny(t)}function Fl(t,e){et(t.node.children,(n,s)=>{e(new jh(n,t,s))})}function Ty(t,e,n,s){n&&e(t),Fl(t,r=>{Ty(r,e,!0)})}function J0(t,e,n){let s=t.parent;for(;s!==null;){if(e(s))return!0;s=s.parent}return!1}function jo(t){return new de(t.parent===null?t.name:jo(t.parent)+"/"+t.name)}function qu(t){t.parent!==null&&Z0(t.parent,t.name,t)}function Z0(t,e,n){const s=X0(n),r=mn(t.node.children,e);s&&r?(delete t.node.children[e],t.node.childCount--,qu(t)):!s&&!r&&(t.node.children[e]=n.node,t.node.childCount++,qu(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI=/[\[\].#$\/\u0000-\u001F\u007F]/,tI=/[\[\].#$\u0000-\u001F\u007F]/,jc=10*1024*1024,Oh=function(t){return typeof t=="string"&&t.length!==0&&!eI.test(t)},Iy=function(t){return typeof t=="string"&&t.length!==0&&!tI.test(t)},nI=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Iy(t)},sI=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!lh(t)||t&&typeof t=="object"&&mn(t,".sv")},rI=function(t,e,n,s){Ul(Il(t,"value"),e,n)},Ul=function(t,e,n){const s=n instanceof de?new wT(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+bs(s));if(typeof e=="function")throw new Error(t+"contains a function "+bs(s)+" with contents = "+e.toString());if(lh(e))throw new Error(t+"contains "+e.toString()+" "+bs(s));if(typeof e=="string"&&e.length>jc/3&&bl(e)>jc)throw new Error(t+"contains a string greater than "+jc+" utf8 bytes "+bs(s)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,i=!1;if(et(e,(o,l)=>{if(o===".value")r=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!Oh(o)))throw new Error(t+" contains an invalid key ("+o+") "+bs(s)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);ST(s,o),Ul(t,l,s),kT(s)}),r&&i)throw new Error(t+' contains ".value" child '+bs(s)+" in addition to actual children.")}},iI=function(t,e){let n,s;for(n=0;n<e.length;n++){s=e[n];const i=uo(s);for(let o=0;o<i.length;o++)if(!(i[o]===".priority"&&o===i.length-1)){if(!Oh(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+s.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(yT);let r=null;for(n=0;n<e.length;n++){if(s=e[n],r!==null&&Ut(r,s))throw new Error(t+"contains a path "+r.toString()+" that is ancestor of another path "+s.toString());r=s}},oI=function(t,e,n,s){const r=Il(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(r+" must be an object containing the children to replace.");const i=[];et(e,(o,l)=>{const c=new de(o);if(Ul(r,l,Re(n,c)),fh(c)===".priority"&&!sI(l))throw new Error(r+"contains an invalid value for '"+c.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");i.push(c)}),iI(r,i)},by=function(t,e,n,s){if(!Iy(n))throw new Error(Il(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},aI=function(t,e,n,s){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),by(t,e,n)},Py=function(t,e){if(J(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},lI=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Oh(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!nI(n))throw new Error(Il(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Vl(t,e){let n=null;for(let s=0;s<e.length;s++){const r=e[s],i=r.getPath();n!==null&&!ph(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(r)}n&&t.eventLists_.push(n)}function Ry(t,e,n){Vl(t,n),Ay(t,s=>ph(s,e))}function Bt(t,e,n){Vl(t,n),Ay(t,s=>Ut(s,e)||Ut(e,s))}function Ay(t,e){t.recursionDepth_++;let n=!0;for(let s=0;s<t.eventLists_.length;s++){const r=t.eventLists_[s];if(r){const i=r.path;e(i)?(uI(t.eventLists_[s]),t.eventLists_[s]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function uI(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const s=n.getEventRunner();Mi&&Xe("event: "+n.toString()),Jr(s)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dI="repo_interrupt",hI=25;class fI{constructor(e,n,s,r){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=s,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new cI,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=sl(),this.transactionQueueTree_=new jh,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function pI(t,e,n){if(t.stats_=dh(t.repoInfo_),t.forceRestClient_||BN())t.server_=new nl(t.repoInfo_,(s,r,i,o)=>{am(t,s,r,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>lm(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ve(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}t.persistentConnection_=new Cn(t.repoInfo_,e,(s,r,i,o)=>{am(t,s,r,i,o)},s=>{lm(t,s)},s=>{gI(t,s)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(s=>{t.server_.refreshAuthToken(s)}),t.appCheckProvider_.addTokenChangeListener(s=>{t.server_.refreshAppCheckToken(s.token)}),t.statsReporter_=YN(t.repoInfo_,()=>new KT(t.stats_,t.server_)),t.infoData_=new $T,t.infoSyncTree_=new im({startListening:(s,r,i,o)=>{let l=[];const c=t.infoData_.getNode(s._path);return c.isEmpty()||(l=Ao(t.infoSyncTree_,s._path,c),setTimeout(()=>{o("ok")},0)),l},stopListening:()=>{}}),Lh(t,"connected",!1),t.serverSyncTree_=new im({startListening:(s,r,i,o)=>(t.server_.listen(s,i,r,(l,c)=>{const u=o(l,c);Bt(t.eventQueue_,s._path,u)}),[]),stopListening:(s,r)=>{t.server_.unlisten(s,r)}})}function mI(t){const n=t.infoData_.getNode(new de(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Wl(t){return K0({timestamp:mI(t)})}function am(t,e,n,s,r){t.dataUpdateCount++;const i=new de(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(r)if(s){const c=Ha(n,u=>Ue(u));o=z0(t.serverSyncTree_,i,c,r)}else{const c=Ue(n);o=yy(t.serverSyncTree_,i,c,r)}else if(s){const c=Ha(n,u=>Ue(u));o=U0(t.serverSyncTree_,i,c)}else{const c=Ue(n);o=Ao(t.serverSyncTree_,i,c)}let l=i;o.length>0&&(l=Br(t,i)),Bt(t.eventQueue_,l,o)}function lm(t,e){Lh(t,"connected",e),e===!1&&wI(t)}function gI(t,e){et(e,(n,s)=>{Lh(t,n,s)})}function Lh(t,e,n){const s=new de("/.info/"+e),r=Ue(n);t.infoData_.updateSnapshot(s,r);const i=Ao(t.infoSyncTree_,s,r);Bt(t.eventQueue_,s,i)}function Mh(t){return t.nextWriteId_++}function vI(t,e,n){const s=$0(t.serverSyncTree_,e);return s!=null?Promise.resolve(s):t.server_.get(e).then(r=>{const i=Ue(r).withIndex(e._queryParams.getIndex());Gu(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=Ao(t.serverSyncTree_,e._path,i);else{const l=go(t.serverSyncTree_,e);o=yy(t.serverSyncTree_,e._path,i,l)}return Bt(t.eventQueue_,e._path,o),dl(t.serverSyncTree_,e,n,null,!0),i},r=>(Do(t,"get for query "+Ve(e)+" failed: "+r),Promise.reject(new Error(r))))}function _I(t,e,n,s,r){Do(t,"set",{path:e.toString(),value:n,priority:s});const i=Wl(t),o=Ue(n,s),l=Nh(t.serverSyncTree_,e),c=Ey(o,l,i),u=Mh(t),h=_y(t.serverSyncTree_,e,c,u,!0);Vl(t.eventQueue_,h),t.server_.put(e.toString(),o.val(!0),(d,_)=>{const v=d==="ok";v||ht("set at "+e+" failed: "+d);const S=Xn(t.serverSyncTree_,u,!v);Bt(t.eventQueue_,e,S),Ku(t,r,d,_)});const f=Uh(t,e);Br(t,f),Bt(t.eventQueue_,f,[])}function yI(t,e,n,s){Do(t,"update",{path:e.toString(),value:n});let r=!0;const i=Wl(t),o={};if(et(n,(l,c)=>{r=!1,o[l]=xy(Re(e,l),Ue(c),t.serverSyncTree_,i)}),r)Xe("update() called with empty data.  Don't do anything."),Ku(t,s,"ok",void 0);else{const l=Mh(t),c=F0(t.serverSyncTree_,e,o,l);Vl(t.eventQueue_,c),t.server_.merge(e.toString(),n,(u,h)=>{const f=u==="ok";f||ht("update at "+e+" failed: "+u);const d=Xn(t.serverSyncTree_,l,!f),_=d.length>0?Br(t,e):e;Bt(t.eventQueue_,_,d),Ku(t,s,u,h)}),et(n,u=>{const h=Uh(t,Re(e,u));Br(t,h)}),Bt(t.eventQueue_,e,[])}}function wI(t){Do(t,"onDisconnectEvents");const e=Wl(t),n=sl();Vu(t.onDisconnect_,ae(),(r,i)=>{const o=xy(r,i,t.serverSyncTree_,e);sy(n,r,o)});let s=[];Vu(n,ae(),(r,i)=>{s=s.concat(Ao(t.serverSyncTree_,r,i));const o=Uh(t,r);Br(t,o)}),t.onDisconnect_=sl(),Bt(t.eventQueue_,ae(),s)}function SI(t,e,n){let s;J(e._path)===".info"?s=Gu(t.infoSyncTree_,e,n):s=Gu(t.serverSyncTree_,e,n),Ry(t.eventQueue_,e._path,s)}function cm(t,e,n){let s;J(e._path)===".info"?s=dl(t.infoSyncTree_,e,n):s=dl(t.serverSyncTree_,e,n),Ry(t.eventQueue_,e._path,s)}function kI(t){t.persistentConnection_&&t.persistentConnection_.interrupt(dI)}function Do(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Xe(n,...e)}function Ku(t,e,n,s){e&&Jr(()=>{if(n==="ok")e(null);else{const r=(n||"error").toUpperCase();let i=r;s&&(i+=": "+s);const o=new Error(i);o.code=r,e(o)}})}function jy(t,e,n){return Nh(t.serverSyncTree_,e,n)||q.EMPTY_NODE}function Fh(t,e=t.transactionQueueTree_){if(e||zl(t,e),ei(e)){const n=Oy(t,e);P(n.length>0,"Sending zero length transaction queue"),n.every(r=>r.status===0)&&xI(t,jo(e),n)}else Ny(e)&&Fl(e,n=>{Fh(t,n)})}function xI(t,e,n){const s=n.map(u=>u.currentWriteId),r=jy(t,e,s);let i=r;const o=r.hash();for(let u=0;u<n.length;u++){const h=n[u];P(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const f=ut(e,h.path);i=i.updateChild(f,h.currentOutputSnapshotRaw)}const l=i.val(!0),c=e;t.server_.put(c.toString(),l,u=>{Do(t,"transaction put response",{path:c.toString(),status:u});let h=[];if(u==="ok"){const f=[];for(let d=0;d<n.length;d++)n[d].status=2,h=h.concat(Xn(t.serverSyncTree_,n[d].currentWriteId)),n[d].onComplete&&f.push(()=>n[d].onComplete(null,!0,n[d].currentOutputSnapshotResolved)),n[d].unwatcher();zl(t,Dh(t.transactionQueueTree_,e)),Fh(t,t.transactionQueueTree_),Bt(t.eventQueue_,e,h);for(let d=0;d<f.length;d++)Jr(f[d])}else{if(u==="datastale")for(let f=0;f<n.length;f++)n[f].status===3?n[f].status=4:n[f].status=0;else{ht("transaction at "+c.toString()+" failed: "+u);for(let f=0;f<n.length;f++)n[f].status=4,n[f].abortReason=u}Br(t,e)}},o)}function Br(t,e){const n=Dy(t,e),s=jo(n),r=Oy(t,n);return EI(t,r,s),s}function EI(t,e,n){if(e.length===0)return;const s=[];let r=[];const o=e.filter(l=>l.status===0).map(l=>l.currentWriteId);for(let l=0;l<e.length;l++){const c=e[l],u=ut(n,c.path);let h=!1,f;if(P(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)h=!0,f=c.abortReason,r=r.concat(Xn(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=hI)h=!0,f="maxretry",r=r.concat(Xn(t.serverSyncTree_,c.currentWriteId,!0));else{const d=jy(t,c.path,o);c.currentInputSnapshot=d;const _=e[l].update(d.val());if(_!==void 0){Ul("transaction failed: Data returned ",_,c.path);let v=Ue(_);typeof _=="object"&&_!=null&&mn(_,".priority")||(v=v.updatePriority(d.getPriority()));const w=c.currentWriteId,m=Wl(t),p=Ey(v,d,m);c.currentOutputSnapshotRaw=v,c.currentOutputSnapshotResolved=p,c.currentWriteId=Mh(t),o.splice(o.indexOf(w),1),r=r.concat(_y(t.serverSyncTree_,c.path,p,c.currentWriteId,c.applyLocally)),r=r.concat(Xn(t.serverSyncTree_,w,!0))}else h=!0,f="nodata",r=r.concat(Xn(t.serverSyncTree_,c.currentWriteId,!0))}Bt(t.eventQueue_,n,r),r=[],h&&(e[l].status=2,function(d){setTimeout(d,Math.floor(0))}(e[l].unwatcher),e[l].onComplete&&(f==="nodata"?s.push(()=>e[l].onComplete(null,!1,e[l].currentInputSnapshot)):s.push(()=>e[l].onComplete(new Error(f),!1,null))))}zl(t,t.transactionQueueTree_);for(let l=0;l<s.length;l++)Jr(s[l]);Fh(t,t.transactionQueueTree_)}function Dy(t,e){let n,s=t.transactionQueueTree_;for(n=J(e);n!==null&&ei(s)===void 0;)s=Dh(s,n),e=me(e),n=J(e);return s}function Oy(t,e){const n=[];return Ly(t,e,n),n.sort((s,r)=>s.order-r.order),n}function Ly(t,e,n){const s=ei(e);if(s)for(let r=0;r<s.length;r++)n.push(s[r]);Fl(e,r=>{Ly(t,r,n)})}function zl(t,e){const n=ei(e);if(n){let s=0;for(let r=0;r<n.length;r++)n[r].status!==2&&(n[s]=n[r],s++);n.length=s,Cy(e,n.length>0?n:void 0)}Fl(e,s=>{zl(t,s)})}function Uh(t,e){const n=jo(Dy(t,e)),s=Dh(t.transactionQueueTree_,e);return J0(s,r=>{Dc(t,r)}),Dc(t,s),Ty(s,r=>{Dc(t,r)}),n}function Dc(t,e){const n=ei(e);if(n){const s=[];let r=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(P(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(P(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),r=r.concat(Xn(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&s.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?Cy(e,void 0):n.length=i+1,Bt(t.eventQueue_,jo(e),r);for(let o=0;o<s.length;o++)Jr(s[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CI(t){let e="";const n=t.split("/");for(let s=0;s<n.length;s++)if(n[s].length>0){let r=n[s];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function NI(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const s=n.split("=");s.length===2?e[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):ht(`Invalid query segment '${n}' in query '${t}'`)}return e}const um=function(t,e){const n=TI(t),s=n.namespace;n.domain==="firebase.com"&&An(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!s||s==="undefined")&&n.domain!=="localhost"&&An("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||ON();const r=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new V_(n.host,n.secure,s,r,e,"",s!==n.subdomain),path:new de(n.pathString)}},TI=function(t){let e="",n="",s="",r="",i="",o=!0,l="https",c=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(l=t.substring(0,u-1),t=t.substring(u+2));let h=t.indexOf("/");h===-1&&(h=t.length);let f=t.indexOf("?");f===-1&&(f=t.length),e=t.substring(0,Math.min(h,f)),h<f&&(r=CI(t.substring(h,f)));const d=NI(t.substring(Math.min(t.length,f)));u=e.indexOf(":"),u>=0?(o=l==="https"||l==="wss",c=parseInt(e.substring(u+1),10)):u=e.length;const _=e.slice(0,u);if(_.toLowerCase()==="localhost")n="localhost";else if(_.split(".").length<=2)n=_;else{const v=e.indexOf(".");s=e.substring(0,v).toLowerCase(),n=e.substring(v+1),i=s}"ns"in d&&(i=d.ns)}return{host:e,port:c,domain:n,subdomain:s,secure:o,scheme:l,pathString:r,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(e,n,s,r){this.eventType=e,this.eventRegistration=n,this.snapshot=s,this.prevName=r}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Ve(this.snapshot.exportVal())}}class bI{constructor(e,n,s){this.eventRegistration=e,this.error=n,this.path=s}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return P(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e,n,s,r){this._repo=e,this._path=n,this._queryParams=s,this._orderByCalled=r}get key(){return te(this._path)?null:fh(this._path)}get ref(){return new Dn(this._repo,this._path)}get _queryIdentifier(){const e=Yp(this._queryParams),n=ch(e);return n==="{}"?"default":n}get _queryObject(){return Yp(this._queryParams)}isEqual(e){if(e=Nt(e),!(e instanceof Vh))return!1;const n=this._repo===e._repo,s=ph(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return n&&s&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+_T(this._path)}}class Dn extends Vh{constructor(e,n){super(e,n,new _h,!1)}get parent(){const e=Y_(this._path);return e===null?null:new Dn(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class vo{constructor(e,n,s){this._node=e,this.ref=n,this._index=s}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new de(e),s=Yu(this.ref,e);return new vo(this._node.getChild(n),s,Ae)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(s,r)=>e(new vo(r,Yu(this.ref,s),Ae)))}hasChild(e){const n=new de(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function B(t,e){return t=Nt(t),t._checkNotDeleted("ref"),e!==void 0?Yu(t._root,e):t._root}function Yu(t,e){return t=Nt(t),J(t._path)===null?aI("child","path",e):by("child","path",e),new Dn(t._repo,Re(t._path,e))}function Ls(t){return Py("remove",t._path),ct(t,null)}function ct(t,e){t=Nt(t),Py("set",t._path),rI("set",e,t._path);const n=new xo;return _I(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function yr(t,e){oI("update",e,t._path);const n=new xo;return yI(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function we(t){t=Nt(t);const e=new My(()=>{}),n=new $l(e);return vI(t._repo,t,n).then(s=>new vo(s,new Dn(t._repo,t._path),t._queryParams.getIndex()))}class $l{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const s=n._queryParams.getIndex();return new II("value",this,new vo(e.snapshotNode,new Dn(n._repo,n._path),s))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new bI(this,e,n):null}matches(e){return e instanceof $l?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function PI(t,e,n,s,r){let i;if(typeof s=="object"&&(i=void 0,r=s),typeof s=="function"&&(i=s),r&&r.onlyOnce){const c=n,u=(h,f)=>{cm(t._repo,t,l),c(h,f)};u.userCallback=n.userCallback,u.context=n.context,n=u}const o=new My(n,i||void 0),l=new $l(o);return SI(t._repo,t,l),()=>cm(t._repo,t,l)}function RI(t,e,n,s){return PI(t,"value",e,n,s)}P0(Dn);O0(Dn);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AI="FIREBASE_DATABASE_EMULATOR_HOST",Qu={};let jI=!1;function DI(t,e,n,s){const r=e.lastIndexOf(":"),i=e.substring(0,r),o=Yr(i);t.repoInfo_=new V_(e,o,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),s&&(t.authTokenProvider_=s)}function OI(t,e,n,s,r){let i=s||t.options.databaseURL;i===void 0&&(t.options.projectId||An("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Xe("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=um(i,r),l=o.repoInfo,c;typeof process<"u"&&Rp&&(c=Rp[AI]),c?(i=`http://${c}?ns=${l.namespace}`,o=um(i,r),l=o.repoInfo):o.repoInfo.secure;const u=new GN(t.name,t.options,e);lI("Invalid Firebase Database URL",o),te(o.path)||An("Database URL must point to the root of a Firebase Database (not including a child path).");const h=MI(l,t,u,new HN(t,n));return new FI(h,t)}function LI(t,e){const n=Qu[e];(!n||n[t.key]!==t)&&An(`Database ${e}(${t.repoInfo_}) has already been deleted.`),kI(t),delete n[t.key]}function MI(t,e,n,s){let r=Qu[e.name];r||(r={},Qu[e.name]=r);let i=r[t.toURLString()];return i&&An("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new fI(t,jI,n,s),r[t.toURLString()]=i,i}class FI{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(pI(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Dn(this._repo,ae())),this._rootInternal}_delete(){return this._rootInternal!==null&&(LI(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&An("Cannot call "+e+" on a deleted database.")}}function UI(t=Wv(),e){const n=Qd(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const s=xk("database");s&&VI(n,...s)}return n}function VI(t,e,n,s={}){t=Nt(t),t._checkNotDeleted("useEmulator");const r=`${e}:${n}`,i=t._repoInternal;if(t._instanceStarted){if(r===t._repoInternal.repoInfo_.host&&Hs(s,i.repoInfo_.emulatorOptions))return;An("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(i.repoInfo_.nodeAdmin)s.mockUserToken&&An('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new _a(_a.OWNER);else if(s.mockUserToken){const l=typeof s.mockUserToken=="string"?s.mockUserToken:Ek(s.mockUserToken,t.app.options.projectId);o=new _a(l)}Yr(e)&&(Dv(e),Ov("Database",!0)),DI(i,r,s,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WI(t){bN(Qr),Ur(new Gs("database",(e,{instanceIdentifier:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return OI(s,r,i,n)},"PUBLIC").setMultipleInstances(!0)),ls(Ap,jp,t),ls(Ap,jp,"esm2020")}Cn.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Cn.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};WI();var zI="firebase",$I="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ls(zI,$I,"app");const BI={apiKey:"AIzaSyDtqrvWemkW553kZ2muNHxPp__GO8ARNG0",authDomain:"moulipharma.firebaseapp.com",databaseURL:"https://moulipharma-default-rtdb.firebaseio.com",projectId:"moulipharma",storageBucket:"moulipharma.firebasestorage.app",messagingSenderId:"739263915164",appId:"1:739263915164:web:03e744ea46e0bffb48f959",measurementId:"G-W069JVF95Z"},Fy=Vv(BI),Ps=TN(Fy),H=UI(Fy),HI=new _n;let Cs=null;const dm=()=>{try{if(!document.getElementById("recaptcha-container"))return console.warn("reCAPTCHA container not found in DOM"),null;if(Cs){try{Cs.clear()}catch{console.log("Clearing previous verifier...")}Cs=null}return Cs=new IC(Ps,"recaptcha-container",{size:"normal",callback:e=>{console.log("reCAPTCHA verified:",e)},"expired-callback":()=>{console.log("reCAPTCHA expired"),Cs=null}}),Cs}catch(t){return console.error("Error setting up reCAPTCHA:",t),Cs=null,null}};function Uy({location:t="login"}){const[e,n]=E.useState([]),[s,r]=E.useState(!0),[i,o]=E.useState(0);if(E.useEffect(()=>{(async()=>{try{r(!0);const u=B(H,"ads"),h=await we(u);if(h.exists()){const f=h.val(),d=Object.entries(f).map(([_,v])=>({id:_,...v})).filter(_=>_.active&&(_.displayLocation==="all"||_.displayLocation===t));n(d)}}catch(u){console.error("Error fetching ads:",u)}finally{r(!1)}})()},[t]),E.useEffect(()=>{if(e.length>1){const c=setInterval(()=>{o(u=>(u+1)%e.length)},5e3);return()=>clearInterval(c)}},[e.length]),s||e.length===0)return null;const l=e[i];return a.jsxs("div",{className:"ads-display-container",children:[a.jsxs("div",{className:"ads-banner",children:[l.image&&a.jsx("div",{className:"ads-image",children:a.jsx("img",{src:l.image,alt:l.title})}),a.jsxs("div",{className:"ads-content",children:[a.jsx("h3",{children:l.title}),a.jsx("p",{children:l.description}),l.link&&a.jsx("a",{href:l.link,target:"_blank",rel:"noopener noreferrer",className:"ads-link",children:"Learn More "})]}),a.jsx("button",{className:"ads-close",onClick:()=>n(e.filter((c,u)=>u!==i)),children:""})]}),e.length>1&&a.jsx("div",{className:"ads-indicators",children:e.map((c,u)=>a.jsx("button",{className:`indicator ${u===i?"active":""}`,onClick:()=>o(u)},u))})]})}function GI({onLogin:t}){const[e,n]=E.useState(""),[s,r]=E.useState(""),[i,o]=E.useState(""),[l,c]=E.useState(""),[u,h]=E.useState(""),[f,d]=E.useState(""),[_,v]=E.useState(!1),[S,w]=E.useState("email"),[m,p]=E.useState(!1),[g,k]=E.useState(""),[C,N]=E.useState(!1),[b,j]=E.useState(!1),[X,K]=E.useState(!1),[Y,Ee]=E.useState(""),[L,ve]=E.useState(!1),[se,fe]=E.useState(""),[G,R]=E.useState(null),[T,U]=E.useState(null),[$,re]=E.useState(null),Dt=E.useRef(null),Q=()=>{h(""),d("")},ze=async(V,D,ee="patient")=>{try{const _e=B(H,`users/${V}`),at={...D,role:ee,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return await ct(_e,at),at}catch(_e){throw console.error("Error saving to database:",_e),_e}},Me=async V=>{try{const D=B(H,`users/${V}`),ee=await we(D);return ee.exists()?ee.val():null}catch(D){return console.error("Error fetching user from database:",D),null}},$e=()=>Math.floor(1e5+Math.random()*9e5).toString(),Ss=async(V,D)=>{try{return console.log(` Email OTP for ${V}: ${D}`),alert(` Email OTP Code

Email: ${V}
OTP: ${D}

Valid for 5 minutes

(In production, this would be sent via email)`),!0}catch(ee){return console.error("Error with OTP:",ee),!1}},ks=async V=>{V.preventDefault(),Q(),N(!0);try{if(!e){h("Email is required"),N(!1);return}if(!i||!l){h("Password is required"),N(!1);return}if(i!==l){h("Passwords do not match"),N(!1);return}if(i.length<6){h("Password must be at least 6 characters"),N(!1);return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)){h("Invalid email address"),N(!1);return}const ee=$e(),_e=Date.now()+5*60*1e3;U(ee),re(_e),R({email:e,password:i,mobile:s||"Not provided",name:e.split("@")[0]}),await Ss(e,ee)?(ve(!0),d(`OTP sent to ${e}! Check the alert popup. Valid for 5 minutes.`)):h("Failed to generate OTP. Please try again.")}catch(D){console.error("Signup error:",D),h(D.message||"An error occurred. Please try again.")}finally{N(!1)}},xs=async V=>{V.preventDefault(),Q(),N(!0);try{if(!se){h("Please enter the OTP"),N(!1);return}if(Date.now()>$){h("OTP expired. Please request a new one."),ve(!1),U(null),re(null),N(!1);return}if(se!==T){h("Invalid OTP. Please try again."),N(!1);return}try{const ee=(await rC(Ps,G.email,G.password)).user,_e={id:ee.uid,email:ee.email,mobile:G.mobile,name:G.name,tokenCount:0,maxTokens:10,photoURL:ee.photoURL||null},at=await ze(ee.uid,_e,"patient");d("Account created successfully!"),n(""),r(""),o(""),c(""),fe(""),ve(!1),U(null),re(null),R(null),setTimeout(()=>{t(G.email,G.mobile,at)},1500)}catch(D){D.code==="auth/email-already-in-use"?(h("This email is already registered. Please login instead."),ve(!1),fe(""),U(null),re(null),R(null)):D.code==="auth/weak-password"?h("Password is too weak. Use at least 6 characters."):h(D.message)}}catch(D){console.error("OTP verification error:",D),h(D.message||"An error occurred. Please try again.")}finally{N(!1)}},vt=async V=>{V.preventDefault(),Q(),N(!0);try{if(!e||!i){h("Email and password are required"),N(!1);return}const ee=(await iC(Ps,e,i)).user,_e=await Me(ee.uid);_e?(d("Login successful!"),setTimeout(()=>{t(e,s,_e)},1e3)):h("User data not found"),n(""),r(""),o("")}catch(D){console.error("Login error:",D),D.code==="auth/user-not-found"?h("Email not found. Please sign up first."):D.code==="auth/wrong-password"?h("Incorrect password"):D.code==="auth/invalid-email"?h("Invalid email address"):h(D.message)}finally{N(!1)}},ti=async V=>{V.preventDefault(),Q(),N(!0);try{if(!s||s.length<10){h("Enter a valid mobile number"),N(!1);return}const D="+91"+s,ee=dm();if(!ee){h("reCAPTCHA not initialized. Please refresh and try again."),N(!1);return}const _e=await xp(Ps,D,ee);Dt.current=_e,p(!0),d("OTP sent to your phone number")}catch(D){console.error("Phone signup error:",D),D.code==="auth/invalid-phone-number"?h("Invalid phone number format"):D.code==="auth/too-many-requests"?h("Too many attempts. Please try again later."):h(D.message||"Failed to send OTP")}finally{N(!1)}},tt=async V=>{V.preventDefault(),Q(),N(!0);try{if(!g||g.length<6){h("Enter a valid 6-digit OTP"),N(!1);return}const ee=(await Dt.current.confirm(g)).user,_e={id:ee.uid,email:ee.email||"Not provided",mobile:s,name:s,tokenCount:0,maxTokens:10,photoURL:ee.photoURL||null},at=await ze(ee.uid,_e,"patient");d("Account created successfully!"),setTimeout(()=>{t("phone",s,at)},1e3),r(""),k(""),p(!1)}catch(D){console.error("OTP verification error:",D),h("Invalid OTP. Please try again.")}finally{N(!1)}},On=async V=>{V.preventDefault(),Q(),N(!0);try{if(!s||s.length<10){h("Enter a valid mobile number"),N(!1);return}const D="+91"+s,ee=dm();if(!ee){h("reCAPTCHA not initialized. Please refresh and try again."),N(!1);return}const _e=await xp(Ps,D,ee);Dt.current=_e,p(!0),d("OTP sent to your phone number")}catch(D){console.error("Phone login error:",D),D.code==="auth/invalid-phone-number"?h("Invalid phone number format"):D.code==="auth/too-many-requests"?h("Too many attempts. Please try again later."):h(D.message||"Failed to send OTP")}finally{N(!1)}},Ln=async()=>{Q(),N(!0);try{const D=(await LC(Ps,HI)).user;let ee=await Me(D.uid);if(!ee){const _e={id:D.uid,email:D.email,mobile:s||"Not provided",name:D.displayName||"Google User",tokenCount:0,maxTokens:10,photoURL:D.photoURL||null};ee=await ze(D.uid,_e,"patient")}d("Logged in with Google successfully!"),setTimeout(()=>{t(D.email,s,ee)},1e3)}catch(V){console.error("Google login error:",V),V.code==="auth/popup-closed-by-user"?h("Login popup was closed"):h(V.message)}finally{N(!1)}},sr=async V=>{V.preventDefault(),Q(),N(!0);try{const D="admin@hospital.com",ee="admin123456",_e="pharma@hospital.com",at="pharma123456";if(e===D&&Y===ee){const Es={id:"admin-001",email:e,name:"Hospital Admin",role:"admin",mobile:s||"Not provided",createdAt:new Date().toISOString(),tokenCount:0,maxTokens:100,photoURL:null};d("Admin login successful!"),setTimeout(()=>{t(e,s,Es)},1e3),n(""),Ee(""),r("")}else if(e===_e&&Y===at){const Es={id:"pharma-001",email:e,name:"Pharmacy Owner",role:"pharmaowner",mobile:s||"Not provided",createdAt:new Date().toISOString(),photoURL:null};d("Pharmacy login successful!"),setTimeout(()=>{t(e,s,Es)},1e3),n(""),Ee(""),r("")}else h("Invalid admin credentials")}catch(D){console.error("Admin login error:",D),h(D.message)}finally{N(!1)}},ln=async V=>{V.preventDefault(),Q(),N(!0);try{if(!e){h("Please enter your email address"),N(!1);return}await sC(Ps,e),d("Password reset email sent! Check your inbox."),j(!1),n("")}catch(D){console.error("Password reset error:",D),D.code==="auth/user-not-found"?h("Email not found"):h(D.message)}finally{N(!1)}};return a.jsxs("div",{className:"login-container",children:[a.jsx(Uy,{location:"login"}),a.jsxs("div",{className:"login-card",children:[a.jsx("h1",{children:" Token Generator"}),!X&&!b&&a.jsxs("div",{className:"user-type-selector",children:[a.jsx("button",{type:"button",className:"user-type-btn",onClick:()=>K(!1),children:" Patient"}),a.jsx("button",{type:"button",className:"user-type-btn",onClick:()=>K(!0),children:" Admin"})]}),a.jsx("p",{className:"subtitle",children:b?"Reset your password":X?"Admin Login":_?"Create your account":"Login to your account"}),u&&a.jsxs("div",{className:"error-message",children:[" ",u]}),f&&a.jsxs("div",{className:"success-message",children:[" ",f]}),X&&!b?a.jsxs("form",{onSubmit:sr,children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"admin-email",children:"Admin Email"}),a.jsx("input",{id:"admin-email",type:"email",placeholder:"Enter admin email",value:e,onChange:V=>n(V.target.value),required:!0})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"admin-password",children:"Admin Password"}),a.jsx("input",{id:"admin-password",type:"password",placeholder:"Enter admin password",value:Y,onChange:V=>Ee(V.target.value),required:!0})]}),a.jsx("button",{type:"submit",className:"submit-btn",disabled:C,children:C?"Logging in...":"Admin Login"}),a.jsx("button",{type:"button",className:"toggle-btn",onClick:()=>{K(!1),Q(),n(""),Ee("")},children:"Back to Patient Login"})]}):b?a.jsxs("form",{onSubmit:ln,children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"reset-email",children:"Email Address"}),a.jsx("input",{id:"reset-email",type:"email",placeholder:"Enter your email",value:e,onChange:V=>n(V.target.value)})]}),a.jsx("button",{type:"submit",className:"submit-btn",disabled:C,children:C?"Sending...":"Send Reset Email"}),a.jsx("button",{type:"button",className:"toggle-btn",onClick:()=>{j(!1),Q(),n("")},children:"Back to Login"})]}):_?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"auth-method-selector",children:[a.jsx("button",{type:"button",className:`method-btn ${S==="email"?"active":""}`,onClick:()=>{w("email"),p(!1),Q()},children:" Email"}),a.jsx("button",{type:"button",className:`method-btn ${S==="phone"?"active":""}`,onClick:()=>{w("phone"),p(!1),Q()},children:" Phone"})]}),S==="email"&&a.jsx("form",{onSubmit:L?xs:ks,children:L?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"otp-verification-box",children:[a.jsxs("p",{className:"otp-message",children:[" OTP sent to ",a.jsx("strong",{children:e})]}),a.jsx("p",{className:"otp-subtext",children:"Enter the 6-digit code sent to your email"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"email-otp",children:"Enter OTP"}),a.jsx("input",{id:"email-otp",type:"text",placeholder:"6-digit OTP",value:se,onChange:V=>fe(V.target.value.slice(0,6)),maxLength:"6",required:!0})]}),a.jsx("button",{type:"submit",className:"submit-btn",disabled:C,children:C?"Verifying...":"Verify OTP & Create Account"}),a.jsx("button",{type:"button",className:"toggle-btn",onClick:()=>{ve(!1),fe(""),U(null),re(null),R(null),Q()},children:"Change Email"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"signup-email",children:"Email Address"}),a.jsx("input",{id:"signup-email",type:"email",placeholder:"Enter your email",value:e,onChange:V=>n(V.target.value),required:!0,disabled:L})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"signup-mobile",children:"Mobile Number (Optional)"}),a.jsx("input",{id:"signup-mobile",type:"tel",placeholder:"10-digit mobile number",value:s,onChange:V=>r(V.target.value.slice(0,10)),maxLength:"10",disabled:L})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"signup-password",children:"Password"}),a.jsx("input",{id:"signup-password",type:"password",placeholder:"At least 6 characters",value:i,onChange:V=>o(V.target.value),required:!0,disabled:L})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"confirm-password",children:"Confirm Password"}),a.jsx("input",{id:"confirm-password",type:"password",placeholder:"Re-enter your password",value:l,onChange:V=>c(V.target.value),required:!0,disabled:L})]}),a.jsx("button",{type:"submit",className:"submit-btn",disabled:C,children:C?"Sending OTP...":"Send OTP to Email"})]})}),S==="phone"&&a.jsxs("form",{onSubmit:m?tt:ti,children:[m?a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"otp",children:"Enter OTP"}),a.jsx("input",{id:"otp",type:"text",placeholder:"6-digit OTP",value:g,onChange:V=>k(V.target.value.slice(0,6)),maxLength:"6",required:!0})]}):a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"phone",children:"Mobile Number"}),a.jsxs("div",{className:"phone-input-wrapper",children:[a.jsx("span",{className:"country-code",children:"+91"}),a.jsx("input",{id:"phone",type:"tel",placeholder:"10-digit mobile number",value:s,onChange:V=>r(V.target.value.slice(0,10)),maxLength:"10",required:!0})]})]}),a.jsx("div",{id:"recaptcha-container"}),a.jsx("button",{type:"submit",className:"submit-btn",disabled:C,children:C?m?"Verifying OTP...":"Sending OTP...":m?"Verify OTP":"Send OTP"}),m&&a.jsx("button",{type:"button",className:"toggle-btn",onClick:()=>{p(!1),k(""),Q()},children:"Change Number"})]})]}):a.jsxs("form",{onSubmit:S==="phone"?On:vt,children:[S==="email"?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"login-email",children:"Email Address"}),a.jsx("input",{id:"login-email",type:"email",placeholder:"Enter your email",value:e,onChange:V=>n(V.target.value),required:!0})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"login-password",children:"Password"}),a.jsx("input",{id:"login-password",type:"password",placeholder:"Enter your password",value:i,onChange:V=>o(V.target.value),required:!0})]})]}):a.jsxs(a.Fragment,{children:[m?a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"login-otp",children:"Enter OTP"}),a.jsx("input",{id:"login-otp",type:"text",placeholder:"6-digit OTP",value:g,onChange:V=>k(V.target.value.slice(0,6)),maxLength:"6",required:!0})]}):a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"login-phone",children:"Mobile Number"}),a.jsxs("div",{className:"phone-input-wrapper",children:[a.jsx("span",{className:"country-code",children:"+91"}),a.jsx("input",{id:"login-phone",type:"tel",placeholder:"10-digit mobile number",value:s,onChange:V=>r(V.target.value.slice(0,10)),maxLength:"10",required:!0})]})]}),a.jsx("div",{id:"recaptcha-container"})]}),a.jsx("button",{type:"submit",className:"submit-btn",disabled:C,children:C?S==="phone"?m?"Verifying OTP...":"Sending OTP...":"Logging in...":S==="phone"?m?"Verify OTP":"Send OTP":"Login"}),S==="phone"&&m&&a.jsx("button",{type:"button",className:"toggle-btn",onClick:()=>{p(!1),k(""),Q()},children:"Change Number"}),S==="email"&&a.jsx("button",{type:"button",className:"forgot-password-btn",onClick:()=>{j(!0),Q()},children:"Forgot Password?"})]}),!b&&!X&&a.jsxs("button",{type:"button",className:"google-btn",onClick:Ln,disabled:C,children:[" ",C?"Processing...":"Login with Google"]}),!b&&!X&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"login-method-selector",children:[a.jsx("button",{type:"button",className:`method-btn ${S==="email"?"active":""}`,onClick:()=>{w("email"),p(!1),Q()},children:" Email"}),a.jsx("button",{type:"button",className:`method-btn ${S==="phone"?"active":""}`,onClick:()=>{w("phone"),p(!1),Q()},children:" Phone OTP"})]}),a.jsx("div",{className:"toggle-auth",children:_?a.jsxs("p",{children:["Already have an account?"," ",a.jsx("button",{type:"button",className:"toggle-btn",onClick:()=>{v(!1),Q(),n(""),r(""),o(""),c("")},children:"Login"})]}):a.jsxs("p",{children:["Don't have an account?"," ",a.jsx("button",{type:"button",className:"toggle-btn",onClick:()=>{v(!0),w("email"),p(!1),Q(),n(""),r(""),o(""),c("")},children:"Sign Up"})]})})]})]})]})}let ta;const qI=new Uint8Array(16);function KI(){if(!ta&&(ta=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ta))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ta(qI)}const Ye=[];for(let t=0;t<256;++t)Ye.push((t+256).toString(16).slice(1));function YI(t,e=0){return Ye[t[e+0]]+Ye[t[e+1]]+Ye[t[e+2]]+Ye[t[e+3]]+"-"+Ye[t[e+4]]+Ye[t[e+5]]+"-"+Ye[t[e+6]]+Ye[t[e+7]]+"-"+Ye[t[e+8]]+Ye[t[e+9]]+"-"+Ye[t[e+10]]+Ye[t[e+11]]+Ye[t[e+12]]+Ye[t[e+13]]+Ye[t[e+14]]+Ye[t[e+15]]}const QI=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),hm={randomUUID:QI};function fm(t,e,n){if(hm.randomUUID&&!t)return hm.randomUUID();t=t||{};const s=t.random||(t.rng||KI)();return s[6]=s[6]&15|64,s[8]=s[8]&63|128,YI(s)}const pm=()=>`TOKEN_${Date.now()}_${Math.random().toString(36).substr(2,9).toUpperCase()}`;function XI({userInfo:t,onLogout:e}){const[n,s]=E.useState([]),[r,i]=E.useState(null),[o,l]=E.useState(10),[c,u]=E.useState({totalIssued:0,tokenLimitReached:!1});E.useEffect(()=>{if((t==null?void 0:t.tokenCount)>0){const w=Array(t.tokenCount).fill(null).map(()=>({id:fm(),token:pm(),createdAt:new Date,status:"active"}));s(w),w.length>0&&i(w[w.length-1]),u({totalIssued:w.length,tokenLimitReached:w.length>=o})}},[t]);const h=()=>{if(n.length>=o){u(m=>({...m,tokenLimitReached:!0}));return}const w={id:fm(),token:pm(),createdAt:new Date,status:"active"};s([...n,w]),i(w),u({totalIssued:n.length+1,tokenLimitReached:n.length+1>=o})},f=w=>{s(n.map(m=>m.id===w?{...m,status:"revoked"}:m))},d=w=>{const m=n.filter(p=>p.id!==w);s(m),(r==null?void 0:r.id)===w&&i(m.length>0?m[m.length-1]:null),u({totalIssued:m.length,tokenLimitReached:m.length>=o})},_=w=>{navigator.clipboard.writeText(w),alert("Token copied to clipboard!")},v=n.filter(w=>w.status==="active"),S=n.filter(w=>w.status==="revoked");return a.jsxs("div",{className:"dashboard-container",children:[a.jsx("header",{className:"dashboard-header",children:a.jsxs("div",{className:"header-content",children:[a.jsxs("div",{children:[a.jsx("h1",{children:" Token Management Dashboard"}),a.jsxs("p",{className:"welcome-text",children:["Welcome, ",a.jsx("strong",{children:(t==null?void 0:t.name)||(t==null?void 0:t.email)})]})]}),a.jsx("button",{className:"logout-btn",onClick:e,children:"Logout"})]})}),a.jsxs("div",{className:"dashboard-content",children:[a.jsxs("div",{className:"user-info-card",children:[a.jsx("h3",{children:"User Information"}),a.jsxs("div",{className:"info-grid",children:[a.jsxs("div",{className:"info-item",children:[a.jsx("label",{children:"Email"}),a.jsx("p",{children:t==null?void 0:t.email})]}),a.jsxs("div",{className:"info-item",children:[a.jsx("label",{children:"Mobile"}),a.jsx("p",{children:t==null?void 0:t.mobile})]}),a.jsxs("div",{className:"info-item",children:[a.jsx("label",{children:"User ID"}),a.jsx("p",{children:t==null?void 0:t.id})]}),a.jsxs("div",{className:"info-item",children:[a.jsx("label",{children:"Member Since"}),a.jsx("p",{children:new Date(t==null?void 0:t.createdAt).toLocaleDateString()})]})]})]}),r&&a.jsxs("div",{className:"current-token-card",children:[a.jsx("h3",{children:" Current Running Token"}),a.jsxs("div",{className:"token-display",children:[a.jsxs("div",{className:"token-content",children:[a.jsx("p",{className:"token-value",children:r.token}),a.jsxs("div",{className:"token-meta",children:[a.jsxs("span",{className:"token-status",children:["Status: ",a.jsx("strong",{className:"status-active",children:"Active"})]}),a.jsxs("span",{className:"token-time",children:["Generated: ",r.createdAt.toLocaleTimeString()]})]})]}),a.jsx("button",{className:"copy-btn",onClick:()=>_(r.token),children:" Copy"})]})]}),a.jsxs("div",{className:"stats-container",children:[a.jsxs("div",{className:"stat-card",children:[a.jsx("div",{className:"stat-value",children:v.length}),a.jsx("div",{className:"stat-label",children:"Active Tokens"})]}),a.jsxs("div",{className:"stat-card",children:[a.jsx("div",{className:"stat-value",children:S.length}),a.jsx("div",{className:"stat-label",children:"Revoked Tokens"})]}),a.jsxs("div",{className:"stat-card",children:[a.jsx("div",{className:"stat-value",children:o-v.length}),a.jsx("div",{className:"stat-label",children:"Remaining Quota"})]}),a.jsxs("div",{className:`stat-card ${c.tokenLimitReached?"limit-reached":""}`,children:[a.jsxs("div",{className:"stat-value",children:[v.length,"/",o]}),a.jsx("div",{className:"stat-label",children:"Usage"})]})]}),a.jsxs("div",{className:"action-section",children:[a.jsx("h3",{children:" Issue New Token"}),c.tokenLimitReached?a.jsxs("div",{className:"limit-warning",children:[a.jsxs("p",{children:[" ",a.jsx("strong",{children:"Token Limit Reached!"})]}),a.jsxs("p",{children:["You have reached the maximum limit of ",o," tokens. Revoke or delete some tokens to issue new ones."]})]}):a.jsx("button",{className:"issue-token-btn",onClick:h,children:"+ Generate Next Token"})]}),a.jsxs("div",{className:"tokens-section",children:[a.jsx("h3",{children:" All Tokens"}),v.length>0&&a.jsxs("div",{className:"tokens-category",children:[a.jsxs("h4",{children:["Active Tokens (",v.length,")"]}),a.jsx("div",{className:"tokens-list",children:v.map((w,m)=>a.jsxs("div",{className:"token-item active",children:[a.jsxs("div",{className:"token-info",children:[a.jsxs("div",{className:"token-number",children:["#",m+1]}),a.jsxs("div",{className:"token-details",children:[a.jsx("p",{className:"token-text",children:w.token}),a.jsx("p",{className:"token-time",children:w.createdAt.toLocaleString()})]})]}),a.jsxs("div",{className:"token-actions",children:[a.jsx("button",{className:"action-btn copy-small",onClick:()=>_(w.token),title:"Copy token",children:""}),a.jsx("button",{className:"action-btn revoke-btn",onClick:()=>f(w.id),title:"Revoke token",children:""}),a.jsx("button",{className:"action-btn delete-btn",onClick:()=>d(w.id),title:"Delete token",children:""})]})]},w.id))})]}),S.length>0&&a.jsxs("div",{className:"tokens-category",children:[a.jsxs("h4",{children:["Revoked Tokens (",S.length,")"]}),a.jsx("div",{className:"tokens-list",children:S.map((w,m)=>a.jsxs("div",{className:"token-item revoked",children:[a.jsxs("div",{className:"token-info",children:[a.jsxs("div",{className:"token-number",children:["#",n.indexOf(w)+1]}),a.jsxs("div",{className:"token-details",children:[a.jsx("p",{className:"token-text",children:w.token}),a.jsx("p",{className:"token-time",children:w.createdAt.toLocaleString()})]})]}),a.jsx("div",{className:"token-actions",children:a.jsx("button",{className:"action-btn delete-btn",onClick:()=>d(w.id),title:"Delete token",children:""})})]},w.id))})]}),n.length===0&&a.jsx("div",{className:"empty-state",children:a.jsx("p",{children:'No tokens generated yet. Click "Generate Next Token" to create one.'})})]})]})]})}function JI({tokenRequests:t,userInfo:e,onLogout:n}){const[s,r]=E.useState(t),[i,o]=E.useState(null),[l,c]=E.useState(0),[u,h]=E.useState({totalRequests:t.length,waitingCount:t.filter(p=>p.status==="waiting").length,calledCount:t.filter(p=>p.status==="called").length,completedCount:0});E.useEffect(()=>{f()},[s]);const f=()=>{const p=s.filter(C=>C.status==="waiting").length,g=s.filter(C=>C.status==="called").length,k=s.filter(C=>C.status==="completed").length;h({totalRequests:s.length,waitingCount:p,calledCount:g,completedCount:k})},d=()=>{const p=s.find(g=>g.status==="waiting");if(p){i&&r(s.map(k=>k.id===i.id?{...k,status:"completed",completedAt:new Date}:k));const g=s.map(k=>k.id===p.id?{...k,status:"called",calledAt:new Date}:k);r(g),o(p)}},_=p=>{r(s.map(g=>g.id===p?{...g,status:"completed",completedAt:new Date}:g)),(i==null?void 0:i.id)===p&&o(null)},v=p=>{r(s.map(g=>g.id===p?{...g,status:"no-show"}:g)),(i==null?void 0:i.id)===p&&o(null)},S=p=>{r(s.filter(g=>g.id!==p))},w=s.filter(p=>p.status==="waiting"),m=s.filter(p=>p.status==="completed");return a.jsxs("div",{className:"admin-panel",children:[a.jsxs("header",{className:"admin-header",children:[a.jsxs("div",{children:[a.jsx("h1",{children:" Clinic Admin Panel"}),a.jsx("p",{children:"Manage patient queue and tokens"})]}),a.jsx("button",{className:"logout-btn",onClick:n,children:"Logout"})]}),a.jsxs("div",{className:"admin-content",children:[a.jsxs("div",{className:"stats-row",children:[a.jsxs("div",{className:"stat-box primary",children:[a.jsx("div",{className:"stat-number",children:u.totalRequests}),a.jsx("div",{className:"stat-label",children:"Total Requests"})]}),a.jsxs("div",{className:"stat-box warning",children:[a.jsx("div",{className:"stat-number",children:u.waitingCount}),a.jsx("div",{className:"stat-label",children:"Waiting"})]}),a.jsxs("div",{className:"stat-box info",children:[a.jsx("div",{className:"stat-number",children:u.calledCount}),a.jsx("div",{className:"stat-label",children:"Being Served"})]}),a.jsxs("div",{className:"stat-box success",children:[a.jsx("div",{className:"stat-number",children:u.completedCount}),a.jsx("div",{className:"stat-label",children:"Completed"})]})]}),a.jsxs("div",{className:"currently-serving-section",children:[a.jsx("h3",{children:" Currently Serving"}),i?a.jsxs("div",{className:"serving-card",children:[a.jsxs("div",{className:"serving-content",children:[a.jsx("div",{className:"token-display",children:a.jsx("span",{className:"serving-token",children:i.tokenNumber})}),a.jsxs("div",{className:"patient-details",children:[a.jsx("p",{children:a.jsx("strong",{children:i.patientName})}),a.jsxs("p",{className:"contact",children:[" ",i.patientPhone]}),i.symptoms&&a.jsxs("p",{className:"symptoms",children:["Reason: ",i.symptoms]})]})]}),a.jsxs("div",{className:"serving-actions",children:[a.jsx("button",{className:"complete-btn",onClick:()=>_(i.id),children:" Mark Complete"}),a.jsx("button",{className:"noshow-btn",onClick:()=>v(i.id),children:" No Show"})]})]}):a.jsxs("div",{className:"empty-serving",children:[a.jsx("p",{children:"No patient is being served"}),a.jsx("button",{className:"call-next-btn",onClick:d,children:" Call Next Patient"})]}),i&&a.jsx("button",{className:"call-next-btn",onClick:d,children:" Call Next Patient"})]}),a.jsxs("div",{className:"waiting-queue-section",children:[a.jsxs("h3",{children:[" Waiting Queue (",w.length,")"]}),w.length>0?a.jsx("div",{className:"queue-list",children:w.map((p,g)=>a.jsxs("div",{className:"queue-item",children:[a.jsx("div",{className:"queue-position",children:a.jsx("span",{className:"position-number",children:g+1})}),a.jsxs("div",{className:"queue-info",children:[a.jsx("p",{className:"queue-token",children:p.tokenNumber}),a.jsx("p",{className:"queue-name",children:p.patientName}),a.jsxs("p",{className:"queue-phone",children:[" ",p.patientPhone]}),p.symptoms&&a.jsxs("p",{className:"queue-symptoms",children:["Reason: ",p.symptoms]})]}),a.jsxs("div",{className:"queue-time",children:[a.jsxs("p",{className:"wait-time",children:[g*5," min wait"]}),a.jsx("small",{children:p.requestedAt.toLocaleTimeString()})]}),a.jsxs("div",{className:"queue-actions",children:[a.jsx("button",{className:"call-btn",onClick:()=>{i&&_(i.id),r(s.map(k=>k.id===p.id?{...k,status:"called",calledAt:new Date}:k)),o(p)},children:" Call"}),a.jsx("button",{className:"cancel-btn",onClick:()=>S(p.id),children:""})]})]},p.id))}):a.jsx("div",{className:"empty-queue",children:a.jsx("p",{children:"No patients waiting"})})]}),a.jsxs("div",{className:"completed-section",children:[a.jsxs("h3",{children:[" Completed (",m.length,")"]}),m.length>0?a.jsx("div",{className:"completed-list",children:m.slice(-5).reverse().map(p=>{var g;return a.jsxs("div",{className:"completed-item",children:[a.jsx("div",{className:"completed-token",children:p.tokenNumber}),a.jsxs("div",{className:"completed-info",children:[a.jsx("p",{children:p.patientName}),a.jsx("small",{children:(g=p.completedAt)==null?void 0:g.toLocaleTimeString()})]})]},p.id)})}):a.jsx("p",{className:"no-data",children:"No completed patients yet"})]})]})]})}function ZI({adminUser:t}){const[e,n]=E.useState([]),[s,r]=E.useState([]),[i,o]=E.useState([]),[l,c]=E.useState([]),[u,h]=E.useState([]),[f,d]=E.useState(!1),[_,v]=E.useState(""),[S,w]=E.useState(""),[m,p]=E.useState("patients"),[g,k]=E.useState(!1),[C,N]=E.useState(!1),[b,j]=E.useState(!1),[X,K]=E.useState(!1),[Y,Ee]=E.useState({email:"",mobile:"",name:"",role:"patient"}),[L,ve]=E.useState({title:"",description:""}),[se,fe]=E.useState({title:"",description:"",image:"",link:"",displayLocation:"all"}),[G,R]=E.useState({name:"",ageGroup:"0-3",description:"",dueDate:"",vaccines:""}),[T,U]=E.useState({tokensPerSlot:50,slotResetTime:"09:00",maxTokensPerDay:150}),[$,re]=E.useState([]),[Dt,Q]=E.useState(!1),[ze,Me]=E.useState("create-slot"),[$e,Ss]=E.useState({name:"Morning",startTime:"09:00",endTime:"12:00",tokensAllocated:50}),[ks,xs]=E.useState([]),[vt,ti]=E.useState(null),[tt,On]=E.useState(null),[Ln,sr]=E.useState(""),[ln,V]=E.useState("Morning"),D=async()=>{d(!0),v("");try{const y=B(H,"news"),A=await we(y);if(A.exists()){const F=A.val(),he=Object.entries(F).map(([ke,be])=>({...be,dbId:ke}));o(he.sort((ke,be)=>new Date(be.createdAt)-new Date(ke.createdAt)))}else o([])}catch(y){console.error("Error fetching news:",y),v("Failed to fetch news")}finally{d(!1)}},ee=async y=>{y.preventDefault(),v(""),w(""),d(!0);try{if(!L.title||!L.description){v("All fields are required"),d(!1);return}const A=`news-${Date.now()}`,F=B(H,`news/${A}`);await ct(F,{title:L.title,description:L.description,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),w("News published successfully!"),ve({title:"",description:""}),N(!1),D()}catch(A){console.error("Error adding news:",A),v("Failed to publish news")}finally{d(!1)}},_e=async(y,A)=>{if(window.confirm(`Are you sure you want to delete "${A}"?`)){v(""),w(""),d(!0);try{const F=B(H,`news/${y}`);await Ls(F),w("News deleted successfully"),D()}catch(F){console.error("Error deleting news:",F),v("Failed to delete news")}finally{d(!1)}}},at=async()=>{d(!0),v("");try{const y=B(H,"ads"),A=await we(y);if(A.exists()){const F=A.val(),he=Object.entries(F).map(([ke,be])=>({...be,dbId:ke}));c(he.sort((ke,be)=>new Date(be.createdAt)-new Date(ke.createdAt)))}else c([])}catch(y){console.error("Error fetching ads:",y),v("Failed to fetch ads")}finally{d(!1)}},Es=async y=>{y.preventDefault(),v(""),w(""),d(!0);try{if(!se.title||!se.description){v("Title and description are required"),d(!1);return}const A=`ad-${Date.now()}`,F=B(H,`ads/${A}`);await ct(F,{title:se.title,description:se.description,image:se.image,link:se.link,displayLocation:se.displayLocation,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),active:!0}),w("Advertisement posted successfully!"),fe({title:"",description:"",image:"",link:"",displayLocation:"all"}),K(!1),at()}catch(A){console.error("Error adding ad:",A),v("Failed to post advertisement")}finally{d(!1)}},Bl=async(y,A)=>{if(window.confirm("Are you sure you want to delete this ad?")){v(""),w(""),d(!0);try{const F=B(H,`ads/${y}`);await Ls(F),w("Advertisement deleted successfully"),at()}catch(F){console.error("Error deleting ad:",F),v("Failed to delete advertisement")}finally{d(!1)}}},x=async y=>{if(y.preventDefault(),!Ln.trim()){v("Please enter a token number");return}d(!0),v(""),w("");try{const A=new Date().toISOString().split("T")[0],F={number:parseInt(Ln),type:"offline",slotName:ln,timestamp:new Date().toISOString()},he=B(H,`clinicStatus/${A}/currentToken`);await ct(he,F),w(`Offline token #${Ln} set as current. All patients updated in real-time.`),sr(""),On(F)}catch(A){console.error("Error setting offline token:",A),v("Failed to set offline token")}finally{d(!1)}},z=async y=>{if(!tt){v("No current token set. Please set a starting token.");return}d(!0),v(""),w("");try{const A=new Date().toISOString().split("T")[0],F={number:tt.number+1,type:y,slotName:tt.slotName,timestamp:new Date().toISOString()},he=B(H,`clinicStatus/${A}/currentToken`);await ct(he,F),On(F),w(`Token #${F.number} (${y}) called. Patients notified in real-time.`)}catch(A){console.error("Error calling next token:",A),v("Failed to call next token")}finally{d(!1)}},ie=async()=>{d(!0),v("");try{const y=B(H,"vaccineSchedules"),A=await we(y);if(A.exists()){const F=A.val(),he=Object.entries(F).map(([ke,be])=>({...be,dbId:ke}));h(he.sort((ke,be)=>{const Ot=parseInt(ke.ageGroup.split("-")[0]),ni=parseInt(be.ageGroup.split("-")[0]);return Ot-ni}))}else h([])}catch(y){console.error("Error fetching vaccine schedules:",y),v("Failed to fetch vaccine schedules")}finally{d(!1)}},le=async y=>{y.preventDefault(),v(""),w(""),d(!0);try{if(!G.name||!G.ageGroup||!G.vaccines){v("All fields are required"),d(!1);return}const A=`vaccine-${Date.now()}`,F=B(H,`vaccineSchedules/${A}`);await ct(F,{name:G.name,ageGroup:G.ageGroup,description:G.description,dueDate:G.dueDate,vaccines:G.vaccines,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),w("Vaccine schedule added successfully!"),R({name:"",ageGroup:"0-3",description:"",dueDate:"",vaccines:""}),j(!1),ie()}catch(A){console.error("Error adding vaccine schedule:",A),v("Failed to add vaccine schedule")}finally{d(!1)}},W=async(y,A)=>{if(window.confirm(`Are you sure you want to delete "${A}"?`)){v(""),w(""),d(!0);try{const F=B(H,`vaccineSchedules/${y}`);await Ls(F),w("Vaccine schedule deleted successfully"),ie()}catch(F){console.error("Error deleting vaccine schedule:",F),v("Failed to delete vaccine schedule")}finally{d(!1)}}},De=async()=>{try{const y=B(H,"config/tokenSettings"),A=await we(y);A.exists()&&U(A.val())}catch(y){console.error("Error fetching token config:",y)}},nt=async y=>{y.preventDefault(),v(""),w(""),d(!0);try{if(!T.tokensPerSlot||!T.slotResetTime){v("All fields are required"),d(!1);return}const A=B(H,"config/tokenSettings");await ct(A,{...T,lastUpdated:new Date().toISOString(),lastResetDate:new Date().toISOString().split("T")[0]}),w("Token configuration saved successfully"),Q(!1),De()}catch(A){console.error("Error saving token config:",A),v("Failed to save token configuration")}finally{d(!1)}},Ce=async()=>{try{const y=new Date().toISOString().split("T")[0],A=B(H,`tokenSlots/${y}`),F=await we(A);if(F.exists()){const he=F.val(),ke=Object.entries(he).map(([be,Ot])=>({id:be,...Ot}));re(ke.sort((be,Ot)=>be.startTime.localeCompare(Ot.startTime)))}else re([])}catch(y){console.error("Error fetching token slots:",y)}},Gt=async()=>{v(""),w(""),d(!0);try{const y=new Date().toISOString().split("T")[0],A=[{name:"Morning",startTime:"09:00",endTime:"12:00",tokensAllocated:50,tokensAvailable:50,tokensUsed:0},{name:"Afternoon",startTime:"14:00",endTime:"17:00",tokensAllocated:50,tokensAvailable:50,tokensUsed:0},{name:"Evening",startTime:"17:00",endTime:"20:00",tokensAllocated:50,tokensAvailable:50,tokensUsed:0}];for(let F=0;F<A.length;F++){const he=B(H,`tokenSlots/${y}/slot${F+1}`);await ct(he,{...A[F],createdAt:new Date().toISOString()})}w("Token slots created successfully for today"),Ce()}catch(y){console.error("Error creating token slots:",y),v("Failed to create token slots")}finally{d(!1)}},Be=async y=>{try{const A=new Date().toISOString().split("T")[0],F=B(H,`tokenSlots/${A}/${y}/tokens`),he=await we(F);if(he.exists()){const ke=he.val(),be=Object.entries(ke).map(([Ot,ni])=>({id:Ot,...ni}));xs(be.sort((Ot,ni)=>(Ot.tokenNumber||0)-(ni.tokenNumber||0)))}else xs([])}catch(A){console.error("Error fetching slot tokens:",A)}},Mn=async(y,A)=>{if(window.confirm("Mark this token as consulted and cleared?")){v(""),w(""),d(!0);try{const F=new Date().toISOString().split("T")[0],he=B(H,`tokenSlots/${F}/${y}/tokens/${A}`);await yr(he,{status:"cleared",clearedAt:new Date().toISOString()});const ke=B(H,`tokenSlots/${F}/${y}`),be=await we(ke);if(be.exists()){const Ot=be.val();await yr(ke,{tokensUsed:(Ot.tokensUsed||0)+1,tokensAvailable:Ot.tokensAvailable-1})}w("Token cleared successfully"),Be(y),Ce()}catch(F){console.error("Error clearing token:",F),v("Failed to clear token")}finally{d(!1)}}},qt=async()=>{d(!0),v("");try{const y=B(H,"users"),A=await we(y);if(A.exists()){const F=A.val(),he=Object.values(F).filter(ke=>ke.role==="patient");n(he)}else n([])}catch(y){console.error("Error fetching patients:",y),v("Failed to fetch patients")}finally{d(!1)}},Kt=async()=>{d(!0),v("");try{const y=B(H,"users"),A=await we(y);if(A.exists()){const F=A.val(),he=Object.entries(F).map(([ke,be])=>({...be,dbId:ke}));r(he)}else r([])}catch(y){console.error("Error fetching users:",y),v("Failed to fetch users")}finally{d(!1)}};E.useEffect(()=>{m==="patients"?qt():m==="manage-users"?Kt():m==="news"?D():m==="ads"?at():m==="vaccines"?ie():m==="token-config"&&(De(),Ce(),Fn())},[m]);const Fn=async()=>{try{const y=new Date().toISOString().split("T")[0],A=B(H,`clinicStatus/${y}/currentToken`),F=await we(A);F.exists()?On(F.val()):On(null)}catch(y){console.error("Error fetching current token:",y)}},Yt=async y=>{y.preventDefault(),v(""),w(""),d(!0);try{if(!Y.email||!Y.mobile||!Y.name){v("All fields are required"),d(!1);return}const A=`user-${Date.now()}`,F={id:A,email:Y.email,mobile:Y.mobile,name:Y.name,role:Y.role,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),tokenCount:0,maxTokens:Y.role==="admin"?100:10},he=B(H,`users/${A}`);await ct(he,F),w(`User "${Y.name}" added successfully as ${Y.role}`),Ee({email:"",mobile:"",name:"",role:"patient"}),k(!1),m==="patients"?qt():Kt()}catch(A){console.error("Error adding user:",A),v("Failed to add user")}finally{d(!1)}},Hl=async(y,A)=>{v(""),w(""),d(!0);try{const F=B(H,`users/${y}`),he=await we(F);if(he.exists()){const ke=he.val();await ct(F,{...ke,role:A,updatedAt:new Date().toISOString()}),w(`User role updated to ${A}`),Kt()}}catch(F){console.error("Error updating role:",F),v("Failed to update user role")}finally{d(!1)}},Gl=async(y,A)=>{if(window.confirm(`Are you sure you want to delete ${A}?`)){v(""),w(""),d(!0);try{const F=B(H,`users/${y}`);await Ls(F),w(`User "${A}" deleted successfully`),m==="patients"?qt():Kt()}catch(F){console.error("Error deleting user:",F),v("Failed to delete user")}finally{d(!1)}}},Un=()=>{v(""),w("")};return a.jsxs("div",{className:"admin-panel",children:[a.jsxs("div",{className:"admin-header",children:[a.jsx("h2",{children:" Admin Dashboard"}),a.jsxs("p",{children:["Welcome, ",t.name]})]}),_&&a.jsxs("div",{className:"error-message",onClick:Un,children:[" ",_]}),S&&a.jsxs("div",{className:"success-message",onClick:Un,children:[" ",S]}),a.jsxs("div",{className:"admin-tabs",children:[a.jsxs("button",{className:`tab-btn ${m==="patients"?"active":""}`,onClick:()=>p("patients"),children:[" Registered Patients (",e.length,")"]}),a.jsx("button",{className:`tab-btn ${m==="manage-users"?"active":""}`,onClick:()=>p("manage-users"),children:" Manage Users"}),a.jsxs("button",{className:`tab-btn ${m==="news"?"active":""}`,onClick:()=>p("news"),children:[" News & Announcements (",i.length,")"]}),a.jsxs("button",{className:`tab-btn ${m==="ads"?"active":""}`,onClick:()=>p("ads"),children:[" Advertisements (",l.length,")"]}),a.jsxs("button",{className:`tab-btn ${m==="vaccines"?"active":""}`,onClick:()=>p("vaccines"),children:[" Vaccine Schedules (",u.length,")"]}),a.jsx("button",{className:`tab-btn ${m==="token-config"?"active":""}`,onClick:()=>p("token-config"),children:" Token Configuration"})]}),m==="patients"&&a.jsxs("div",{className:"tab-content",children:[a.jsx("h3",{children:" Patient List"}),f?a.jsx("p",{className:"loading",children:"Loading patients..."}):e.length>0?a.jsx("div",{className:"patients-table-wrapper",children:a.jsxs("table",{className:"patients-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Name"}),a.jsx("th",{children:"Email"}),a.jsx("th",{children:"Mobile"}),a.jsx("th",{children:"Joined Date"}),a.jsx("th",{children:"Token Count"})]})}),a.jsx("tbody",{children:e.map((y,A)=>a.jsxs("tr",{children:[a.jsx("td",{children:A+1}),a.jsx("td",{children:y.name}),a.jsx("td",{children:y.email}),a.jsx("td",{children:y.mobile}),a.jsx("td",{children:new Date(y.createdAt).toLocaleDateString()}),a.jsx("td",{children:a.jsxs("span",{className:"token-badge",children:[y.tokenCount,"/",y.maxTokens]})})]},y.id))})]})}):a.jsx("p",{className:"no-data",children:"No patients registered yet"})]}),m==="manage-users"&&a.jsxs("div",{className:"tab-content",children:[a.jsxs("div",{className:"manage-users-header",children:[a.jsx("h3",{children:" Manage All Users"}),a.jsx("button",{className:"add-user-btn",onClick:()=>{k(!g),Un()},children:g?" Cancel":" Add New User"})]}),g&&a.jsxs("form",{className:"add-user-form",onSubmit:Yt,children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"new-email",children:"Email"}),a.jsx("input",{id:"new-email",type:"email",placeholder:"Enter email",value:Y.email,onChange:y=>Ee({...Y,email:y.target.value}),required:!0})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"new-mobile",children:"Mobile"}),a.jsx("input",{id:"new-mobile",type:"tel",placeholder:"10-digit mobile number",value:Y.mobile,onChange:y=>Ee({...Y,mobile:y.target.value.slice(0,10)}),maxLength:"10",required:!0})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"new-name",children:"Name"}),a.jsx("input",{id:"new-name",type:"text",placeholder:"Enter full name",value:Y.name,onChange:y=>Ee({...Y,name:y.target.value}),required:!0})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"new-role",children:"Role"}),a.jsxs("select",{id:"new-role",value:Y.role,onChange:y=>Ee({...Y,role:y.target.value}),children:[a.jsx("option",{value:"patient",children:"Patient"}),a.jsx("option",{value:"doctor",children:"Doctor"}),a.jsx("option",{value:"admin",children:"Admin"})]})]}),a.jsx("button",{type:"submit",className:"submit-btn",disabled:f,children:f?"Adding...":"Add User"})]}),f?a.jsx("p",{className:"loading",children:"Loading users..."}):s.length>0?a.jsx("div",{className:"users-table-wrapper",children:a.jsxs("table",{className:"users-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Name"}),a.jsx("th",{children:"Email"}),a.jsx("th",{children:"Mobile"}),a.jsx("th",{children:"Role"}),a.jsx("th",{children:"Joined"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:s.map((y,A)=>a.jsxs("tr",{children:[a.jsx("td",{children:A+1}),a.jsx("td",{children:y.name}),a.jsx("td",{children:y.email}),a.jsx("td",{children:y.mobile}),a.jsx("td",{children:a.jsxs("select",{value:y.role,onChange:F=>Hl(y.dbId,F.target.value),className:"role-select",disabled:f,children:[a.jsx("option",{value:"patient",children:"Patient"}),a.jsx("option",{value:"doctor",children:"Doctor"}),a.jsx("option",{value:"admin",children:"Admin"})]})}),a.jsx("td",{children:new Date(y.createdAt).toLocaleDateString()}),a.jsx("td",{children:a.jsx("button",{className:"delete-btn",onClick:()=>Gl(y.dbId,y.name),disabled:f,children:" Delete"})})]},y.dbId))})]})}):a.jsx("p",{className:"no-data",children:"No users found"})]}),m==="news"&&a.jsxs("div",{className:"tab-content",children:[a.jsxs("div",{className:"manage-users-header",children:[a.jsx("h3",{children:" News & Announcements"}),a.jsx("button",{className:"add-user-btn",onClick:()=>{N(!C),Un()},children:C?" Cancel":" Publish News"})]}),C&&a.jsxs("form",{className:"add-user-form",onSubmit:ee,children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"news-title",children:"Title"}),a.jsx("input",{id:"news-title",type:"text",placeholder:"News headline",value:L.title,onChange:y=>ve({...L,title:y.target.value}),required:!0})]}),a.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[a.jsx("label",{htmlFor:"news-description",children:"Description"}),a.jsx("textarea",{id:"news-description",placeholder:"News details and description",value:L.description,onChange:y=>ve({...L,description:y.target.value}),required:!0,style:{padding:"12px",border:"2px solid #e0e0e0",borderRadius:"8px",fontFamily:"inherit",fontSize:"1em",minHeight:"120px",resize:"vertical"}})]}),a.jsx("button",{type:"submit",className:"submit-btn",disabled:f,children:f?"Publishing...":"Publish News"})]}),f?a.jsx("p",{className:"loading",children:"Loading news..."}):i.length>0?a.jsx("div",{className:"news-admin-list",children:i.map(y=>a.jsxs("div",{className:"news-admin-item",children:[a.jsxs("div",{className:"news-admin-content",children:[a.jsx("h4",{children:y.title}),a.jsx("p",{children:y.description}),a.jsx("span",{className:"news-admin-date",children:new Date(y.createdAt).toLocaleString()})]}),a.jsx("button",{className:"delete-btn",onClick:()=>_e(y.dbId,y.title),disabled:f,children:" Delete"})]},y.dbId))}):a.jsx("p",{className:"no-data",children:"No news published yet"})]}),m==="ads"&&a.jsxs("div",{className:"tab-content",children:[a.jsxs("div",{className:"manage-users-header",children:[a.jsx("h3",{children:" Manage Advertisements"}),a.jsx("button",{className:"add-user-btn",onClick:()=>K(!X),children:X?" Cancel":" Post New Ad"})]}),X&&a.jsxs("form",{className:"add-user-form",onSubmit:Es,children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Ad Title *"}),a.jsx("input",{type:"text",placeholder:"Enter advertisement title",value:se.title,onChange:y=>fe({...se,title:y.target.value}),required:!0})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Description *"}),a.jsx("textarea",{placeholder:"Enter advertisement description",value:se.description,onChange:y=>fe({...se,description:y.target.value}),rows:"4",required:!0})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Image URL"}),a.jsx("input",{type:"url",placeholder:"Enter image URL",value:se.image,onChange:y=>fe({...se,image:y.target.value})})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Action Link"}),a.jsx("input",{type:"url",placeholder:"Enter link URL (optional)",value:se.link,onChange:y=>fe({...se,link:y.target.value})})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Display Location"}),a.jsxs("select",{value:se.displayLocation,onChange:y=>fe({...se,displayLocation:y.target.value}),children:[a.jsx("option",{value:"all",children:"Show on Login & Dashboard"}),a.jsx("option",{value:"login",children:"Show on Login Page Only"}),a.jsx("option",{value:"dashboard",children:"Show on Patient Dashboard Only"})]})]}),a.jsxs("div",{className:"form-actions",children:[a.jsx("button",{type:"submit",className:"submit-btn",disabled:f,children:f?"Posting...":"Post Advertisement"}),a.jsx("button",{type:"button",className:"cancel-btn",onClick:()=>{K(!1),fe({title:"",description:"",image:"",link:"",displayLocation:"all"})},children:"Cancel"})]})]}),l.length>0?a.jsx("div",{className:"news-admin-list",children:l.map(y=>a.jsxs("div",{className:"news-admin-item",children:[a.jsxs("div",{className:"news-admin-content",children:[a.jsx("h4",{children:y.title}),a.jsx("p",{children:y.description}),y.image&&a.jsxs("small",{children:[" Image: ",y.image]}),a.jsxs("div",{className:"ad-meta",children:[a.jsxs("span",{className:"ad-location",children:[" ",y.displayLocation==="all"?"Login & Dashboard":y.displayLocation==="login"?"Login Page":"Dashboard"]}),a.jsx("span",{className:"news-admin-date",children:new Date(y.createdAt).toLocaleString()})]})]}),a.jsx("button",{className:"delete-btn",onClick:()=>Bl(y.dbId,y.title),disabled:f,children:" Delete"})]},y.dbId))}):a.jsx("p",{className:"no-data",children:"No advertisements posted yet"})]}),m==="vaccines"&&a.jsxs("div",{className:"tab-content",children:[a.jsxs("div",{className:"manage-users-header",children:[a.jsx("h3",{children:" Vaccine Schedules Management"}),a.jsx("button",{className:"add-user-btn",onClick:()=>{j(!b),Un()},children:b?" Cancel":" Add Vaccine Schedule"})]}),b&&a.jsxs("form",{className:"add-user-form",onSubmit:le,children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"vaccine-name",children:"Vaccine Name"}),a.jsx("input",{id:"vaccine-name",type:"text",placeholder:"e.g., Birth Dose, 6-week Vaccines",value:G.name,onChange:y=>R({...G,name:y.target.value}),required:!0})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"vaccine-age-group",children:"Age Group"}),a.jsxs("select",{id:"vaccine-age-group",value:G.ageGroup,onChange:y=>R({...G,ageGroup:y.target.value}),children:[a.jsx("option",{value:"0-3",children:"Newborn (0-3 months)"}),a.jsx("option",{value:"3-6",children:"3-6 months"}),a.jsx("option",{value:"6-12",children:"6-12 months"}),a.jsx("option",{value:"12-24",children:"12-24 months"}),a.jsx("option",{value:"24-36",children:"24-36 months"}),a.jsx("option",{value:"36-48",children:"36-48 months"})]})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"vaccine-due-date",children:"Due Date (Months/Weeks)"}),a.jsx("input",{id:"vaccine-due-date",type:"text",placeholder:"e.g., At birth, 6 weeks, 10 weeks",value:G.dueDate,onChange:y=>R({...G,dueDate:y.target.value})})]}),a.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[a.jsx("label",{htmlFor:"vaccine-list",children:"Vaccines to be Given"}),a.jsx("textarea",{id:"vaccine-list",placeholder:"List all vaccines (comma separated)",value:G.vaccines,onChange:y=>R({...G,vaccines:y.target.value}),required:!0,style:{padding:"12px",border:"2px solid #e0e0e0",borderRadius:"8px",fontFamily:"inherit",fontSize:"1em",minHeight:"100px",resize:"vertical"}})]}),a.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[a.jsx("label",{htmlFor:"vaccine-description",children:"Description/Notes"}),a.jsx("textarea",{id:"vaccine-description",placeholder:"Additional notes or instructions",value:G.description,onChange:y=>R({...G,description:y.target.value}),style:{padding:"12px",border:"2px solid #e0e0e0",borderRadius:"8px",fontFamily:"inherit",fontSize:"1em",minHeight:"80px",resize:"vertical"}})]}),a.jsx("button",{type:"submit",className:"submit-btn",disabled:f,children:f?"Adding...":"Add Vaccine Schedule"})]}),f?a.jsx("p",{className:"loading",children:"Loading vaccine schedules..."}):u.length>0?a.jsx("div",{className:"vaccine-schedules-list",children:u.map(y=>a.jsxs("div",{className:"vaccine-schedule-card",children:[a.jsxs("div",{className:"vaccine-schedule-header",children:[a.jsx("h4",{children:y.name}),a.jsx("span",{className:"vaccine-age-badge",children:y.ageGroup})]}),a.jsxs("div",{className:"vaccine-schedule-body",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Due at:"})," ",y.dueDate]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Vaccines:"})," ",y.vaccines]}),y.description&&a.jsxs("p",{children:[a.jsx("strong",{children:"Notes:"})," ",y.description]})]}),a.jsx("button",{className:"delete-btn",onClick:()=>W(y.dbId,y.name),disabled:f,children:" Delete"})]},y.dbId))}):a.jsx("p",{className:"no-data",children:"No vaccine schedules configured yet"})]}),m==="token-config"&&a.jsxs("div",{className:"tab-content",children:[a.jsx("h3",{children:" Token Management System"}),a.jsxs("div",{className:"token-tabs",children:[a.jsx("button",{className:`token-tab-btn ${ze==="create-slot"?"active":""}`,onClick:()=>Me("create-slot"),children:" Create Daily Slots"}),a.jsxs("button",{className:`token-tab-btn ${ze==="manage-slots"?"active":""}`,onClick:()=>Me("manage-slots"),children:[" Manage Tokens (",$.length," slots)"]}),a.jsx("button",{className:`token-tab-btn ${ze==="current-token"?"active":""}`,onClick:()=>Me("current-token"),children:" Current Token"}),a.jsx("button",{className:`token-tab-btn ${ze==="settings"?"active":""}`,onClick:()=>Me("settings"),children:" Settings"})]}),ze==="create-slot"&&a.jsxs("div",{className:"token-slot-section",children:[a.jsx("h4",{children:"Create Daily Token Slots"}),a.jsx("p",{children:"Create 3 time slots (Morning, Afternoon, Evening) with 50 tokens each"}),$.length>0?a.jsxs("div",{className:"slots-info",children:[a.jsx("p",{className:"info-text",children:" Slots already created for today"}),a.jsx("div",{className:"slots-display",children:$.map(y=>a.jsxs("div",{className:"slot-card",children:[a.jsx("h5",{children:y.name}),a.jsxs("p",{children:[y.startTime," - ",y.endTime]}),a.jsxs("p",{className:"slot-tokens",children:[a.jsx("strong",{children:y.tokensAvailable})," / ",y.tokensAllocated]}),a.jsxs("small",{children:["Used: ",y.tokensUsed||0]})]},y.id))})]}):a.jsx("button",{className:"add-btn",onClick:Gt,disabled:f,children:" Create Today's Slots"})]}),ze==="manage-slots"&&a.jsxs("div",{className:"manage-tokens-section",children:[a.jsx("h4",{children:"Manage Tokens by Slot"}),$.length===0?a.jsx("p",{className:"no-data",children:"No slots created yet. Please create daily slots first."}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"slots-list",children:$.map(y=>a.jsxs("button",{className:`slot-select-btn ${(vt==null?void 0:vt.id)===y.id?"active":""}`,onClick:()=>{ti(y),Be(y.id)},children:[a.jsx("strong",{children:y.name}),a.jsxs("span",{className:"slot-time",children:[y.startTime,"-",y.endTime]}),a.jsxs("span",{className:"slot-count",children:[y.tokensAvailable,"/",y.tokensAllocated]})]},y.id))}),vt&&a.jsxs("div",{className:"slot-tokens-section",children:[a.jsxs("h5",{children:["Tokens for ",vt.name," Slot"]}),ks.length===0?a.jsx("p",{className:"no-data",children:"No token requests yet"}):a.jsxs("div",{className:"tokens-table",children:[a.jsxs("div",{className:"table-header",children:[a.jsx("div",{className:"col-token",children:"Token #"}),a.jsx("div",{className:"col-patient",children:"Patient Name"}),a.jsx("div",{className:"col-case",children:"Case #"}),a.jsx("div",{className:"col-arrival",children:"Expected Arrival"}),a.jsx("div",{className:"col-status",children:"Status"}),a.jsx("div",{className:"col-action",children:"Action"})]}),ks.map((y,A)=>a.jsxs("div",{className:"table-row",children:[a.jsx("div",{className:"col-token",children:a.jsxs("strong",{children:["#",y.tokenNumber]})}),a.jsx("div",{className:"col-patient",children:y.patientName}),a.jsx("div",{className:"col-case",children:y.caseNumber}),a.jsx("div",{className:"col-arrival",children:y.expectedArrivalTime||"Calculating..."}),a.jsx("div",{className:"col-status",children:a.jsx("span",{className:`status-badge ${y.status||"pending"}`,children:y.status==="cleared"?" Cleared":" Pending"})}),a.jsx("div",{className:"col-action",children:y.status!=="cleared"&&a.jsx("button",{className:"clear-btn",onClick:()=>Mn(vt.id,y.id),disabled:f,children:" Clear"})})]},y.id))]})]})]})]}),ze==="current-token"&&a.jsxs("div",{className:"current-token-section",children:[a.jsx("h4",{children:" Real-time Token Management"}),tt&&a.jsx("div",{className:"current-token-display",children:a.jsxs("div",{className:"token-display-card",children:[a.jsx("span",{className:"label",children:"Currently Running Token"}),a.jsx("div",{className:"token-number",children:tt.number}),a.jsxs("div",{className:"token-meta",children:[a.jsx("span",{className:`token-type-badge ${tt.type}`,children:tt.type==="online"?" Online":" Offline"}),a.jsx("span",{className:"slot-name",children:tt.slotName})]})]})}),a.jsxs("div",{className:"offline-token-form",children:[a.jsx("h5",{children:"Enter Offline Token"}),a.jsx("p",{children:"Use this when admin generates tokens for walk-in patients (offline)"}),a.jsxs("form",{onSubmit:x,children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Token Number"}),a.jsx("input",{type:"number",value:Ln,onChange:y=>sr(y.target.value),placeholder:"e.g., 45",min:"1",required:!0})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Slot"}),a.jsxs("select",{value:ln,onChange:y=>V(y.target.value),children:[a.jsx("option",{value:"Morning",children:"Morning (09:00 - 12:00)"}),a.jsx("option",{value:"Afternoon",children:"Afternoon (14:00 - 17:00)"}),a.jsx("option",{value:"Evening",children:"Evening (17:00 - 20:00)"})]})]}),a.jsx("button",{type:"submit",className:"submit-btn",disabled:f,children:" Set Offline Token"})]})]}),a.jsxs("div",{className:"call-next-token",children:[a.jsx("h5",{children:"Call Next Token"}),a.jsx("p",{children:"Click to increment current token and mark as online or offline"}),a.jsxs("div",{className:"button-group",children:[a.jsx("button",{className:"next-online-btn",onClick:()=>z("online"),disabled:f||!tt,children:" Next (Online)"}),a.jsx("button",{className:"next-offline-btn",onClick:()=>z("offline"),disabled:f||!tt,children:" Next (Offline)"})]})]}),S&&a.jsx("div",{className:"success-msg",children:S}),_&&a.jsx("div",{className:"error-msg",children:_})]}),ze==="settings"&&a.jsxs("div",{className:"token-config-section",children:[a.jsxs("div",{className:"config-info",children:[a.jsxs("div",{className:"info-card",children:[a.jsx("span",{className:"info-label",children:"Tokens per Slot"}),a.jsx("span",{className:"info-value",children:T.tokensPerSlot||50})]}),a.jsxs("div",{className:"info-card",children:[a.jsx("span",{className:"info-label",children:"Slot Reset Time"}),a.jsx("span",{className:"info-value",children:T.slotResetTime||"09:00"})]}),a.jsxs("div",{className:"info-card",children:[a.jsx("span",{className:"info-label",children:"Max Tokens per Day"}),a.jsx("span",{className:"info-value",children:T.maxTokensPerDay||150})]})]}),Dt?a.jsxs("form",{className:"token-config-form",onSubmit:nt,children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Tokens per Slot"}),a.jsx("input",{type:"number",value:T.tokensPerSlot,onChange:y=>U({...T,tokensPerSlot:parseInt(y.target.value)}),min:"1",max:"500",required:!0})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Slot Reset Time (HH:MM)"}),a.jsx("input",{type:"time",value:T.slotResetTime,onChange:y=>U({...T,slotResetTime:y.target.value}),required:!0})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Max Tokens per Day"}),a.jsx("input",{type:"number",value:T.maxTokensPerDay,onChange:y=>U({...T,maxTokensPerDay:parseInt(y.target.value)}),min:"1",max:"500",required:!0})]}),a.jsxs("div",{className:"form-actions",children:[a.jsx("button",{type:"submit",className:"submit-btn",disabled:f,children:" Save Configuration"}),a.jsx("button",{type:"button",className:"cancel-btn",onClick:()=>Q(!1),disabled:f,children:" Cancel"})]})]}):a.jsx("button",{className:"add-btn",onClick:()=>Q(!0),children:" Edit Configuration"}),a.jsxs("div",{className:"config-notes",children:[a.jsx("h4",{children:" Configuration Notes:"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Set tokens per slot: Maximum tokens available in each time slot"}),a.jsx("li",{children:"Set slot reset time: Daily time when token counter resets"}),a.jsx("li",{children:"Set max tokens per day: Maximum total tokens available in a single day"}),a.jsx("li",{children:"System automatically resets tokens daily at the configured reset time"})]})]})]})]})]})}function e1({userToken:t}){const[e,n]=E.useState(null),[s,r]=E.useState(null),[i,o]=E.useState(0),[l,c]=E.useState(!0),u=new Date().toISOString().split("T")[0];return E.useEffect(()=>{const h=B(H,`clinicStatus/${u}/currentToken`),f=RI(h,d=>{d.exists()&&n(d.val()),c(!1)},d=>{console.error("Error fetching current token:",d),c(!1)});return()=>f()},[u]),E.useEffect(()=>{if(t&&e){const h=e.number,f=t.tokenNumber;if(f>h){const d=f-h,v=d*5,S=Math.floor(v/60),w=v%60;S>0?r(`${S}h ${w}m`):r(`${w}m`),o(d-1)}else f===h?(r("Your Turn Now!"),o(0)):(r("Completed"),o(0))}},[t,e]),l?a.jsx("div",{className:"current-token-banner",children:a.jsx("div",{className:"banner-content",children:"Loading current token..."})}):e?a.jsx("div",{className:"current-token-banner",children:a.jsxs("div",{className:"banner-content",children:[a.jsxs("div",{className:"token-section",children:[a.jsx("div",{className:"section-label",children:"Currently Running"}),a.jsxs("div",{className:"token-display",children:[a.jsx("span",{className:"token-number",children:e.number}),a.jsx("span",{className:`token-type ${e.type}`,children:e.type==="online"?" Online":" Offline"})]}),a.jsx("small",{className:"slot-name",children:e.slotName})]}),a.jsx("div",{className:"divider"}),t?a.jsxs("div",{className:"user-token-section",children:[a.jsx("div",{className:"section-label",children:"Your Token"}),a.jsxs("div",{className:"user-token-info",children:[a.jsxs("div",{className:"user-token-number",children:["#",t.tokenNumber]}),a.jsxs("div",{className:"user-token-meta",children:[a.jsxs("div",{className:"meta-item",children:[a.jsx("span",{className:"meta-label",children:"Status"}),a.jsx("span",{className:"meta-value",children:s==="Your Turn Now!"?" Now":s==="Completed"?" Done":" Waiting"})]}),a.jsxs("div",{className:"meta-item",children:[a.jsx("span",{className:"meta-label",children:"Time Left"}),a.jsx("span",{className:`meta-value ${s==="Your Turn Now!"?"urgent":""}`,children:s})]}),i>0&&a.jsxs("div",{className:"meta-item",children:[a.jsx("span",{className:"meta-label",children:"Patients Ahead"}),a.jsx("span",{className:"meta-value",children:i})]})]})]})]}):a.jsx("div",{className:"no-user-token",children:a.jsx("p",{children:" You haven't requested a token yet"})})]})}):a.jsx("div",{className:"current-token-banner empty",children:a.jsx("div",{className:"banner-content",children:a.jsx("p",{children:" No tokens being served currently"})})})}function t1({userInfo:t,onLogout:e,onPharmacyClick:n}){const[s,r]=E.useState([]),[i,o]=E.useState([]),[l,c]=E.useState(null),[u,h]=E.useState(null),[f,d]=E.useState([]),[_,v]=E.useState(null),[S,w]=E.useState("home"),[m,p]=E.useState(!1),[g,k]=E.useState(!1),[C,N]=E.useState(null),[b,j]=E.useState({name:"",age:"",dateOfBirth:""}),[X,K]=E.useState(""),[Y,Ee]=E.useState([]),[L,ve]=E.useState(!1),[se,fe]=E.useState(null),[G,R]=E.useState({caseNumber:"",reason:"",contactNumber:"",dependentName:""}),[T,U]=E.useState(null),[$,re]=E.useState(null),[Dt,Q]=E.useState(!1),[ze,Me]=E.useState(!1),[$e,Ss]=E.useState({rating:5,comment:"",experience:"excellent"}),[ks,xs]=E.useState(!1),vt=3,ti=async()=>{try{const x=B(H,"news"),z=await we(x);if(z.exists()){const ie=Object.entries(z.val()).map(([le,W])=>({id:le,...W}));r(ie.sort((le,W)=>new Date(W.createdAt)-new Date(le.createdAt)))}}catch(x){console.error("Error fetching news:",x)}},tt=async()=>{try{const x=B(H,`users/${t.id}/kids`),z=await we(x);if(z.exists()){const ie=Object.entries(z.val()).map(([le,W])=>({id:le,...W}));o(ie)}else o([])}catch(x){console.error("Error fetching kids:",x)}},On=async()=>{try{const x=B(H,`users/${t.id}`),z=await we(x);if(z.exists()){const W=z.val();c({current:W.tokenCount||0,max:W.maxTokens||10,percentage:(W.tokenCount||0)/(W.maxTokens||10)*100})}const ie=B(H,"config/tokenSettings"),le=await we(ie);if(le.exists()){const W=le.val();Ln(W.slotResetTime)}}catch(x){console.error("Error fetching token status:",x)}},Ln=x=>{if(!x){h("09:00 AM");return}const[z,ie]=x.split(":").map(Number),le=new Date,W=new Date;W.setHours(z,ie,0),le>W&&W.setDate(W.getDate()+1);const De=W.getHours(),nt=W.getMinutes(),Ce=De>=12?"PM":"AM",Gt=De%12||12,Be=String(nt).padStart(2,"0");h(`${Gt}:${Be} ${Ce}`)},sr=async()=>{try{const x=B(H,"vaccineSchedules"),z=await we(x);if(z.exists()){const ie=Object.entries(z.val()).map(([le,W])=>({id:le,...W}));d(ie.sort((le,W)=>{const De=parseInt(le.ageGroup.split("-")[0]),nt=parseInt(W.ageGroup.split("-")[0]);return De-nt}))}else d([])}catch(x){console.error("Error fetching vaccine schedules:",x)}},ln=async()=>{try{const x=new Date().toISOString().split("T")[0],z=B(H,`tokenSlots/${x}`),ie=await we(z);if(ie.exists()){const le=ie.val(),W=new Date,De=Object.entries(le).map(([nt,Ce])=>{const[Gt,Be]=(Ce.endTime||"20:00").split(":").map(Number),Mn=new Date;Mn.setHours(Gt,Be,0,0);const qt=W>Mn;let Kt=!1;Ce.tokens&&(Kt=Object.values(Ce.tokens).some(Yt=>Yt.patientId===t.id&&Yt.status!=="cleared"&&Yt.status!=="canceled"));let Fn=!1;return Ce.tokens&&(Fn=Object.values(Ce.tokens).some(Yt=>(Yt.status==="pending"||Yt.status==="called")&&W>Mn)),{id:nt,...Ce,isExpired:qt,isDisabled:qt||Kt||Fn,disableReason:qt?"slot-expired":Kt?"user-has-token":Fn?"unhandled-tokens":null}});Ee(De.sort((nt,Ce)=>nt.startTime.localeCompare(Ce.startTime)))}else Ee([])}catch(x){console.error("Error fetching token slots:",x)}},V=async()=>{try{const x=new Date().toISOString().split("T")[0],z=B(H,`tokenSlots/${x}`),ie=await we(z);if(!ie.exists()){U(null),re(null);return}const le=ie.val();let W=null,De=null;for(const[nt,Ce]of Object.entries(le))if(Ce.tokens){const Be=Object.entries(Ce.tokens).find(([Mn,qt])=>qt.patientId===t.id);if(Be){W={id:Be[0],slotId:nt,...Be[1]},De=Ce;break}}if(W){const nt=De.tokens?Object.values(De.tokens):[],Ce=nt.filter(Be=>Be.status!=="cleared"),Gt=Ce.filter(Be=>Be.tokenNumber<W.tokenNumber).length;U(W),re({totalPatientsInSlot:nt.length,patientsAhead:Gt,patientsWaiting:Ce.length,availableTokens:De.tokensAvailable||0,slotName:De.name,slotStartTime:De.startTime})}else U(null),re(null)}catch(x){console.error("Error fetching patient token status:",x),U(null),re(null)}},D=async()=>{if(!T||!$){alert("No active token to cancel");return}if(window.confirm("Are you sure you want to cancel your token? You will lose your place in the queue.")){p(!0);try{const x=new Date().toISOString().split("T")[0],z=B(H,`tokenSlots/${x}/${T.slotId}/tokens/${T.id}`);await Ls(z);const ie=B(H,`tokenSlots/${x}/${T.slotId}`);await yr(ie,{tokensAvailable:($.availableTokens||0)+1,tokensUsed:Math.max(0,(T.tokenNumber||1)-1)}),alert("Your token has been cancelled successfully"),U(null),re(null),ln()}catch(x){console.error("Error cancelling token:",x),alert("Failed to cancel token: "+x.message)}finally{p(!1)}}},ee=async x=>{x.preventDefault(),p(!0);try{if(!se||!G.caseNumber||!G.reason||!G.contactNumber){alert("Please fill all required fields"),p(!1);return}const z=new Date().toISOString().split("T")[0],ie=B(H,`tokenSlots/${z}/${se}`),le=await we(ie);if(!le.exists()){alert("Slot not found"),p(!1);return}const W=le.val();if(W.tokens){const Un=Object.values(W.tokens).find(y=>y.patientId===t.id&&y.status!=="cleared"&&y.status!=="canceled"&&y.status!=="rated");if(Un){alert(` You can only request one token per slot!

You already have Token #${Un.tokenNumber} in this slot.
Please cancel it first if you want to request a different slot.`),p(!1);return}}const De=new Date,[nt,Ce]=W.endTime.split(":").map(Number),Gt=new Date;if(Gt.setHours(nt,Ce,0,0),De>Gt){alert(" This slot has expired and is no longer accepting token requests."),p(!1);return}if(W.tokensAvailable<=0){alert("No tokens available for this slot"),p(!1);return}const Be=W.tokensAllocated-W.tokensAvailable+1,[Mn,qt]=W.startTime.split(":").map(Number),Kt=new Date;Kt.setHours(Mn,qt+(Be-1)*5,0);const Fn=Kt.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}),Yt=`token-${Date.now()}`,Hl={id:Yt,tokenNumber:Be,patientId:t.id,patientName:t.name||"Patient",caseNumber:G.caseNumber,reason:G.reason,contactNumber:G.contactNumber,dependentName:G.dependentName,slotName:W.name,slotStartTime:W.startTime,expectedArrivalTime:Fn,status:"pending",requestedAt:new Date().toISOString()},Gl=B(H,`tokenSlots/${z}/${se}/tokens/${Yt}`);await ct(Gl,Hl),await yr(ie,{tokensAvailable:W.tokensAvailable-1,tokensUsed:(W.tokensUsed||0)+1}),alert(`Token #${Be} created successfully!
Expected arrival: ${Fn}`),R({caseNumber:"",reason:"",contactNumber:"",dependentName:""}),fe(null),ve(!1),ln()}catch(z){console.error("Error requesting token:",z),alert("Failed to request token: "+z.message)}finally{p(!1)}},_e=async x=>{x.preventDefault(),xs(!0);try{if(!T){alert("No token found");return}const z=new Date().toISOString().split("T")[0],ie=`feedback-${Date.now()}`,le={id:ie,tokenId:T.id,patientId:t.id,patientName:t.name||"Patient",tokenNumber:T.tokenNumber,rating:parseInt($e.rating),experience:$e.experience,comment:$e.comment,submittedAt:new Date().toISOString(),slotName:($==null?void 0:$.slotName)||"Unknown"},W=B(H,`feedback/${z}/${ie}`);await ct(W,le);const De=B(H,`tokenSlots/${z}/${T.slotId}/tokens/${T.id}`);await yr(De,{status:"rated",ratedAt:new Date().toISOString()}),alert(" Thank you for your feedback! Your rating has been submitted."),Me(!1),Ss({rating:5,comment:"",experience:"excellent"}),U(null),re(null),ve(!1),fe(null),await ln()}catch(z){console.error("Error submitting feedback:",z),alert("Failed to submit feedback: "+z.message)}finally{xs(!1)}};E.useEffect(()=>{ti(),tt(),On(),sr(),ln(),V()},[t.id]),E.useEffect(()=>{if(!T||T.status==="cleared")return;const x=setInterval(()=>{V()},1e4);return()=>clearInterval(x)},[T]);const at=async x=>{x.preventDefault(),p(!0);try{if(!b.name||!b.age||!b.dateOfBirth){alert("Please fill all fields"),p(!1);return}if(C){const z=B(H,`users/${t.id}/kids/${C}`);await yr(z,{...b,updatedAt:new Date().toISOString()})}else{if(i.length>=vt){alert(`You can add maximum ${vt} kids`),p(!1);return}const z=`kid-${Date.now()}`,ie=B(H,`users/${t.id}/kids/${z}`);await ct(ie,{...b,createdAt:new Date().toISOString()})}j({name:"",age:"",dateOfBirth:""}),k(!1),N(null),tt()}catch(z){console.error("Error saving kid:",z),alert("Error saving kid information")}finally{p(!1)}},Es=x=>{N(x.id),j({name:x.name,age:x.age,dateOfBirth:x.dateOfBirth}),k(!0)},Bl=async x=>{if(window.confirm("Are you sure you want to remove this kid?"))try{const z=B(H,`users/${t.id}/kids/${x}`);await Ls(z),tt()}catch(z){console.error("Error deleting kid:",z)}};return a.jsxs("div",{className:"patient-dashboard",children:[s.length>0&&a.jsx("div",{className:"news-banner",children:a.jsxs("div",{className:"news-content",children:[a.jsx("span",{className:"news-icon",children:""}),a.jsxs("div",{className:"news-text",children:[a.jsx("h3",{children:s[0].title}),a.jsx("p",{children:s[0].description}),a.jsx("span",{className:"news-date",children:new Date(s[0].createdAt).toLocaleDateString()})]})]})}),a.jsxs("div",{className:"dashboard-header",children:[a.jsxs("div",{className:"header-content",children:[a.jsxs("h1",{children:[" Welcome, ",t.name,"!"]}),a.jsx("p",{children:"Manage your family's healthcare needs"})]}),a.jsx("button",{className:"logout-btn",onClick:e,children:" Logout"})]}),a.jsx(Uy,{location:"dashboard"}),a.jsx(e1,{userToken:T}),l&&a.jsxs("div",{className:"quick-stats",children:[a.jsxs("div",{className:"stat-card",children:[a.jsx("span",{className:"stat-label",children:"Tokens Available"}),a.jsxs("span",{className:"stat-value",children:[l.current,"/",l.max]}),a.jsx("div",{className:"progress-bar",children:a.jsx("div",{className:"progress-fill",style:{width:`${l.percentage}%`}})})]}),a.jsxs("div",{className:"stat-card",children:[a.jsx("span",{className:"stat-label",children:"Total Kids"}),a.jsx("span",{className:"stat-value",children:i.length})]}),a.jsxs("div",{className:"stat-card",children:[a.jsx("span",{className:"stat-label",children:"Member Since"}),a.jsx("span",{className:"stat-value",children:new Date(t.createdAt).toLocaleDateString()})]})]}),a.jsxs("div",{className:"cards-grid",children:[a.jsxs("div",{className:"service-card kids-card",children:[a.jsxs("div",{className:"card-header",children:[a.jsx("span",{className:"card-icon",children:""}),a.jsxs("h2",{children:["Add Kids (",i.length,"/",vt,")"]})]}),a.jsx("p",{className:"card-description",children:"Register your children"}),a.jsx("button",{className:"card-btn",onClick:()=>{C?(k(!1),N(null),j({name:"",age:"",dateOfBirth:""})):k(!g)},disabled:i.length>=vt&&!g&&!C,children:C?" Update Kid":g?" Cancel":i.length>=vt?" Max kids reached":" Add Kid"}),g&&a.jsxs("form",{className:"kid-form",onSubmit:at,children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Child's Name"}),a.jsx("input",{type:"text",placeholder:"Enter name",value:b.name,onChange:x=>j({...b,name:x.target.value}),required:!0})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Age"}),a.jsx("input",{type:"number",placeholder:"Age in years",value:b.age,onChange:x=>j({...b,age:x.target.value}),required:!0})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Date of Birth"}),a.jsx("input",{type:"date",value:b.dateOfBirth,onChange:x=>j({...b,dateOfBirth:x.target.value}),required:!0})]}),a.jsx("button",{type:"submit",className:"form-submit",disabled:m,children:m?C?"Updating...":"Adding...":C?"Update Child":"Add Child"})]}),i.length>0&&a.jsx("div",{className:"kids-list",children:i.map(x=>a.jsxs("div",{className:"kid-item",children:[a.jsxs("div",{className:"kid-info",children:[a.jsx("p",{className:"kid-name",children:x.name}),a.jsxs("p",{className:"kid-age",children:["Age: ",x.age," years | DOB: ",x.dateOfBirth]})]}),a.jsxs("div",{className:"kid-actions",children:[a.jsx("button",{className:"edit-btn",onClick:()=>Es(x),title:"Edit kid",children:""}),a.jsx("button",{className:"delete-btn",onClick:()=>Bl(x.id),title:"Delete kid",children:""})]})]},x.id))})]}),a.jsxs("div",{className:"service-card request-token-card",children:[a.jsxs("div",{className:"card-header",children:[a.jsx("span",{className:"card-icon",children:""}),a.jsx("h2",{children:"Request Token"})]}),a.jsx("p",{className:"card-description",children:"Get an appointment slot"}),T?T.status==="cleared"?a.jsxs("div",{className:"completed-token-message",children:[a.jsx("div",{className:"message-icon",children:""}),a.jsx("p",{className:"message-title",children:"Your Appointment is Complete!"}),a.jsx("p",{className:"message-text",children:"Thank you for visiting us. We would love to hear about your experience."}),ze?a.jsxs("form",{className:"feedback-form",onSubmit:_e,children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"How was your experience? *"}),a.jsxs("select",{value:$e.experience,onChange:x=>Ss({...$e,experience:x.target.value}),required:!0,children:[a.jsx("option",{value:"excellent",children:" Excellent"}),a.jsx("option",{value:"good",children:" Good"}),a.jsx("option",{value:"average",children:" Average"}),a.jsx("option",{value:"poor",children:" Poor"}),a.jsx("option",{value:"veryPoor",children:" Very Poor"})]})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Rating (1-5) *"}),a.jsx("div",{className:"rating-stars",children:[1,2,3,4,5].map(x=>a.jsx("button",{type:"button",className:`star ${$e.rating>=x?"active":""}`,onClick:()=>Ss({...$e,rating:x}),children:""},x))}),a.jsxs("small",{children:["Selected: ",$e.rating,"/5"]})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Your Comments (Optional)"}),a.jsx("textarea",{value:$e.comment,onChange:x=>Ss({...$e,comment:x.target.value}),placeholder:"Share your thoughts about your appointment...",rows:"3"})]}),a.jsxs("div",{className:"feedback-actions",children:[a.jsx("button",{type:"submit",className:"submit-feedback-btn",disabled:ks,children:ks?" Submitting...":" Submit Feedback"}),a.jsx("button",{type:"button",className:"skip-feedback-btn",onClick:()=>{Me(!1),U(null),re(null),ln()},children:"Skip for Now"})]})]}):a.jsx("div",{className:"completed-actions",children:a.jsx("button",{className:"feedback-btn",onClick:()=>Me(!0),children:" Give Feedback & Rating"})})]}):a.jsxs("div",{className:"already-token-message",children:[a.jsx("div",{className:"message-icon",children:""}),a.jsx("p",{className:"message-title",children:"Token in Progress"}),a.jsx("p",{className:"message-text",children:"You already have an active token. Please complete your appointment."}),a.jsxs("p",{className:"token-info",children:["Current Token: ",a.jsxs("strong",{children:["#",T.tokenNumber]})," in ",$==null?void 0:$.slotName]}),a.jsx("button",{className:"cancel-token-btn",onClick:D,disabled:m,children:" Cancel Token"})]}):L?a.jsxs("form",{className:"token-request-form",onSubmit:ee,children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Case Number *"}),a.jsx("input",{type:"text",placeholder:"Enter case number",value:G.caseNumber,onChange:x=>R({...G,caseNumber:x.target.value}),required:!0})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Reason for Visit *"}),a.jsx("textarea",{placeholder:"Describe your reason for visit",value:G.reason,onChange:x=>R({...G,reason:x.target.value}),required:!0})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Contact Number *"}),a.jsx("input",{type:"tel",placeholder:"Enter your contact number",value:G.contactNumber,onChange:x=>R({...G,contactNumber:x.target.value}),required:!0})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Dependent Name (Optional)"}),a.jsx("input",{type:"text",placeholder:"Name of child or dependent",value:G.dependentName,onChange:x=>R({...G,dependentName:x.target.value})})]}),a.jsxs("div",{className:"form-actions",children:[a.jsx("button",{type:"submit",className:"card-btn submit-btn",disabled:m,children:m?"Requesting...":" Request Token"}),a.jsx("button",{type:"button",className:"card-btn cancel-btn",onClick:()=>{ve(!1),fe(null)},disabled:m,children:" Cancel"})]})]}):a.jsx(a.Fragment,{children:Y.length===0?a.jsxs("div",{className:"no-slots-message",children:[a.jsx("p",{children:"No available slots for today"}),a.jsx("small",{children:"Please check back later"})]}):a.jsx(a.Fragment,{children:a.jsx("div",{className:"slots-grid",children:Y.map(x=>{const z=x.tokensAvailable===0,ie=new Date>=new Date(`${new Date().toISOString().split("T")[0]}T${x.startTime}:00`),le=x.isDisabled||z||m;let W="Select this slot";return x.isDisabled?x.disableReason==="slot-expired"?W=" This slot has expired - no longer accepting requests":x.disableReason==="user-has-token"?W=" You already have a token in this slot":x.disableReason==="unhandled-tokens"&&(W=" Slot disabled - unhandled tokens (admin did not clear or user did not cancel past deadline)"):z&&(W=" No tokens available"),a.jsxs("div",{className:`slot-option ${le?"disabled":""} ${x.disableReason==="user-has-token"?"disabled-user-token":x.disableReason==="slot-expired"?"disabled-expired":x.disableReason==="unhandled-tokens"?"disabled-unhandled":""}`,title:W,children:[a.jsx("h4",{children:x.name}),a.jsxs("p",{className:"slot-time",children:[x.startTime," - ",x.endTime]}),a.jsxs("p",{className:"slot-available",children:["Available: ",a.jsxs("strong",{children:[x.tokensAvailable,"/",x.tokensAllocated]})]}),le&&a.jsxs("p",{className:"slot-disabled-reason",children:[x.disableReason==="slot-expired"&&" Slot Expired",x.disableReason==="user-has-token"&&" You Have Token",x.disableReason==="unhandled-tokens"&&" Unhandled Tokens",z&&!x.isDisabled&&" No Tokens"]}),a.jsx("button",{className:"select-slot-btn",onClick:()=>{fe(x.id),ve(!0)},disabled:le,title:W,children:ie?" Already Started":z?" Full":" Select"})]},x.id)})})})})]}),a.jsxs("div",{className:"service-card status-card",children:[a.jsxs("div",{className:"card-header",children:[a.jsx("span",{className:"card-icon",children:""}),a.jsx("h2",{children:"Token Status"})]}),a.jsx("p",{className:"card-description",children:"Your appointment details"}),T&&$?a.jsxs("div",{className:"compact-status-content",children:[a.jsxs("div",{className:"token-number-display",children:[a.jsxs("div",{className:"token-circle",children:["#",T.tokenNumber]}),a.jsx("p",{className:"slot-name",children:$.slotName})]}),a.jsxs("div",{className:"status-summary",children:[a.jsxs("div",{className:"summary-item",children:[a.jsx("span",{className:"summary-label",children:"Position"}),a.jsxs("span",{className:"summary-value",children:[$.patientsAhead+1," / ",$.patientsWaiting]})]}),a.jsxs("div",{className:"summary-item",children:[a.jsx("span",{className:"summary-label",children:"Arrival Time"}),a.jsx("span",{className:"summary-value",children:T.expectedArrivalTime})]})]}),a.jsx("div",{className:"token-status-compact",children:a.jsx("span",{className:`status-badge ${T.status||"pending"}`,children:T.status==="cleared"?" Consultation Complete":" Waiting for Turn"})}),a.jsxs("div",{className:"card-actions",children:[a.jsx("button",{className:"card-btn view-details-btn",onClick:()=>Q(!0),children:" View Details"}),T.status!=="cleared"&&a.jsx("button",{className:"card-btn cancel-token-btn",onClick:D,disabled:m,children:" Cancel"})]})]}):a.jsxs("div",{className:"no-token-message",children:[a.jsx("p",{children:"No active token request"}),a.jsx("small",{children:'Go to "Request Token" card above to get a token'})]})]}),Dt&&T&&$&&a.jsx("div",{className:"modal-overlay",onClick:()=>Q(!1),children:a.jsxs("div",{className:"modal-content",onClick:x=>x.stopPropagation(),children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h2",{children:"Token Details"}),a.jsx("button",{className:"modal-close-btn",onClick:()=>Q(!1),children:""})]}),a.jsxs("div",{className:"modal-body",children:[a.jsx("div",{className:"modal-section token-section",children:a.jsxs("div",{className:"token-display-modal",children:[a.jsxs("div",{className:"token-number-large",children:["#",T.tokenNumber]}),a.jsx("p",{className:"slot-badge-modal",children:$.slotName})]})}),a.jsxs("div",{className:"modal-section",children:[a.jsx("h3",{children:"Queue Information"}),a.jsxs("div",{className:"info-grid",children:[a.jsxs("div",{className:"info-card",children:[a.jsx("span",{className:"info-label",children:"Position in Queue"}),a.jsxs("span",{className:"info-value",children:[$.patientsAhead+1," of ",$.patientsWaiting]})]}),a.jsxs("div",{className:"info-card",children:[a.jsx("span",{className:"info-label",children:"Patients Ahead"}),a.jsx("span",{className:"info-value",children:$.patientsAhead})]}),a.jsxs("div",{className:"info-card",children:[a.jsx("span",{className:"info-label",children:"Total Waiting"}),a.jsx("span",{className:"info-value",children:$.patientsWaiting})]}),a.jsxs("div",{className:"info-card",children:[a.jsx("span",{className:"info-label",children:"Available Tokens"}),a.jsx("span",{className:"info-value",children:$.availableTokens})]})]})]}),a.jsxs("div",{className:"modal-section arrival-section",children:[a.jsx("h3",{children:"Expected Arrival Time"}),a.jsxs("div",{className:"arrival-display",children:[a.jsx("p",{className:"arrival-time",children:T.expectedArrivalTime}),a.jsxs("p",{className:"arrival-subtitle",children:["~",$.patientsAhead*5," minutes from slot start"]})]})]}),a.jsxs("div",{className:"modal-section case-section",children:[a.jsx("h3",{children:"Case Details"}),a.jsxs("div",{className:"case-info",children:[a.jsxs("div",{className:"case-row",children:[a.jsx("span",{className:"case-label",children:"Case Number:"}),a.jsx("span",{className:"case-value",children:T.caseNumber})]}),a.jsxs("div",{className:"case-row",children:[a.jsx("span",{className:"case-label",children:"Contact Number:"}),a.jsx("span",{className:"case-value",children:T.contactNumber})]}),a.jsxs("div",{className:"case-row",children:[a.jsx("span",{className:"case-label",children:"Reason for Visit:"}),a.jsx("span",{className:"case-value",children:T.reason})]}),T.dependentName&&a.jsxs("div",{className:"case-row",children:[a.jsx("span",{className:"case-label",children:"Dependent Name:"}),a.jsx("span",{className:"case-value",children:T.dependentName})]})]})]}),a.jsx("div",{className:"modal-section status-section",children:a.jsx("span",{className:`status-badge ${T.status||"pending"}`,children:T.status==="cleared"?" Consultation Complete":" Waiting for Turn"})})]}),a.jsxs("div",{className:"modal-footer",children:[T.status!=="cleared"&&a.jsx("button",{className:"modal-btn cancel-btn",onClick:()=>{D(),Q(!1)},disabled:m,children:" Cancel Token"}),a.jsx("button",{className:"modal-btn close-btn",onClick:()=>Q(!1),children:" Close"})]})]})}),"        ",a.jsxs("div",{className:"service-card vaccine-card",children:[a.jsxs("div",{className:"card-header",children:[a.jsx("span",{className:"card-icon",children:""}),a.jsx("h2",{children:"Vaccine Schedules"})]}),a.jsx("p",{className:"card-description",children:"Track vaccination plans for your kids"}),i.length>0?a.jsxs("div",{className:"vaccine-selection",children:[a.jsx("label",{htmlFor:"select-kid",children:"Select Kid:"}),a.jsxs("select",{id:"select-kid",onChange:x=>v(x.target.value),value:_||"",children:[a.jsx("option",{value:"",children:"Choose a child..."}),i.map(x=>a.jsxs("option",{value:x.age,children:[x.name," (",x.age," years)"]},x.id))]})]}):a.jsx("p",{className:"vaccine-notice",children:"Add kids first to view vaccine schedules"}),_&&f.length>0&&a.jsx("div",{className:"vaccine-list",children:f.filter(x=>{const[z,ie]=x.ageGroup.split("-").map(Number);return _>=z&&_<=ie}).map(x=>a.jsxs("div",{className:"vaccine-item",children:[a.jsx("div",{className:"vaccine-name",children:x.name}),a.jsxs("div",{className:"vaccine-details",children:[a.jsxs("span",{className:"due-date",children:[" ",x.dueDate]}),a.jsxs("span",{className:"vaccines-given",children:[" ",x.vaccines]})]}),x.description&&a.jsx("div",{className:"vaccine-notes",children:x.description})]},x.id))}),_&&f.length>0&&f.filter(x=>{const[z,ie]=x.ageGroup.split("-").map(Number);return _>=z&&_<=ie}).length===0&&a.jsx("p",{className:"vaccine-notice",children:"No vaccines scheduled for this age group"}),f.length===0&&_&&a.jsx("p",{className:"vaccine-notice",children:"No vaccine schedules available"})]}),a.jsxs("div",{className:"service-card pharmacy-card",children:[a.jsxs("div",{className:"card-header",children:[a.jsx("span",{className:"card-icon",children:""}),a.jsx("h2",{children:"Pharmacy Medicines"})]}),a.jsx("p",{className:"card-description",children:"Prescription & medicines"}),a.jsxs("div",{className:"pharmacy-info",children:[a.jsx("p",{className:"info-text",children:"View and manage your medicines"}),a.jsx("p",{className:"info-text",children:"Get delivery at home"}),a.jsx("p",{className:"info-text",children:"Best prices guaranteed"})]}),a.jsxs("button",{className:"card-btn",onClick:n,disabled:i.length===0,title:i.length===0?"Add kids first to view medicines":"",children:[" ",i.length===0?"Add Kids First":"Shop Medicines"]})]}),a.jsxs("div",{className:"service-card products-card",children:[a.jsxs("div",{className:"card-header",children:[a.jsx("span",{className:"card-icon",children:""}),a.jsx("h2",{children:"Baby Products"})]}),a.jsx("p",{className:"card-description",children:"Essential baby care items"}),a.jsxs("div",{className:"products-info",children:[a.jsx("p",{className:"info-text",children:"Diapers & wipes"}),a.jsx("p",{className:"info-text",children:"Baby food & formula"}),a.jsx("p",{className:"info-text",children:"Toys & gear"})]}),a.jsx("button",{className:"card-btn",children:" Shop Now"})]})]}),s.length>0&&a.jsxs("div",{className:"all-news-section",children:[a.jsx("h2",{children:" Latest Updates"}),a.jsx("div",{className:"news-list",children:s.map(x=>a.jsxs("div",{className:"news-item",children:[a.jsx("h4",{children:x.title}),a.jsx("p",{children:x.description}),a.jsx("span",{className:"news-date",children:new Date(x.createdAt).toLocaleDateString()})]},x.id))})]})]})}function n1({userInfo:t,onLogout:e,onBack:n}){const[s,r]=E.useState([]),[i,o]=E.useState([]),[l,c]=E.useState([]),[u,h]=E.useState("all"),[f,d]=E.useState(!0),[_,v]=E.useState(""),[S,w]=E.useState([]);E.useEffect(()=>{m()},[]);const m=async()=>{try{d(!0);const p=B(H,"products/baby-products"),g=B(H,"products/pharma-products"),[k,C]=await Promise.all([we(p),we(g)]),N=k.exists()?Object.entries(k.val()).map(([j,X])=>({id:j,...X,category:"Baby Products",categoryIcon:""})):[],b=C.exists()?Object.entries(C.val()).map(([j,X])=>({id:j,...X,category:"Pharmacy Products",categoryIcon:""})):[];r(N),o(b),c([...N,...b]),w([...N,...b])}catch(p){console.error("Error fetching products:",p)}finally{d(!1)}};return E.useEffect(()=>{let p=[];u==="all"?p=l:u==="baby"?p=s:u==="pharma"&&(p=i),_.trim()&&(p=p.filter(g=>{var k,C;return g.name.toLowerCase().includes(_.toLowerCase())||((k=g.description)==null?void 0:k.toLowerCase().includes(_.toLowerCase()))||((C=g.category)==null?void 0:C.toLowerCase().includes(_.toLowerCase()))})),w(p)},[u,_,s,i,l]),a.jsxs("div",{className:"pharmacy-container",children:[a.jsxs("div",{className:"pharmacy-header",children:[a.jsxs("div",{className:"pharmacy-title",children:[a.jsx("button",{className:"back-btn",onClick:n,children:" Back to Dashboard"}),a.jsx("h1",{children:" Shop - All Products"})]}),a.jsx("button",{className:"logout-btn",onClick:e,children:" Logout"})]}),a.jsxs("div",{className:"pharmacy-content",children:[a.jsx("div",{className:"search-section",children:a.jsx("input",{type:"text",className:"search-input",placeholder:" Search products...",value:_,onChange:p=>v(p.target.value)})}),a.jsxs("div",{className:"category-tabs",children:[a.jsxs("button",{className:`tab-btn ${u==="all"?"active":""}`,onClick:()=>h("all"),children:[" All Products (",l.length,")"]}),a.jsxs("button",{className:`tab-btn ${u==="baby"?"active":""}`,onClick:()=>h("baby"),children:[" Baby Products (",s.length,")"]}),a.jsxs("button",{className:`tab-btn ${u==="pharma"?"active":""}`,onClick:()=>h("pharma"),children:[" Medicines (",i.length,")"]})]}),f?a.jsx("div",{className:"loading",children:"Loading products..."}):S.length>0?a.jsx("div",{className:"products-grid",children:S.map(p=>a.jsxs("div",{className:"product-card",children:[p.image&&a.jsx("div",{className:"product-image",children:a.jsx("img",{src:p.image,alt:p.name})}),a.jsxs("div",{className:"product-info",children:[a.jsxs("div",{className:"product-header",children:[a.jsx("h3",{children:p.name}),a.jsxs("span",{className:"category-badge",children:[p.categoryIcon," ",p.category]})]}),p.description&&a.jsx("p",{className:"product-description",children:p.description}),p.category&&a.jsx("p",{className:"product-type",children:a.jsxs("small",{children:["Type: ",p.category]})}),a.jsx("div",{className:"product-details",children:a.jsxs("div",{className:"price-stock",children:[a.jsxs("span",{className:"price",children:["",p.price]}),a.jsx("span",{className:`stock ${p.stock>0?"in-stock":"out-of-stock"}`,children:p.stock>0?`${p.stock} in stock`:"Out of Stock"})]})}),a.jsx("button",{className:"add-to-cart-btn",disabled:p.stock<=0,children:p.stock>0?" Add to Cart":" Out of Stock"})]})]},p.id))}):a.jsxs("div",{className:"no-products",children:[a.jsx("p",{children:" No products found"}),_&&a.jsx("p",{className:"search-hint",children:"Try searching with different keywords"}),l.length===0&&!_&&a.jsx("p",{className:"empty-hint",children:"No products available yet. Check back soon!"})]})]})]})}function s1({onRoleSelect:t}){return a.jsx("div",{className:"role-selection-container",children:a.jsxs("div",{className:"role-card",children:[a.jsx("h1",{children:" Clinic Token Management System"}),a.jsx("p",{className:"subtitle",children:"Choose your role to continue"}),a.jsxs("div",{className:"roles-grid",children:[a.jsxs("div",{className:"role-option patient-role",onClick:()=>t("patient"),children:[a.jsx("div",{className:"role-icon",children:""}),a.jsx("h3",{children:"Patient"}),a.jsx("p",{children:"Request tokens and track your waiting time in the queue"}),a.jsx("button",{className:"role-btn",children:"Continue as Patient"})]}),a.jsxs("div",{className:"role-option admin-role",onClick:()=>t("clinic-admin"),children:[a.jsx("div",{className:"role-icon",children:""}),a.jsx("h3",{children:"Clinic Admin"}),a.jsx("p",{children:"Manage patient queue and call patients"}),a.jsx("button",{className:"role-btn",children:"Continue as Admin"})]}),a.jsxs("div",{className:"role-option manager-role",onClick:()=>t("token-admin"),children:[a.jsx("div",{className:"role-icon",children:""}),a.jsx("h3",{children:"Manager"}),a.jsx("p",{children:"Manage tokens and system configuration"}),a.jsx("button",{className:"role-btn",children:"Continue as Manager"})]}),a.jsxs("div",{className:"role-option pharma-role",onClick:()=>t("pharma-owner"),children:[a.jsx("div",{className:"role-icon",children:""}),a.jsx("h3",{children:"Pharmacy Owner"}),a.jsx("p",{children:"Manage baby products and pharmacy medicines"}),a.jsx("button",{className:"role-btn",children:"Continue as Pharmacy Owner"})]})]}),a.jsxs("div",{className:"features-info",children:[a.jsx("h4",{children:" System Features"}),a.jsxs("ul",{children:[a.jsx("li",{children:" Online token requests to avoid queues"}),a.jsx("li",{children:" Real-time waiting time estimates"}),a.jsx("li",{children:" Patient queue management"}),a.jsx("li",{children:" Automated patient calling system"}),a.jsx("li",{children:" Clinic analytics and reports"}),a.jsx("li",{children:" Reduce clinic overcrowding"}),a.jsx("li",{children:" Pharmacy management system"}),a.jsx("li",{children:" Baby products catalog"})]})]})]})})}function r1({userInfo:t,onLogout:e}){const[n,s]=E.useState("baby-products"),[r,i]=E.useState([]),[o,l]=E.useState([]),[c,u]=E.useState([]),[h,f]=E.useState(!1),[d,_]=E.useState(!1),[v,S]=E.useState(null),[w,m]=E.useState({name:"",description:"",price:"",stock:"",category:"",image:""}),[p,g]=E.useState(""),[k,C]=E.useState(""),N=async()=>{try{f(!0);const L=B(H,"products/baby-products"),ve=B(H,"products/pharma-products"),[se,fe]=await Promise.all([we(L),we(ve)]),G=se.exists()?Object.entries(se.val()).map(([T,U])=>({id:T,...U})):[],R=fe.exists()?Object.entries(fe.val()).map(([T,U])=>({id:T,...U})):[];l(G),u(R)}catch(L){console.error("Error fetching products:",L),g("Failed to fetch products")}finally{f(!1)}};E.useEffect(()=>{N()},[]);const b=async L=>{if(L.preventDefault(),g(""),C(""),!w.name||!w.price||!w.stock){g("Please fill all required fields");return}try{f(!0);const ve=n==="baby-products"?"baby-products":"pharma-products",se=v||Date.now().toString(),fe={...w,price:parseFloat(w.price),stock:parseInt(w.stock),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},G=B(H,`products/${ve}/${se}`);await ct(G,fe),C(v?"Product updated successfully!":"Product added successfully!"),m({name:"",description:"",price:"",stock:"",category:"",image:""}),S(null),_(!1),N()}catch(ve){console.error("Error adding product:",ve),g("Failed to add product")}finally{f(!1)}},j=async(L,ve)=>{if(window.confirm("Are you sure you want to delete this product?"))try{f(!0);const se=B(H,`products/${ve}/${L}`);await Ls(se),C("Product deleted successfully!"),N()}catch(se){console.error("Error deleting product:",se),g("Failed to delete product")}finally{f(!1)}},X=L=>{m({name:L.name,description:L.description||"",price:L.price,stock:L.stock,category:L.category||"",image:L.image||""}),S(L.id),_(!0)},K=()=>{m({name:"",description:"",price:"",stock:"",category:"",image:""}),S(null),_(!1)},Y=n==="baby-products"?o:c,Ee=n==="baby-products"?"Baby Products":"Pharmacy Products";return a.jsxs("div",{className:"pharma-owner-panel",children:[a.jsx("div",{className:"pharma-header",children:a.jsxs("div",{className:"pharma-header-content",children:[a.jsxs("div",{className:"pharma-info",children:[a.jsx("h1",{children:" Pharmacy Owner Dashboard"}),a.jsxs("p",{children:["Welcome, ",(t==null?void 0:t.name)||"Pharmacy Owner"]})]}),a.jsx("button",{className:"logout-btn",onClick:e,children:" Logout"})]})}),a.jsxs("div",{className:"pharma-container",children:[a.jsxs("div",{className:"pharma-tabs",children:[a.jsx("button",{className:`pharma-tab-btn ${n==="baby-products"?"active":""}`,onClick:()=>s("baby-products"),children:" Baby Products"}),a.jsx("button",{className:`pharma-tab-btn ${n==="pharma-products"?"active":""}`,onClick:()=>s("pharma-products"),children:" Pharmacy Products"})]}),p&&a.jsx("div",{className:"error-message",children:p}),k&&a.jsx("div",{className:"success-message",children:k}),a.jsxs("div",{className:"product-management",children:[a.jsx("button",{className:"add-product-btn",onClick:()=>{_(!(d&&!v))},children:d&&!v?" Cancel":" Add New Product"}),d&&a.jsxs("form",{className:"product-form",onSubmit:b,children:[a.jsx("h3",{children:v?"Edit Product":"Add New "+Ee}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Product Name *"}),a.jsx("input",{type:"text",placeholder:"Enter product name",value:w.name,onChange:L=>m({...w,name:L.target.value}),required:!0})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Description"}),a.jsx("textarea",{placeholder:"Enter product description",value:w.description,onChange:L=>m({...w,description:L.target.value}),rows:"3"})]}),a.jsxs("div",{className:"form-row",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Price () *"}),a.jsx("input",{type:"number",placeholder:"Enter price",value:w.price,onChange:L=>m({...w,price:L.target.value}),step:"0.01",required:!0})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Stock Quantity *"}),a.jsx("input",{type:"number",placeholder:"Enter stock quantity",value:w.stock,onChange:L=>m({...w,stock:L.target.value}),required:!0})]})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Category"}),a.jsx("input",{type:"text",placeholder:"Enter category",value:w.category,onChange:L=>m({...w,category:L.target.value})})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Image URL"}),a.jsx("input",{type:"url",placeholder:"Enter image URL",value:w.image,onChange:L=>m({...w,image:L.target.value})})]}),a.jsxs("div",{className:"form-actions",children:[a.jsx("button",{type:"submit",className:"submit-btn",disabled:h,children:h?" Saving...":v?" Update Product":" Add Product"}),a.jsx("button",{type:"button",className:"cancel-btn",onClick:K,disabled:h,children:" Cancel"})]})]})]}),a.jsxs("div",{className:"products-section",children:[a.jsxs("h2",{children:[Ee," (",Y.length,")"]}),Y.length===0?a.jsxs("div",{className:"no-products",children:[a.jsxs("p",{children:["No ",Ee.toLowerCase()," available yet"]}),a.jsx("p",{children:'Click "Add New Product" to get started'})]}):a.jsx("div",{className:"products-grid",children:Y.map(L=>a.jsxs("div",{className:"product-card",children:[L.image&&a.jsx("div",{className:"product-image",children:a.jsx("img",{src:L.image,alt:L.name})}),a.jsxs("div",{className:"product-content",children:[a.jsx("h4",{children:L.name}),L.description&&a.jsx("p",{className:"product-desc",children:L.description}),L.category&&a.jsx("span",{className:"category-badge",children:L.category}),a.jsxs("div",{className:"product-info",children:[a.jsx("div",{className:"price-section",children:a.jsxs("span",{className:"price",children:["",L.price]})}),a.jsx("div",{className:"stock-section",children:a.jsxs("span",{className:`stock ${L.stock>0?"in-stock":"out-of-stock"}`,children:["Stock: ",L.stock]})})]}),a.jsxs("div",{className:"product-actions",children:[a.jsx("button",{className:"edit-btn",onClick:()=>X(L),disabled:h,children:" Edit"}),a.jsx("button",{className:"delete-btn",onClick:()=>j(L.id,n),disabled:h,children:" Delete"})]})]})]},L.id))})]})]})]})}function i1(){const[t,e]=E.useState(!1),[n,s]=E.useState(null),[r,i]=E.useState(null),[o,l]=E.useState("dashboard"),[c,u]=E.useState([]),[h,f]=E.useState(!0),[d,_]=E.useState({availableTokens:10,maxTokens:10,totalRequests:0,beingServed:0});E.useEffect(()=>{const m=localStorage.getItem("userSession");if(m)try{const p=JSON.parse(m);e(!0),i(p.userInfo),s(p.userRole)}catch(p){console.error("Failed to restore session:",p),localStorage.removeItem("userSession")}f(!1)},[]);const v=m=>{s(m)},S=(m,p,g)=>{e(!0);const k={email:m,mobile:p,...g};i(k);let C="patient";g.role==="admin"?C="admin":g.role==="doctor"?C="clinic-admin":(g.role==="pharmaowner"||g.role==="pharma-owner")&&(C="pharma-owner"),s(C),localStorage.setItem("userSession",JSON.stringify({userInfo:k,userRole:C}))},w=()=>{e(!1),s(null),i(null),l("dashboard"),localStorage.removeItem("userSession")};return h?a.jsx("div",{className:"app-container",children:a.jsx("div",{style:{textAlign:"center",padding:"50px",fontSize:"18px",color:"#667eea"},children:"Loading..."})}):t?n==="admin"?a.jsxs("div",{className:"app-container",children:[a.jsx(ZI,{adminUser:r}),a.jsx("button",{className:"logout-btn",onClick:w,style:{position:"fixed",top:20,right:20,padding:"10px 20px",background:"#667eea",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"600",zIndex:999},children:" Logout"})]}):n==="pharma-owner"?a.jsx("div",{className:"app-container",children:a.jsx(r1,{userInfo:r,onLogout:w})}):n==="patient"?o==="pharmacy"?a.jsx(n1,{userInfo:r,onLogout:w,onBack:()=>l("dashboard")}):a.jsxs("div",{className:"app-container",children:[a.jsx(t1,{userInfo:r,onLogout:w,onPharmacyClick:()=>l("pharmacy")}),a.jsx("button",{className:"logout-btn",onClick:w,style:{position:"fixed",top:20,right:20,padding:"10px 20px",background:"#667eea",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"600",zIndex:1e3},children:" Logout"})]}):n==="clinic-admin"?a.jsx(JI,{tokenRequests:c,userInfo:r,onLogout:w}):a.jsx("div",{className:"app-container",children:a.jsx(XI,{userInfo:r,onLogout:w})}):a.jsx("div",{className:"app-container",children:n?a.jsx(GI,{onLogin:S}):a.jsx(s1,{onRoleSelect:v})})}Oc.createRoot(document.getElementById("root")).render(a.jsx(nw.StrictMode,{children:a.jsx(i1,{})}));
